/*! For license information please see simple.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("simple",[],t):"object"==typeof exports?exports.simple=t():e.simple=t()}(self,(()=>(()=>{"use strict";var e={362:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(607);t.default=(...e)=>{const t=[],r=e.length;for(let o=0;o<r;o++){const i=e[o];"Array"===(0,n.dataType)(i)&&i.forEach(((e,n)=>{t[o+n*r]=e}))}return t.filter((e=>null!=e))}},114:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.arraysLaminated=void 0;var o=r(362);Object.defineProperty(t,"arraysLaminated",{enumerable:!0,get:function(){return n(o).default}})},537:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t=!1)=>{try{if(TextDecoder){const t=new TextDecoder("utf-8");return JSON.parse(t.decode(new Uint8Array(e)))}const t=new Uint8Array(e),r=String.fromCharCode.apply(null,t);return JSON.parse(r)}catch(e){return void(t&&console.log(e))}}},415:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isDICM=t.arrayBufferToJson=void 0;var o=r(537);Object.defineProperty(t,"arrayBufferToJson",{enumerable:!0,get:function(){return n(o).default}});var i=r(754);Object.defineProperty(t,"isDICM",{enumerable:!0,get:function(){return n(i).default}})},754:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>{if(!e||!e.byteLength||e.byteLength<=132)return!1;let t="";const r=new Uint8Array(e,128,4);for(let e=0;e<r.length;e++)t+=String.fromCharCode(r[e]);return"DICM"===t}},80:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.store=new Map}get(e,...t){const r=JSON.stringify(t);if(!this.store.has(e)){const n=e(...t),o=new Map;return o.set(r,n),this.store.set(e,o),n}const n=this.store.get(e);if(!(null==n?void 0:n.has(r))){const o=e(...t);return null==n||n.set(r,o),o}return n.get(r)}}},983:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,r=1){this.db=void 0,this.dbName=e,this.storeName=t,this.version=r}open(){return new Promise(((e,t)=>{if(!(indexedDB||webkitIndexedDB||mozIndexedDB||msIndexedDB)){const e=new Error("IndexedDB is not supported");return console.warn(e),t(e)}const r=indexedDB.open(this.dbName,this.version);r.onsuccess=t=>{var r;this.db=null===(r=t.target)||void 0===r?void 0:r.result,e(t)},r.onerror=function(e){t(e),console.log("数据库打开失败...")},r.onupgradeneeded=e=>{var t;const r=this.storeName,n=null===(t=e.target)||void 0===t?void 0:t.result;n.objectStoreNames.contains(r)||n.createObjectStore(r)}}))}dispatch(e,t={},...r){const{mode:n="readwrite",more:o=!1}=t;return new Promise(((t,i)=>{const s=this.getObjectStore(n),u=s[e];if(!(e in s))return i(`${e} is undefined, reference resources:https://developer.mozilla.org/zh-CN/docs/Web/API/IDBObjectStore`);if("function"==typeof u){const n=s[e](...r);n.onsuccess=e=>{var r;const i=null===(r=e.target)||void 0===r?void 0:r.result;t(o?{res:n,event:e,result:i,objectStore:s,bd:this.db}:i)},n.onerror=i}else t(u)}))}getObjectStore(e="readwrite"){if(!this.db)throw new Error("No database connection available , please use IndexedDB=>open to connect");return this.db.transaction([this.storeName],e).objectStore(this.storeName)}}},497:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.func=e,this.result}run(...e){return void 0!==this.result||(this.result=this.func(...e)),this.result}}},137:function(e,t){var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{a(n.next(e))}catch(e){i(e)}}function u(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,u)}a((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.count=0,this.isCancel=!1,this.arr=[],this.limit=0,this.func=()=>({}),this.finishSResolve=()=>({})}init(e){const{arr:t=[],func:r,limit:n=6}=e||{};return t.length&&r?(this.count=0,this.isCancel=!1,this.arr=[...t],this.limit=Math.min(n,t.length),this.func=r,this.loop(),new Promise((e=>{this.finishSResolve=e}))):Promise.reject("arr and func is required")}loop(){return r(this,void 0,void 0,(function*(){if(!this.isCancel){if(!this.arr.length)return this.finishSResolve("finish");this.count+=1,this.count<this.limit&&this.loop(),yield this.func(this.arr.shift()),this.count>=this.limit&&this.loop(),this.count-=1}}))}cancel(){return this.isCancel=!0,Promise.resolve("cancel")}}},368:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t=0)=>{let r;return(...n)=>{r&&clearTimeout(r),r=setTimeout((()=>{e(...n)}),t)}}},456:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=t.debounce=t.queryToObject=t.objectToQuery=t.IndexedDB=t.Once=t.ComputeStore=t.PromiseQueue=void 0;var o=r(137);Object.defineProperty(t,"PromiseQueue",{enumerable:!0,get:function(){return n(o).default}});var i=r(80);Object.defineProperty(t,"ComputeStore",{enumerable:!0,get:function(){return n(i).default}});var s=r(497);Object.defineProperty(t,"Once",{enumerable:!0,get:function(){return n(s).default}});var u=r(983);Object.defineProperty(t,"IndexedDB",{enumerable:!0,get:function(){return n(u).default}});var a=r(935);Object.defineProperty(t,"objectToQuery",{enumerable:!0,get:function(){return n(a).default}});var c=r(378);Object.defineProperty(t,"queryToObject",{enumerable:!0,get:function(){return n(c).default}});var l=r(368);Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return n(l).default}});var d=r(539);Object.defineProperty(t,"throttle",{enumerable:!0,get:function(){return n(d).default}})},935:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(607);t.default=function e(t,r){if("Object"!==(0,n.dataType)(t))return"";const o=Object.keys(t);return o.reduce(((i,s,u)=>{const a=t[s];return 0!==u||r||(i+="?"),"Object"===(0,n.dataType)(a)?i+=e(a,r?`${r}[${s}]`:s):i+=r?`${r}[${s}]=${a}`:`${s}=${a}`,u!==o.length-1&&(i+="&"),i}),"")}},378:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||location.search;const t={};if("function"==typeof URLSearchParams){const r=new URLSearchParams(e);for(const[e,n]of r)t[e]=n}else{const r=e.replace("?","").split("&");for(const e of r){const[r,n]=e.split("=");t[r]=n}}return t}},539:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t=0)=>{let r=!0;return(...n)=>{r&&(r=!1,e(...n),setTimeout((()=>{r=!0}),t))}}},37:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(607);t.default=(e,t,r={})=>{const{interceptors:o,crossOrigin:i="Anonymous",zoom:s=1,debug:u=!1}=r;return new Promise(((r,a)=>{try{const c=null==e?void 0:e.getContext("2d"),l=e.width,d=e.height;let f=1;const p=new Image;p.crossOrigin=i,p.src=t,p.onload=()=>{let e=p.width,t=p.height;f=l/d>e/t?d/t:l/e,e=e*f*s,t=t*f*s,u&&console.log({cW:l,cH:d,scale:f,zoom:s,originIW:p.width,originIH:p.height,iW:e,iH:t});const[i,b,m,h]=[(l-e)/2,(d-t)/2,e,t];if("function"!=typeof o)null==c||c.drawImage(p,i,b,m,h),r("success");else{const e=o();if("Promise"!==(0,n.dataType)(e))throw a(new Error("interceptors must be Promise"));e.then((e=>{e?(null==c||c.drawImage(p,i,b,m,h),r("success")):a("cancel")}),(()=>{a("cancel")}))}},p.onerror=e=>{a(e)}}catch(e){a(e)}}))}},176:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.canvasDrawImage=void 0;var o=r(37);Object.defineProperty(t,"canvasDrawImage",{enumerable:!0,get:function(){return n(o).default}})},814:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t,r={})=>{var n;if(t&&(t=`script${t}`,document.querySelector(`#${t}`)))return;const o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",e),t&&o.setAttribute("id",t);for(const[e,t]of Object.entries(r))o.setAttribute(e,t);null===(n=document.querySelector("head"))||void 0===n||n.appendChild(o)}},826:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.importScript=void 0;var o=r(814);Object.defineProperty(t,"importScript",{enumerable:!0,get:function(){return n(o).default}})},607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.httpRequest=t.importScript=t.isDICM=t.arrayBufferToJson=t.canvasDrawImage=t.dataType=t.env=t.isCanvasBlank=t.isNull=t.throttle=t.debounce=t.arraysLaminated=t.queryToObject=t.objectToQuery=t.IndexedDB=t.Once=t.ComputeStore=t.PromiseQueue=t.version=void 0;const n=r(456);Object.defineProperty(t,"PromiseQueue",{enumerable:!0,get:function(){return n.PromiseQueue}}),Object.defineProperty(t,"ComputeStore",{enumerable:!0,get:function(){return n.ComputeStore}}),Object.defineProperty(t,"Once",{enumerable:!0,get:function(){return n.Once}}),Object.defineProperty(t,"IndexedDB",{enumerable:!0,get:function(){return n.IndexedDB}}),Object.defineProperty(t,"objectToQuery",{enumerable:!0,get:function(){return n.objectToQuery}}),Object.defineProperty(t,"queryToObject",{enumerable:!0,get:function(){return n.queryToObject}}),Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return n.debounce}}),Object.defineProperty(t,"throttle",{enumerable:!0,get:function(){return n.throttle}});const o=r(114);Object.defineProperty(t,"arraysLaminated",{enumerable:!0,get:function(){return o.arraysLaminated}});const i=r(693);Object.defineProperty(t,"isNull",{enumerable:!0,get:function(){return i.isNull}}),Object.defineProperty(t,"isCanvasBlank",{enumerable:!0,get:function(){return i.isCanvasBlank}}),Object.defineProperty(t,"env",{enumerable:!0,get:function(){return i.env}}),Object.defineProperty(t,"dataType",{enumerable:!0,get:function(){return i.dataType}});const s=r(176);Object.defineProperty(t,"canvasDrawImage",{enumerable:!0,get:function(){return s.canvasDrawImage}});const u=r(415);Object.defineProperty(t,"arrayBufferToJson",{enumerable:!0,get:function(){return u.arrayBufferToJson}}),Object.defineProperty(t,"isDICM",{enumerable:!0,get:function(){return u.isDICM}});const a=r(826);Object.defineProperty(t,"importScript",{enumerable:!0,get:function(){return a.importScript}});const c=r(855);Object.defineProperty(t,"httpRequest",{enumerable:!0,get:function(){return c.httpRequest}});const l=r(147);Object.defineProperty(t,"version",{enumerable:!0,get:function(){return l.version}}),t.default={version:l.version,PromiseQueue:n.PromiseQueue,ComputeStore:n.ComputeStore,Once:n.Once,IndexedDB:n.IndexedDB,objectToQuery:n.objectToQuery,queryToObject:n.queryToObject,arraysLaminated:o.arraysLaminated,debounce:n.debounce,throttle:n.throttle,isNull:i.isNull,isCanvasBlank:i.isCanvasBlank,env:i.env,dataType:i.dataType,canvasDrawImage:s.canvasDrawImage,arrayBufferToJson:u.arrayBufferToJson,isDICM:u.isDICM,importScript:a.importScript,httpRequest:c.httpRequest}},363:function(e,t){var r=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t={},n)=>new Promise(((o,i)=>{const s=new XMLHttpRequest;"function"==typeof n&&n(s),s.onreadystatechange=()=>{const{status:e,readyState:t}=s;if(0!==t&&1!==t)return 200!==e?i(s):4===t?o(s):void 0},s.onerror=()=>{i(s)};const{method:u="GET",async:a=!0,username:c,password:l,send:d,open:f}=t,p=r(t,["method","async","username","password","send","open"]);f&&console.log(new Error("don't config open ,please configure async、username、password")),s.open(u,e,a,c,l);for(const[e,t]of Object.entries(p)){if(!(e in s))return i(`${e} is undefined, reference resources: https://www.w3school.com.cn/xmldom/dom_http.asp`);if("function"==typeof s[e]){const{args:r}=t;r&&r.constructor===Array?s[e](...t):s[e](t)}else s[e]=t}s.send(d)}))},855:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.httpRequest=void 0;var o=r(363);Object.defineProperty(t,"httpRequest",{enumerable:!0,get:function(){return n(o).default}})},185:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const r=typeof e,{lowercase:n=!1}=t||{};if("object"===r){const t=Object.prototype.toString.call(e).slice(8,-1);return n?t.toLowerCase():t}return r}},865:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const{userAgent:r,platform:n}=navigator;return e=e||r,{isWin:(t=t||n).includes("Win"),isMac:t.includes("Mac"),isLinux:!!t.match(/Linux|X11/i),isIpad:!!e.match(/iPad/i),isMobile:!!e.match(/mobile|phone/i),isAndroid:!!e.match(/android/i),IsIphone:!!e.match(/iphone/i),isWM:!!e.match(/windows mobile/i),isWeChat:!!e.match(/MicroMessenger/i)}}},693:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.dataType=t.env=t.isCanvasBlank=t.isNull=void 0;var o=r(123);Object.defineProperty(t,"isNull",{enumerable:!0,get:function(){return n(o).default}});var i=r(41);Object.defineProperty(t,"isCanvasBlank",{enumerable:!0,get:function(){return n(i).default}});var s=r(865);Object.defineProperty(t,"env",{enumerable:!0,get:function(){return n(s).default}});var u=r(185);Object.defineProperty(t,"dataType",{enumerable:!0,get:function(){return n(u).default}})},41:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>{const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,e.toDataURL()==t.toDataURL()}},123:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>[void 0,'""','" "',"null","[]","{}"].includes(JSON.stringify(e))},147:e=>{e.exports=JSON.parse('{"name":"simple2k13","version":"0.0.12-4","description":"some simple functions","main":"dist/simple.min.js","types":"dist/index.d.ts","scripts":{"test":"jest","test:watch":"jest --watch","test:staged":"jest --bail --findRelatedTests","start":"webpack --env development --node-env development","build":"webpack --env production --node-env production --progress && tsc","prepare":"is-ci || husky install","lint":"eslint ./src --ext .js,.tsx,.ts","lint:fix":"eslint ./src --ext .js,.tsx,.ts --fix","lint:staged":"lint-staged","publish:patch":"npm run lint:staged && npm version patch && npm run build && npm publish","publish:prerelease":"npm run lint:staged && npm version prerelease && npm run build && npm publish"},"lint-staged":{"src/**/*.{js,ts,tsx}":["eslint","jest --bail --findRelatedTests"]},"repository":{"type":"git","url":"https://github.com/npm-for-cw/simple2k13"},"keywords":["functions","simple","simple2k13","js","cw"],"author":"cw<cw2k13as@gmail.com>","license":"LGPL-3.0","homepage":"https://github.com/npm-for-cw/simple2k13","devDependencies":{"@babel/core":"^7.18.10","@babel/preset-env":"^7.18.10","@babel/preset-typescript":"^7.18.6","@commitlint/cli":"^17.1.1","@commitlint/config-conventional":"^17.1.0","@types/jest":"^28.1.6","@types/node":"^18.7.2","@types/webpack":"^5.28.0","@typescript-eslint/eslint-plugin":"^5.37.0","@typescript-eslint/parser":"^5.36.2","babel-jest":"^28.1.3","eslint":"^8.0.1","eslint-plugin-import":"^2.25.2","eslint-plugin-n":"^15.0.0","eslint-plugin-promise":"^6.0.0","fake-indexeddb":"^4.0.0","husky":"^8.0.0","is-ci":"^3.0.1","jest":"^28.1.3","jest-canvas-mock":"^2.4.0","jest-environment-jsdom":"^28.1.3","lint-staged":"^13.0.3","pinst":"^3.0.0","text-encoding":"^0.7.0","ts-jest":"^28.0.7","ts-loader":"^9.3.1","ts-node":"^10.9.1","tslint":"^6.1.3","typescript":"^4.7.4","webpack":"^5.74.0","webpack-cli":"^4.10.0"},"dependencies":{}}')}},t={};return function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}(607)})()));