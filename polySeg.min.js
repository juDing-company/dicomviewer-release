!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("polySeg",[],e):"object"==typeof exports?exports.polySeg=e():t.polySeg=e()}("undefined"!=typeof self?self:this,(()=>(()=>{var t={41:(t,e,n)=>{"use strict";var r=n(655),o=n(8068),a=n(9675),i=n(5795);t.exports=function(t,e,n){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new a("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new a("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new a("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new a("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new a("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new a("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,u=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],f=!!i&&i(t,e);if(r)r(t,e,{configurable:null===c&&f?f.configurable:!c,enumerable:null===s&&f?f.enumerable:!s,value:n,writable:null===u&&f?f.writable:!u});else{if(!l&&(s||u||c))throw new o("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=n}}},8452:(t,e,n)=>{"use strict";var r=n(1189),o="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),a=Object.prototype.toString,i=Array.prototype.concat,s=n(41),u=n(592)(),c=function(t,e,n,r){if(e in t)if(!0===r){if(t[e]===n)return}else if("function"!=typeof(o=r)||"[object Function]"!==a.call(o)||!r())return;var o;u?s(t,e,n,!0):s(t,e,n)},l=function(t,e){var n=arguments.length>2?arguments[2]:{},a=r(e);o&&(a=i.call(a,Object.getOwnPropertySymbols(e)));for(var s=0;s<a.length;s+=1)c(t,a[s],e[a[s]],n[a[s]])};l.supportsDescriptors=!!u,t.exports=l},655:(t,e,n)=>{"use strict";var r=n(453)("%Object.defineProperty%",!0)||!1;if(r)try{r({},"a",{value:1})}catch(t){r=!1}t.exports=r},1237:t=>{"use strict";t.exports=EvalError},9383:t=>{"use strict";t.exports=Error},9290:t=>{"use strict";t.exports=RangeError},9538:t=>{"use strict";t.exports=ReferenceError},8068:t=>{"use strict";t.exports=SyntaxError},9675:t=>{"use strict";t.exports=TypeError},5345:t=>{"use strict";t.exports=URIError},2017:t=>{"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,o,a;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(o=r;0!=o--;)if(!t(e[o],n[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(a=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,a[o]))return!1;for(o=r;0!=o--;){var i=a[o];if(!t(e[i],n[i]))return!1}return!0}return e!=e&&n!=n}},9353:t=>{"use strict";var e=Object.prototype.toString,n=Math.max,r=function(t,e){for(var n=[],r=0;r<t.length;r+=1)n[r]=t[r];for(var o=0;o<e.length;o+=1)n[o+t.length]=e[o];return n};t.exports=function(t){var o=this;if("function"!=typeof o||"[object Function]"!==e.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var a,i=function(t,e){for(var n=[],r=e||0,o=0;r<t.length;r+=1,o+=1)n[o]=t[r];return n}(arguments,1),s=n(0,o.length-i.length),u=[],c=0;c<s;c++)u[c]="$"+c;if(a=Function("binder","return function ("+function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n}(u,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof a){var e=o.apply(this,r(i,arguments));return Object(e)===e?e:this}return o.apply(t,r(i,arguments))})),o.prototype){var l=function(){};l.prototype=o.prototype,a.prototype=new l,l.prototype=null}return a}},6743:(t,e,n)=>{"use strict";var r=n(9353);t.exports=Function.prototype.bind||r},453:(t,e,n)=>{"use strict";var r,o=n(9383),a=n(1237),i=n(9290),s=n(9538),u=n(8068),c=n(9675),l=n(5345),f=Function,d=function(t){try{return f('"use strict"; return ('+t+").constructor;")()}catch(t){}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch(t){p=null}var h=function(){throw new c},g=p?function(){try{return h}catch(t){try{return p(arguments,"callee").get}catch(t){return h}}}():h,y=n(4039)(),m=n(24)(),v=Object.getPrototypeOf||(m?function(t){return t.__proto__}:null),b={},A="undefined"!=typeof Uint8Array&&v?v(Uint8Array):r,M={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":y&&v?v([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":a,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":f,"%GeneratorFunction%":b,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":y&&v?v(v([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&y&&v?v((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":i,"%ReferenceError%":s,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&y&&v?v((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":y&&v?v(""[Symbol.iterator]()):r,"%Symbol%":y?Symbol:r,"%SyntaxError%":u,"%ThrowTypeError%":g,"%TypedArray%":A,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":l,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet};if(v)try{null.error}catch(t){var T=v(v(t));M["%Error.prototype%"]=T}var w=function t(e){var n;if("%AsyncFunction%"===e)n=d("async function () {}");else if("%GeneratorFunction%"===e)n=d("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=d("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&v&&(n=v(o.prototype))}return M[e]=n,n},I={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x=n(6743),E=n(9957),O=x.call(Function.call,Array.prototype.concat),P=x.call(Function.apply,Array.prototype.splice),_=x.call(Function.call,String.prototype.replace),C=x.call(Function.call,String.prototype.slice),S=x.call(Function.call,RegExp.prototype.exec),D=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,N=/\\(\\)?/g,k=function(t,e){var n,r=t;if(E(I,r)&&(r="%"+(n=I[r])[0]+"%"),E(M,r)){var o=M[r];if(o===b&&(o=w(r)),void 0===o&&!e)throw new c("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new u("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new c('"allowMissing" argument must be a boolean');if(null===S(/^%?[^%]*%?$/,t))throw new u("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(t){var e=C(t,0,1),n=C(t,-1);if("%"===e&&"%"!==n)throw new u("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new u("invalid intrinsic syntax, expected opening `%`");var r=[];return _(t,D,(function(t,e,n,o){r[r.length]=n?_(o,N,"$1"):e||t})),r}(t),r=n.length>0?n[0]:"",o=k("%"+r+"%",e),a=o.name,i=o.value,s=!1,l=o.alias;l&&(r=l[0],P(n,O([0,1],l)));for(var f=1,d=!0;f<n.length;f+=1){var h=n[f],g=C(h,0,1),y=C(h,-1);if(('"'===g||"'"===g||"`"===g||'"'===y||"'"===y||"`"===y)&&g!==y)throw new u("property names with quotes must have matching quotes");if("constructor"!==h&&d||(s=!0),E(M,a="%"+(r+="."+h)+"%"))i=M[a];else if(null!=i){if(!(h in i)){if(!e)throw new c("base intrinsic for "+t+" exists, but the property is not available.");return}if(p&&f+1>=n.length){var m=p(i,h);i=(d=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:i[h]}else d=E(i,h),i=i[h];d&&!s&&(M[a]=i)}}return i}},114:function(t,e){
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.3

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
!function(t){"use strict";var e=1e-6,n="undefined"!=typeof Float32Array?Float32Array:Array,r=Math.random,o=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var a=Object.freeze({__proto__:null,EPSILON:e,get ARRAY_TYPE(){return n},RANDOM:r,setMatrixArrayType:function(t){n=t},toRadian:function(t){return t*o},equals:function(t,n){return Math.abs(t-n)<=e*Math.max(1,Math.abs(t),Math.abs(n))}});function i(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*s+a*u,t[1]=o*s+i*u,t[2]=r*c+a*l,t[3]=o*c+i*l,t}function s(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}var u=i,c=s,l=Object.freeze({__proto__:null,create:function(){var t=new n(4);return n!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},clone:function(t){var e=new n(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},fromValues:function(t,e,r,o){var a=new n(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=o,a},set:function(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t},transpose:function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},invert:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*a-o*r;return i?(i=1/i,t[0]=a*i,t[1]=-r*i,t[2]=-o*i,t[3]=n*i,t):null},adjoint:function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},determinant:function(t){return t[0]*t[3]-t[2]*t[1]},multiply:i,rotate:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=o*u+i*s,t[2]=r*-s+a*u,t[3]=o*-s+i*u,t},scale:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=o*s,t[2]=a*u,t[3]=i*u,t},fromRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},str:function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3])},LDU:function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},subtract:s,exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},equals:function(t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=n[0],u=n[1],c=n[2],l=n[3];return Math.abs(r-s)<=e*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-u)<=e*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-c)<=e*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-l)<=e*Math.max(1,Math.abs(i),Math.abs(l))},multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},mul:u,sub:c});function f(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=n[0],l=n[1],f=n[2],d=n[3],p=n[4],h=n[5];return t[0]=r*c+a*l,t[1]=o*c+i*l,t[2]=r*f+a*d,t[3]=o*f+i*d,t[4]=r*p+a*h+s,t[5]=o*p+i*h+u,t}function d(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}var p=f,h=d,g=Object.freeze({__proto__:null,create:function(){var t=new n(6);return n!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},clone:function(t){var e=new n(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},fromValues:function(t,e,r,o,a,i){var s=new n(6);return s[0]=t,s[1]=e,s[2]=r,s[3]=o,s[4]=a,s[5]=i,s},set:function(t,e,n,r,o,a,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t},invert:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=n*a-r*o;return u?(u=1/u,t[0]=a*u,t[1]=-r*u,t[2]=-o*u,t[3]=n*u,t[4]=(o*s-a*i)*u,t[5]=(r*i-n*s)*u,t):null},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:f,rotate:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*c,t[1]=o*l+i*c,t[2]=r*-c+a*l,t[3]=o*-c+i*l,t[4]=s,t[5]=u,t},scale:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=o*c,t[2]=a*l,t[3]=i*l,t[4]=s,t[5]=u,t},translate:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=r*c+a*l+s,t[5]=o*c+i*l+u,t},fromRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},str:function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},subtract:d,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},equals:function(t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],u=t[5],c=n[0],l=n[1],f=n[2],d=n[3],p=n[4],h=n[5];return Math.abs(r-c)<=e*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-l)<=e*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-f)<=e*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-d)<=e*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-p)<=e*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(u-h)<=e*Math.max(1,Math.abs(u),Math.abs(h))},mul:p,sub:h});function y(){var t=new n(9);return n!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function m(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=n[0],p=n[1],h=n[2],g=n[3],y=n[4],m=n[5],v=n[6],b=n[7],A=n[8];return t[0]=d*r+p*i+h*c,t[1]=d*o+p*s+h*l,t[2]=d*a+p*u+h*f,t[3]=g*r+y*i+m*c,t[4]=g*o+y*s+m*l,t[5]=g*a+y*u+m*f,t[6]=v*r+b*i+A*c,t[7]=v*o+b*s+A*l,t[8]=v*a+b*u+A*f,t}function v(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}var b=m,A=v,M=Object.freeze({__proto__:null,create:y,fromMat4:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},clone:function(t){var e=new n(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromValues:function(t,e,r,o,a,i,s,u,c){var l=new n(9);return l[0]=t,l[1]=e,l[2]=r,l[3]=o,l[4]=a,l[5]=i,l[6]=s,l[7]=u,l[8]=c,l},set:function(t,e,n,r,o,a,i,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=s,t[7]=u,t[8]=c,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,e){if(t===e){var n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},invert:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=l*i-s*c,d=-l*a+s*u,p=c*a-i*u,h=n*f+r*d+o*p;return h?(h=1/h,t[0]=f*h,t[1]=(-l*r+o*c)*h,t[2]=(s*r-o*i)*h,t[3]=d*h,t[4]=(l*n-o*u)*h,t[5]=(-s*n+o*a)*h,t[6]=p*h,t[7]=(-c*n+r*u)*h,t[8]=(i*n-r*a)*h,t):null},adjoint:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=i*l-s*c,t[1]=o*c-r*l,t[2]=r*s-o*i,t[3]=s*u-a*l,t[4]=n*l-o*u,t[5]=o*a-n*s,t[6]=a*c-i*u,t[7]=r*u-n*c,t[8]=n*i-r*a,t},determinant:function(t){var e=t[0],n=t[1],r=t[2],o=t[3],a=t[4],i=t[5],s=t[6],u=t[7],c=t[8];return e*(c*a-i*u)+n*(-c*o+i*s)+r*(u*o-a*s)},multiply:m,translate:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=n[0],p=n[1];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=s,t[5]=u,t[6]=d*r+p*i+c,t[7]=d*o+p*s+l,t[8]=d*a+p*u+f,t},rotate:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=Math.sin(n),p=Math.cos(n);return t[0]=p*r+d*i,t[1]=p*o+d*s,t[2]=p*a+d*u,t[3]=p*i-d*r,t[4]=p*s-d*o,t[5]=p*u-d*a,t[6]=c,t[7]=l,t[8]=f,t},scale:function(t,e,n){var r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},fromRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat2d:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},fromQuat:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n+n,s=r+r,u=o+o,c=n*i,l=r*i,f=r*s,d=o*i,p=o*s,h=o*u,g=a*i,y=a*s,m=a*u;return t[0]=1-f-h,t[3]=l-m,t[6]=d+y,t[1]=l+m,t[4]=1-c-h,t[7]=p-g,t[2]=d-y,t[5]=p+g,t[8]=1-c-f,t},normalFromMat4:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],p=e[11],h=e[12],g=e[13],y=e[14],m=e[15],v=n*s-r*i,b=n*u-o*i,A=n*c-a*i,M=r*u-o*s,T=r*c-a*s,w=o*c-a*u,I=l*g-f*h,x=l*y-d*h,E=l*m-p*h,O=f*y-d*g,P=f*m-p*g,_=d*m-p*y,C=v*_-b*P+A*O+M*E-T*x+w*I;return C?(C=1/C,t[0]=(s*_-u*P+c*O)*C,t[1]=(u*E-i*_-c*x)*C,t[2]=(i*P-s*E+c*I)*C,t[3]=(o*P-r*_-a*O)*C,t[4]=(n*_-o*E+a*x)*C,t[5]=(r*E-n*P-a*I)*C,t[6]=(g*w-y*T+m*M)*C,t[7]=(y*A-h*w-m*b)*C,t[8]=(h*T-g*A+m*v)*C,t):null},projection:function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str:function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},subtract:v,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},equals:function(t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],d=n[0],p=n[1],h=n[2],g=n[3],y=n[4],m=n[5],v=n[6],b=n[7],A=n[8];return Math.abs(r-d)<=e*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-p)<=e*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-h)<=e*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-g)<=e*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(s-y)<=e*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(u-m)<=e*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-v)<=e*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(l-b)<=e*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(f-A)<=e*Math.max(1,Math.abs(f),Math.abs(A))},mul:b,sub:A});function T(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=e[9],p=e[10],h=e[11],g=e[12],y=e[13],m=e[14],v=e[15],b=n[0],A=n[1],M=n[2],T=n[3];return t[0]=b*r+A*s+M*f+T*g,t[1]=b*o+A*u+M*d+T*y,t[2]=b*a+A*c+M*p+T*m,t[3]=b*i+A*l+M*h+T*v,b=n[4],A=n[5],M=n[6],T=n[7],t[4]=b*r+A*s+M*f+T*g,t[5]=b*o+A*u+M*d+T*y,t[6]=b*a+A*c+M*p+T*m,t[7]=b*i+A*l+M*h+T*v,b=n[8],A=n[9],M=n[10],T=n[11],t[8]=b*r+A*s+M*f+T*g,t[9]=b*o+A*u+M*d+T*y,t[10]=b*a+A*c+M*p+T*m,t[11]=b*i+A*l+M*h+T*v,b=n[12],A=n[13],M=n[14],T=n[15],t[12]=b*r+A*s+M*f+T*g,t[13]=b*o+A*u+M*d+T*y,t[14]=b*a+A*c+M*p+T*m,t[15]=b*i+A*l+M*h+T*v,t}function I(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=r+r,u=o+o,c=a+a,l=r*s,f=r*u,d=r*c,p=o*u,h=o*c,g=a*c,y=i*s,m=i*u,v=i*c;return t[0]=1-(p+g),t[1]=f+v,t[2]=d-m,t[3]=0,t[4]=f-v,t[5]=1-(l+g),t[6]=h+y,t[7]=0,t[8]=d+m,t[9]=h-y,t[10]=1-(l+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function x(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function E(t,e){var n=e[0],r=e[1],o=e[2],a=e[4],i=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.hypot(n,r,o),t[1]=Math.hypot(a,i,s),t[2]=Math.hypot(u,c,l),t}function O(t,e){var r=new n(3);E(r,e);var o=1/r[0],a=1/r[1],i=1/r[2],s=e[0]*o,u=e[1]*a,c=e[2]*i,l=e[4]*o,f=e[5]*a,d=e[6]*i,p=e[8]*o,h=e[9]*a,g=e[10]*i,y=s+f+g,m=0;return y>0?(m=2*Math.sqrt(y+1),t[3]=.25*m,t[0]=(d-h)/m,t[1]=(p-c)/m,t[2]=(u-l)/m):s>f&&s>g?(m=2*Math.sqrt(1+s-f-g),t[3]=(d-h)/m,t[0]=.25*m,t[1]=(u+l)/m,t[2]=(p+c)/m):f>g?(m=2*Math.sqrt(1+f-s-g),t[3]=(p-c)/m,t[0]=(u+l)/m,t[1]=.25*m,t[2]=(d+h)/m):(m=2*Math.sqrt(1+g-s-f),t[3]=(u-l)/m,t[0]=(p+c)/m,t[1]=(d+h)/m,t[2]=.25*m),t}function P(t,e,n,r,o){var a,i=1/Math.tan(e/2);return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(a=1/(r-o),t[10]=(o+r)*a,t[14]=2*o*r*a):(t[10]=-1,t[14]=-2*r),t}var _=P;function C(t,e,n,r,o,a,i){var s=1/(e-n),u=1/(r-o),c=1/(a-i);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(o+r)*u,t[14]=(i+a)*c,t[15]=1,t}var S=C;function D(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}var N=w,k=D,L=Object.freeze({__proto__:null,create:function(){var t=new n(16);return n!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},clone:function(t){var e=new n(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},fromValues:function(t,e,r,o,a,i,s,u,c,l,f,d,p,h,g,y){var m=new n(16);return m[0]=t,m[1]=e,m[2]=r,m[3]=o,m[4]=a,m[5]=i,m[6]=s,m[7]=u,m[8]=c,m[9]=l,m[10]=f,m[11]=d,m[12]=p,m[13]=h,m[14]=g,m[15]=y,m},set:function(t,e,n,r,o,a,i,s,u,c,l,f,d,p,h,g,y){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=d,t[12]=p,t[13]=h,t[14]=g,t[15]=y,t},identity:T,transpose:function(t,e){if(t===e){var n=e[1],r=e[2],o=e[3],a=e[6],i=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=o,t[13]=i,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},invert:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],p=e[11],h=e[12],g=e[13],y=e[14],m=e[15],v=n*s-r*i,b=n*u-o*i,A=n*c-a*i,M=r*u-o*s,T=r*c-a*s,w=o*c-a*u,I=l*g-f*h,x=l*y-d*h,E=l*m-p*h,O=f*y-d*g,P=f*m-p*g,_=d*m-p*y,C=v*_-b*P+A*O+M*E-T*x+w*I;return C?(C=1/C,t[0]=(s*_-u*P+c*O)*C,t[1]=(o*P-r*_-a*O)*C,t[2]=(g*w-y*T+m*M)*C,t[3]=(d*T-f*w-p*M)*C,t[4]=(u*E-i*_-c*x)*C,t[5]=(n*_-o*E+a*x)*C,t[6]=(y*A-h*w-m*b)*C,t[7]=(l*w-d*A+p*b)*C,t[8]=(i*P-s*E+c*I)*C,t[9]=(r*E-n*P-a*I)*C,t[10]=(h*T-g*A+m*v)*C,t[11]=(f*A-l*T-p*v)*C,t[12]=(s*x-i*O-u*I)*C,t[13]=(n*O-r*x+o*I)*C,t[14]=(g*b-h*M-y*v)*C,t[15]=(l*M-f*b+d*v)*C,t):null},adjoint:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],d=e[10],p=e[11],h=e[12],g=e[13],y=e[14],m=e[15];return t[0]=s*(d*m-p*y)-f*(u*m-c*y)+g*(u*p-c*d),t[1]=-(r*(d*m-p*y)-f*(o*m-a*y)+g*(o*p-a*d)),t[2]=r*(u*m-c*y)-s*(o*m-a*y)+g*(o*c-a*u),t[3]=-(r*(u*p-c*d)-s*(o*p-a*d)+f*(o*c-a*u)),t[4]=-(i*(d*m-p*y)-l*(u*m-c*y)+h*(u*p-c*d)),t[5]=n*(d*m-p*y)-l*(o*m-a*y)+h*(o*p-a*d),t[6]=-(n*(u*m-c*y)-i*(o*m-a*y)+h*(o*c-a*u)),t[7]=n*(u*p-c*d)-i*(o*p-a*d)+l*(o*c-a*u),t[8]=i*(f*m-p*g)-l*(s*m-c*g)+h*(s*p-c*f),t[9]=-(n*(f*m-p*g)-l*(r*m-a*g)+h*(r*p-a*f)),t[10]=n*(s*m-c*g)-i*(r*m-a*g)+h*(r*c-a*s),t[11]=-(n*(s*p-c*f)-i*(r*p-a*f)+l*(r*c-a*s)),t[12]=-(i*(f*y-d*g)-l*(s*y-u*g)+h*(s*d-u*f)),t[13]=n*(f*y-d*g)-l*(r*y-o*g)+h*(r*d-o*f),t[14]=-(n*(s*y-u*g)-i*(r*y-o*g)+h*(r*u-o*s)),t[15]=n*(s*d-u*f)-i*(r*d-o*f)+l*(r*u-o*s),t},determinant:function(t){var e=t[0],n=t[1],r=t[2],o=t[3],a=t[4],i=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],d=t[11],p=t[12],h=t[13],g=t[14],y=t[15];return(e*i-n*a)*(f*y-d*g)-(e*s-r*a)*(l*y-d*h)+(e*u-o*a)*(l*g-f*h)+(n*s-r*i)*(c*y-d*p)-(n*u-o*i)*(c*g-f*p)+(r*u-o*s)*(c*h-l*p)},multiply:w,translate:function(t,e,n){var r,o,a,i,s,u,c,l,f,d,p,h,g=n[0],y=n[1],m=n[2];return e===t?(t[12]=e[0]*g+e[4]*y+e[8]*m+e[12],t[13]=e[1]*g+e[5]*y+e[9]*m+e[13],t[14]=e[2]*g+e[6]*y+e[10]*m+e[14],t[15]=e[3]*g+e[7]*y+e[11]*m+e[15]):(r=e[0],o=e[1],a=e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],d=e[9],p=e[10],h=e[11],t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=d,t[10]=p,t[11]=h,t[12]=r*g+s*y+f*m+e[12],t[13]=o*g+u*y+d*m+e[13],t[14]=a*g+c*y+p*m+e[14],t[15]=i*g+l*y+h*m+e[15]),t},scale:function(t,e,n){var r=n[0],o=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},rotate:function(t,n,r,o){var a,i,s,u,c,l,f,d,p,h,g,y,m,v,b,A,M,T,w,I,x,E,O,P,_=o[0],C=o[1],S=o[2],D=Math.hypot(_,C,S);return D<e?null:(_*=D=1/D,C*=D,S*=D,a=Math.sin(r),s=1-(i=Math.cos(r)),u=n[0],c=n[1],l=n[2],f=n[3],d=n[4],p=n[5],h=n[6],g=n[7],y=n[8],m=n[9],v=n[10],b=n[11],A=_*_*s+i,M=C*_*s+S*a,T=S*_*s-C*a,w=_*C*s-S*a,I=C*C*s+i,x=S*C*s+_*a,E=_*S*s+C*a,O=C*S*s-_*a,P=S*S*s+i,t[0]=u*A+d*M+y*T,t[1]=c*A+p*M+m*T,t[2]=l*A+h*M+v*T,t[3]=f*A+g*M+b*T,t[4]=u*w+d*I+y*x,t[5]=c*w+p*I+m*x,t[6]=l*w+h*I+v*x,t[7]=f*w+g*I+b*x,t[8]=u*E+d*O+y*P,t[9]=c*E+p*O+m*P,t[10]=l*E+h*O+v*P,t[11]=f*E+g*O+b*P,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)},rotateX:function(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[4],i=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*o+c*r,t[5]=i*o+l*r,t[6]=s*o+f*r,t[7]=u*o+d*r,t[8]=c*o-a*r,t[9]=l*o-i*r,t[10]=f*o-s*r,t[11]=d*o-u*r,t},rotateY:function(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[0],i=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*o-c*r,t[1]=i*o-l*r,t[2]=s*o-f*r,t[3]=u*o-d*r,t[8]=a*r+c*o,t[9]=i*r+l*o,t[10]=s*r+f*o,t[11]=u*r+d*o,t},rotateZ:function(t,e,n){var r=Math.sin(n),o=Math.cos(n),a=e[0],i=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*o+c*r,t[1]=i*o+l*r,t[2]=s*o+f*r,t[3]=u*o+d*r,t[4]=c*o-a*r,t[5]=l*o-i*r,t[6]=f*o-s*r,t[7]=d*o-u*r,t},fromTranslation:function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},fromScaling:function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:function(t,n,r){var o,a,i,s=r[0],u=r[1],c=r[2],l=Math.hypot(s,u,c);return l<e?null:(s*=l=1/l,u*=l,c*=l,o=Math.sin(n),i=1-(a=Math.cos(n)),t[0]=s*s*i+a,t[1]=u*s*i+c*o,t[2]=c*s*i-u*o,t[3]=0,t[4]=s*u*i-c*o,t[5]=u*u*i+a,t[6]=c*u*i+s*o,t[7]=0,t[8]=s*c*i+u*o,t[9]=u*c*i-s*o,t[10]=c*c*i+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:I,fromQuat2:function(t,e){var r=new n(3),o=-e[0],a=-e[1],i=-e[2],s=e[3],u=e[4],c=e[5],l=e[6],f=e[7],d=o*o+a*a+i*i+s*s;return d>0?(r[0]=2*(u*s+f*o+c*i-l*a)/d,r[1]=2*(c*s+f*a+l*o-u*i)/d,r[2]=2*(l*s+f*i+u*a-c*o)/d):(r[0]=2*(u*s+f*o+c*i-l*a),r[1]=2*(c*s+f*a+l*o-u*i),r[2]=2*(l*s+f*i+u*a-c*o)),I(t,e,r),t},getTranslation:x,getScaling:E,getRotation:O,fromRotationTranslationScale:function(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=e[3],u=o+o,c=a+a,l=i+i,f=o*u,d=o*c,p=o*l,h=a*c,g=a*l,y=i*l,m=s*u,v=s*c,b=s*l,A=r[0],M=r[1],T=r[2];return t[0]=(1-(h+y))*A,t[1]=(d+b)*A,t[2]=(p-v)*A,t[3]=0,t[4]=(d-b)*M,t[5]=(1-(f+y))*M,t[6]=(g+m)*M,t[7]=0,t[8]=(p+v)*T,t[9]=(g-m)*T,t[10]=(1-(f+h))*T,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,e,n,r,o){var a=e[0],i=e[1],s=e[2],u=e[3],c=a+a,l=i+i,f=s+s,d=a*c,p=a*l,h=a*f,g=i*l,y=i*f,m=s*f,v=u*c,b=u*l,A=u*f,M=r[0],T=r[1],w=r[2],I=o[0],x=o[1],E=o[2],O=(1-(g+m))*M,P=(p+A)*M,_=(h-b)*M,C=(p-A)*T,S=(1-(d+m))*T,D=(y+v)*T,N=(h+b)*w,k=(y-v)*w,L=(1-(d+g))*w;return t[0]=O,t[1]=P,t[2]=_,t[3]=0,t[4]=C,t[5]=S,t[6]=D,t[7]=0,t[8]=N,t[9]=k,t[10]=L,t[11]=0,t[12]=n[0]+I-(O*I+C*x+N*E),t[13]=n[1]+x-(P*I+S*x+k*E),t[14]=n[2]+E-(_*I+D*x+L*E),t[15]=1,t},fromQuat:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n+n,s=r+r,u=o+o,c=n*i,l=r*i,f=r*s,d=o*i,p=o*s,h=o*u,g=a*i,y=a*s,m=a*u;return t[0]=1-f-h,t[1]=l+m,t[2]=d-y,t[3]=0,t[4]=l-m,t[5]=1-c-h,t[6]=p+g,t[7]=0,t[8]=d+y,t[9]=p-g,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,e,n,r,o,a,i){var s=1/(n-e),u=1/(o-r),c=1/(a-i);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(o+r)*u,t[10]=(i+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*a*2*c,t[15]=0,t},perspectiveNO:P,perspective:_,perspectiveZO:function(t,e,n,r,o){var a,i=1/Math.tan(e/2);return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(a=1/(r-o),t[10]=o*a,t[14]=o*r*a):(t[10]=-1,t[14]=-r),t},perspectiveFromFieldOfView:function(t,e,n,r){var o=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(i+s),c=2/(o+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-s)*u*.5,t[9]=(o-a)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},orthoNO:C,ortho:S,orthoZO:function(t,e,n,r,o,a,i){var s=1/(e-n),u=1/(r-o),c=1/(a-i);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+n)*s,t[13]=(o+r)*u,t[14]=a*c,t[15]=1,t},lookAt:function(t,n,r,o){var a,i,s,u,c,l,f,d,p,h,g=n[0],y=n[1],m=n[2],v=o[0],b=o[1],A=o[2],M=r[0],w=r[1],I=r[2];return Math.abs(g-M)<e&&Math.abs(y-w)<e&&Math.abs(m-I)<e?T(t):(f=g-M,d=y-w,p=m-I,a=b*(p*=h=1/Math.hypot(f,d,p))-A*(d*=h),i=A*(f*=h)-v*p,s=v*d-b*f,(h=Math.hypot(a,i,s))?(a*=h=1/h,i*=h,s*=h):(a=0,i=0,s=0),u=d*s-p*i,c=p*a-f*s,l=f*i-d*a,(h=Math.hypot(u,c,l))?(u*=h=1/h,c*=h,l*=h):(u=0,c=0,l=0),t[0]=a,t[1]=u,t[2]=f,t[3]=0,t[4]=i,t[5]=c,t[6]=d,t[7]=0,t[8]=s,t[9]=l,t[10]=p,t[11]=0,t[12]=-(a*g+i*y+s*m),t[13]=-(u*g+c*y+l*m),t[14]=-(f*g+d*y+p*m),t[15]=1,t)},targetTo:function(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=r[0],u=r[1],c=r[2],l=o-n[0],f=a-n[1],d=i-n[2],p=l*l+f*f+d*d;p>0&&(l*=p=1/Math.sqrt(p),f*=p,d*=p);var h=u*d-c*f,g=c*l-s*d,y=s*f-u*l;return(p=h*h+g*g+y*y)>0&&(h*=p=1/Math.sqrt(p),g*=p,y*=p),t[0]=h,t[1]=g,t[2]=y,t[3]=0,t[4]=f*y-d*g,t[5]=d*h-l*y,t[6]=l*g-f*h,t[7]=0,t[8]=l,t[9]=f,t[10]=d,t[11]=0,t[12]=o,t[13]=a,t[14]=i,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},subtract:D,multiplyScalar:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},multiplyScalarAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},equals:function(t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],d=t[9],p=t[10],h=t[11],g=t[12],y=t[13],m=t[14],v=t[15],b=n[0],A=n[1],M=n[2],T=n[3],w=n[4],I=n[5],x=n[6],E=n[7],O=n[8],P=n[9],_=n[10],C=n[11],S=n[12],D=n[13],N=n[14],k=n[15];return Math.abs(r-b)<=e*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-A)<=e*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(a-M)<=e*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(i-T)<=e*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(s-w)<=e*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(u-I)<=e*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(c-x)<=e*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(l-E)<=e*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(f-O)<=e*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(d-P)<=e*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-_)<=e*Math.max(1,Math.abs(p),Math.abs(_))&&Math.abs(h-C)<=e*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(g-S)<=e*Math.max(1,Math.abs(g),Math.abs(S))&&Math.abs(y-D)<=e*Math.max(1,Math.abs(y),Math.abs(D))&&Math.abs(m-N)<=e*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(v-k)<=e*Math.max(1,Math.abs(v),Math.abs(k))},mul:N,sub:k});function R(){var t=new n(3);return n!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function j(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function F(t,e,r){var o=new n(3);return o[0]=t,o[1]=e,o[2]=r,o}function V(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function U(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function z(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function B(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return Math.hypot(n,r,o)}function W(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o}function G(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function H(t,e){var n=e[0],r=e[1],o=e[2],a=n*n+r*r+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function K(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function $(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],s=n[1],u=n[2];return t[0]=o*u-a*s,t[1]=a*i-r*u,t[2]=r*s-o*i,t}var Y,q=V,X=U,Q=z,J=B,Z=W,tt=j,et=G,nt=(Y=R(),function(t,e,n,r,o,a){var i,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,i=n;i<s;i+=e)Y[0]=t[i],Y[1]=t[i+1],Y[2]=t[i+2],o(Y,Y,a),t[i]=Y[0],t[i+1]=Y[1],t[i+2]=Y[2];return t}),rt=Object.freeze({__proto__:null,create:R,clone:function(t){var e=new n(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},length:j,fromValues:F,copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},set:function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},subtract:V,multiply:U,divide:z,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},distance:B,squaredDistance:W,squaredLength:G,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},normalize:H,dot:K,cross:$,lerp:function(t,e,n,r){var o=e[0],a=e[1],i=e[2];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t[2]=i+r*(n[2]-i),t},hermite:function(t,e,n,r,o,a){var i=a*a,s=i*(2*a-3)+1,u=i*(a-2)+a,c=i*(a-1),l=i*(3-2*a);return t[0]=e[0]*s+n[0]*u+r[0]*c+o[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+o[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+o[2]*l,t},bezier:function(t,e,n,r,o,a){var i=1-a,s=i*i,u=a*a,c=s*i,l=3*a*s,f=3*u*i,d=u*a;return t[0]=e[0]*c+n[0]*l+r[0]*f+o[0]*d,t[1]=e[1]*c+n[1]*l+r[1]*f+o[1]*d,t[2]=e[2]*c+n[2]*l+r[2]*f+o[2]*d,t},random:function(t,e){e=e||1;var n=2*r()*Math.PI,o=2*r()-1,a=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=o*e,t},transformMat4:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[3]*r+n[7]*o+n[11]*a+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*o+n[8]*a+n[12])/i,t[1]=(n[1]*r+n[5]*o+n[9]*a+n[13])/i,t[2]=(n[2]*r+n[6]*o+n[10]*a+n[14])/i,t},transformMat3:function(t,e,n){var r=e[0],o=e[1],a=e[2];return t[0]=r*n[0]+o*n[3]+a*n[6],t[1]=r*n[1]+o*n[4]+a*n[7],t[2]=r*n[2]+o*n[5]+a*n[8],t},transformQuat:function(t,e,n){var r=n[0],o=n[1],a=n[2],i=n[3],s=e[0],u=e[1],c=e[2],l=o*c-a*u,f=a*s-r*c,d=r*u-o*s,p=o*d-a*f,h=a*l-r*d,g=r*f-o*l,y=2*i;return l*=y,f*=y,d*=y,p*=2,h*=2,g*=2,t[0]=s+l+p,t[1]=u+f+h,t[2]=c+d+g,t},rotateX:function(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[0],a[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),a[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},rotateY:function(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),a[1]=o[1],a[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},rotateZ:function(t,e,n,r){var o=[],a=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],a[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),a[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),a[2]=o[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},angle:function(t,e){var n=t[0],r=t[1],o=t[2],a=e[0],i=e[1],s=e[2],u=Math.sqrt(n*n+r*r+o*o)*Math.sqrt(a*a+i*i+s*s),c=u&&K(t,e)/u;return Math.acos(Math.min(Math.max(c,-1),1))},zero:function(t){return t[0]=0,t[1]=0,t[2]=0,t},str:function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},equals:function(t,n){var r=t[0],o=t[1],a=t[2],i=n[0],s=n[1],u=n[2];return Math.abs(r-i)<=e*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(o-s)<=e*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(a-u)<=e*Math.max(1,Math.abs(a),Math.abs(u))},sub:q,mul:X,div:Q,dist:J,sqrDist:Z,len:tt,sqrLen:et,forEach:nt});function ot(){var t=new n(4);return n!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function at(t){var e=new n(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function it(t,e,r,o){var a=new n(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=o,a}function st(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function ut(t,e,n,r,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t}function ct(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function lt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function ft(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function dt(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function pt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function ht(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return Math.hypot(n,r,o,a)}function gt(t,e){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2],a=e[3]-t[3];return n*n+r*r+o*o+a*a}function yt(t){var e=t[0],n=t[1],r=t[2],o=t[3];return Math.hypot(e,n,r,o)}function mt(t){var e=t[0],n=t[1],r=t[2],o=t[3];return e*e+n*n+r*r+o*o}function vt(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*n+r*r+o*o+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=n*i,t[1]=r*i,t[2]=o*i,t[3]=a*i,t}function bt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function At(t,e,n,r){var o=e[0],a=e[1],i=e[2],s=e[3];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t[2]=i+r*(n[2]-i),t[3]=s+r*(n[3]-s),t}function Mt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Tt(t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=n[0],u=n[1],c=n[2],l=n[3];return Math.abs(r-s)<=e*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-u)<=e*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-c)<=e*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-l)<=e*Math.max(1,Math.abs(i),Math.abs(l))}var wt=lt,It=ft,xt=dt,Et=ht,Ot=gt,Pt=yt,_t=mt,Ct=function(){var t=ot();return function(e,n,r,o,a,i){var s,u;for(n||(n=4),r||(r=0),u=o?Math.min(o*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,i),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),St=Object.freeze({__proto__:null,create:ot,clone:at,fromValues:it,copy:st,set:ut,add:ct,subtract:lt,multiply:ft,divide:dt,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},scale:pt,scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},distance:ht,squaredDistance:gt,length:yt,squaredLength:mt,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},normalize:vt,dot:bt,cross:function(t,e,n,r){var o=n[0]*r[1]-n[1]*r[0],a=n[0]*r[2]-n[2]*r[0],i=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],l=e[0],f=e[1],d=e[2],p=e[3];return t[0]=f*c-d*u+p*s,t[1]=-l*c+d*i-p*a,t[2]=l*u-f*i+p*o,t[3]=-l*s+f*a-d*o,t},lerp:At,random:function(t,e){var n,o,a,i,s,u;e=e||1;do{s=(n=2*r()-1)*n+(o=2*r()-1)*o}while(s>=1);do{u=(a=2*r()-1)*a+(i=2*r()-1)*i}while(u>=1);var c=Math.sqrt((1-s)/u);return t[0]=e*n,t[1]=e*o,t[2]=e*a*c,t[3]=e*i*c,t},transformMat4:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3];return t[0]=n[0]*r+n[4]*o+n[8]*a+n[12]*i,t[1]=n[1]*r+n[5]*o+n[9]*a+n[13]*i,t[2]=n[2]*r+n[6]*o+n[10]*a+n[14]*i,t[3]=n[3]*r+n[7]*o+n[11]*a+n[15]*i,t},transformQuat:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*a-u*o,f=c*o+u*r-i*a,d=c*a+i*o-s*r,p=-i*r-s*o-u*a;return t[0]=l*c+p*-i+f*-u-d*-s,t[1]=f*c+p*-s+d*-i-l*-u,t[2]=d*c+p*-u+l*-s-f*-i,t[3]=e[3],t},zero:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},str:function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},exactEquals:Mt,equals:Tt,sub:wt,mul:It,div:xt,dist:Et,sqrDist:Ot,len:Pt,sqrLen:_t,forEach:Ct});function Dt(){var t=new n(4);return n!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Nt(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function kt(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+i*s+o*c-a*u,t[1]=o*l+i*u+a*s-r*c,t[2]=a*l+i*c+r*u-o*s,t[3]=i*l-r*s-o*u-a*c,t}function Lt(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=o*u+a*s,t[2]=a*u-o*s,t[3]=i*u-r*s,t}function Rt(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-a*s,t[1]=o*u+i*s,t[2]=a*u+r*s,t[3]=i*u-o*s,t}function jt(t,e,n){n*=.5;var r=e[0],o=e[1],a=e[2],i=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=o*u-r*s,t[2]=a*u+i*s,t[3]=i*u-a*s,t}function Ft(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=Math.sqrt(n*n+r*r+o*o),s=Math.exp(a),u=i>0?s*Math.sin(i)/i:0;return t[0]=n*u,t[1]=r*u,t[2]=o*u,t[3]=s*Math.cos(i),t}function Vt(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=Math.sqrt(n*n+r*r+o*o),s=i>0?Math.atan2(i,a)/i:0;return t[0]=n*s,t[1]=r*s,t[2]=o*s,t[3]=.5*Math.log(n*n+r*r+o*o+a*a),t}function Ut(t,n,r,o){var a,i,s,u,c,l=n[0],f=n[1],d=n[2],p=n[3],h=r[0],g=r[1],y=r[2],m=r[3];return(i=l*h+f*g+d*y+p*m)<0&&(i=-i,h=-h,g=-g,y=-y,m=-m),1-i>e?(a=Math.acos(i),s=Math.sin(a),u=Math.sin((1-o)*a)/s,c=Math.sin(o*a)/s):(u=1-o,c=o),t[0]=u*l+c*h,t[1]=u*f+c*g,t[2]=u*d+c*y,t[3]=u*p+c*m,t}function zt(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[3*o+o]&&(o=2);var a=(o+1)%3,i=(o+2)%3;n=Math.sqrt(e[3*o+o]-e[3*a+a]-e[3*i+i]+1),t[o]=.5*n,n=.5/n,t[3]=(e[3*a+i]-e[3*i+a])*n,t[a]=(e[3*a+o]+e[3*o+a])*n,t[i]=(e[3*i+o]+e[3*o+i])*n}return t}var Bt,Wt,Gt,Ht,Kt,$t,Yt=at,qt=it,Xt=st,Qt=ut,Jt=ct,Zt=kt,te=pt,ee=bt,ne=At,re=yt,oe=re,ae=mt,ie=ae,se=vt,ue=Mt,ce=Tt,le=(Bt=R(),Wt=F(1,0,0),Gt=F(0,1,0),function(t,e,n){var r=K(e,n);return r<-.999999?($(Bt,Wt,e),tt(Bt)<1e-6&&$(Bt,Gt,e),H(Bt,Bt),Nt(t,Bt,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):($(Bt,e,n),t[0]=Bt[0],t[1]=Bt[1],t[2]=Bt[2],t[3]=1+r,se(t,t))}),fe=(Ht=Dt(),Kt=Dt(),function(t,e,n,r,o,a){return Ut(Ht,e,o,a),Ut(Kt,n,r,a),Ut(t,Ht,Kt,2*a*(1-a)),t}),de=($t=y(),function(t,e,n,r){return $t[0]=n[0],$t[3]=n[1],$t[6]=n[2],$t[1]=r[0],$t[4]=r[1],$t[7]=r[2],$t[2]=-e[0],$t[5]=-e[1],$t[8]=-e[2],se(t,zt(t,$t))}),pe=Object.freeze({__proto__:null,create:Dt,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle:Nt,getAxisAngle:function(t,n){var r=2*Math.acos(n[3]),o=Math.sin(r/2);return o>e?(t[0]=n[0]/o,t[1]=n[1]/o,t[2]=n[2]/o):(t[0]=1,t[1]=0,t[2]=0),r},getAngle:function(t,e){var n=ee(t,e);return Math.acos(2*n*n-1)},multiply:kt,rotateX:Lt,rotateY:Rt,rotateZ:jt,calculateW:function(t,e){var n=e[0],r=e[1],o=e[2];return t[0]=n,t[1]=r,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),t},exp:Ft,ln:Vt,pow:function(t,e,n){return Vt(t,e),te(t,t,n),Ft(t,t),t},slerp:Ut,random:function(t){var e=r(),n=r(),o=r(),a=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=a*Math.sin(2*Math.PI*n),t[1]=a*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*o),t[3]=i*Math.cos(2*Math.PI*o),t},invert:function(t,e){var n=e[0],r=e[1],o=e[2],a=e[3],i=n*n+r*r+o*o+a*a,s=i?1/i:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-o*s,t[3]=a*s,t},conjugate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},fromMat3:zt,fromEuler:function(t,e,n,r){var o=.5*Math.PI/180;e*=o,n*=o,r*=o;var a=Math.sin(e),i=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=a*u*l-i*s*c,t[1]=i*s*l+a*u*c,t[2]=i*u*c-a*s*l,t[3]=i*u*l+a*s*c,t},str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},clone:Yt,fromValues:qt,copy:Xt,set:Qt,add:Jt,mul:Zt,scale:te,dot:ee,lerp:ne,length:re,len:oe,squaredLength:ae,sqrLen:ie,normalize:se,exactEquals:ue,equals:ce,rotationTo:le,sqlerp:fe,setAxes:de});function he(t,e,n){var r=.5*n[0],o=.5*n[1],a=.5*n[2],i=e[0],s=e[1],u=e[2],c=e[3];return t[0]=i,t[1]=s,t[2]=u,t[3]=c,t[4]=r*c+o*u-a*s,t[5]=o*c+a*i-r*u,t[6]=a*c+r*s-o*i,t[7]=-r*i-o*s-a*u,t}function ge(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}var ye=Xt,me=Xt;function ve(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[4],u=n[5],c=n[6],l=n[7],f=e[4],d=e[5],p=e[6],h=e[7],g=n[0],y=n[1],m=n[2],v=n[3];return t[0]=r*v+i*g+o*m-a*y,t[1]=o*v+i*y+a*g-r*m,t[2]=a*v+i*m+r*y-o*g,t[3]=i*v-r*g-o*y-a*m,t[4]=r*l+i*s+o*c-a*u+f*v+h*g+d*m-p*y,t[5]=o*l+i*u+a*s-r*c+d*v+h*y+p*g-f*m,t[6]=a*l+i*c+r*u-o*s+p*v+h*m+f*y-d*g,t[7]=i*l-r*s-o*u-a*c+h*v-f*g-d*y-p*m,t}var be=ve,Ae=ee,Me=re,Te=Me,we=ae,Ie=we,xe=Object.freeze({__proto__:null,create:function(){var t=new n(8);return n!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},clone:function(t){var e=new n(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e},fromValues:function(t,e,r,o,a,i,s,u){var c=new n(8);return c[0]=t,c[1]=e,c[2]=r,c[3]=o,c[4]=a,c[5]=i,c[6]=s,c[7]=u,c},fromRotationTranslationValues:function(t,e,r,o,a,i,s){var u=new n(8);u[0]=t,u[1]=e,u[2]=r,u[3]=o;var c=.5*a,l=.5*i,f=.5*s;return u[4]=c*o+l*r-f*e,u[5]=l*o+f*t-c*r,u[6]=f*o+c*e-l*t,u[7]=-c*t-l*e-f*r,u},fromRotationTranslation:he,fromTranslation:function(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t},fromRotation:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},fromMat4:function(t,e){var r=Dt();O(r,e);var o=new n(3);return x(o,e),he(t,r,o),t},copy:ge,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},set:function(t,e,n,r,o,a,i,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=o,t[4]=a,t[5]=i,t[6]=s,t[7]=u,t},getReal:ye,getDual:function(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t},setReal:me,setDual:function(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t},getTranslation:function(t,e){var n=e[4],r=e[5],o=e[6],a=e[7],i=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+a*i+r*u-o*s),t[1]=2*(r*c+a*s+o*i-n*u),t[2]=2*(o*c+a*u+n*s-r*i),t},translate:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],l=e[4],f=e[5],d=e[6],p=e[7];return t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=i*s+o*c-a*u+l,t[5]=i*u+a*s-r*c+f,t[6]=i*c+r*u-o*s+d,t[7]=-r*s-o*u-a*c+p,t},rotateX:function(t,e,n){var r=-e[0],o=-e[1],a=-e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=s*i+l*r+u*a-c*o,d=u*i+l*o+c*r-s*a,p=c*i+l*a+s*o-u*r,h=l*i-s*r-u*o-c*a;return Lt(t,e,n),r=t[0],o=t[1],a=t[2],i=t[3],t[4]=f*i+h*r+d*a-p*o,t[5]=d*i+h*o+p*r-f*a,t[6]=p*i+h*a+f*o-d*r,t[7]=h*i-f*r-d*o-p*a,t},rotateY:function(t,e,n){var r=-e[0],o=-e[1],a=-e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=s*i+l*r+u*a-c*o,d=u*i+l*o+c*r-s*a,p=c*i+l*a+s*o-u*r,h=l*i-s*r-u*o-c*a;return Rt(t,e,n),r=t[0],o=t[1],a=t[2],i=t[3],t[4]=f*i+h*r+d*a-p*o,t[5]=d*i+h*o+p*r-f*a,t[6]=p*i+h*a+f*o-d*r,t[7]=h*i-f*r-d*o-p*a,t},rotateZ:function(t,e,n){var r=-e[0],o=-e[1],a=-e[2],i=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=s*i+l*r+u*a-c*o,d=u*i+l*o+c*r-s*a,p=c*i+l*a+s*o-u*r,h=l*i-s*r-u*o-c*a;return jt(t,e,n),r=t[0],o=t[1],a=t[2],i=t[3],t[4]=f*i+h*r+d*a-p*o,t[5]=d*i+h*o+p*r-f*a,t[6]=p*i+h*a+f*o-d*r,t[7]=h*i-f*r-d*o-p*a,t},rotateByQuatAppend:function(t,e,n){var r=n[0],o=n[1],a=n[2],i=n[3],s=e[0],u=e[1],c=e[2],l=e[3];return t[0]=s*i+l*r+u*a-c*o,t[1]=u*i+l*o+c*r-s*a,t[2]=c*i+l*a+s*o-u*r,t[3]=l*i-s*r-u*o-c*a,s=e[4],u=e[5],c=e[6],l=e[7],t[4]=s*i+l*r+u*a-c*o,t[5]=u*i+l*o+c*r-s*a,t[6]=c*i+l*a+s*o-u*r,t[7]=l*i-s*r-u*o-c*a,t},rotateByQuatPrepend:function(t,e,n){var r=e[0],o=e[1],a=e[2],i=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+i*s+o*c-a*u,t[1]=o*l+i*u+a*s-r*c,t[2]=a*l+i*c+r*u-o*s,t[3]=i*l-r*s-o*u-a*c,s=n[4],u=n[5],c=n[6],l=n[7],t[4]=r*l+i*s+o*c-a*u,t[5]=o*l+i*u+a*s-r*c,t[6]=a*l+i*c+r*u-o*s,t[7]=i*l-r*s-o*u-a*c,t},rotateAroundAxis:function(t,n,r,o){if(Math.abs(o)<e)return ge(t,n);var a=Math.hypot(r[0],r[1],r[2]);o*=.5;var i=Math.sin(o),s=i*r[0]/a,u=i*r[1]/a,c=i*r[2]/a,l=Math.cos(o),f=n[0],d=n[1],p=n[2],h=n[3];t[0]=f*l+h*s+d*c-p*u,t[1]=d*l+h*u+p*s-f*c,t[2]=p*l+h*c+f*u-d*s,t[3]=h*l-f*s-d*u-p*c;var g=n[4],y=n[5],m=n[6],v=n[7];return t[4]=g*l+v*s+y*c-m*u,t[5]=y*l+v*u+m*s-g*c,t[6]=m*l+v*c+g*u-y*s,t[7]=v*l-g*s-y*u-m*c,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t},multiply:ve,mul:be,scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t},dot:Ae,lerp:function(t,e,n,r){var o=1-r;return Ae(e,n)<0&&(r=-r),t[0]=e[0]*o+n[0]*r,t[1]=e[1]*o+n[1]*r,t[2]=e[2]*o+n[2]*r,t[3]=e[3]*o+n[3]*r,t[4]=e[4]*o+n[4]*r,t[5]=e[5]*o+n[5]*r,t[6]=e[6]*o+n[6]*r,t[7]=e[7]*o+n[7]*r,t},invert:function(t,e){var n=we(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t},conjugate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t},length:Me,len:Te,squaredLength:we,sqrLen:Ie,normalize:function(t,e){var n=we(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,o=e[1]/n,a=e[2]/n,i=e[3]/n,s=e[4],u=e[5],c=e[6],l=e[7],f=r*s+o*u+a*c+i*l;t[0]=r,t[1]=o,t[2]=a,t[3]=i,t[4]=(s-r*f)/n,t[5]=(u-o*f)/n,t[6]=(c-a*f)/n,t[7]=(l-i*f)/n}return t},str:function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]},equals:function(t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=n[0],d=n[1],p=n[2],h=n[3],g=n[4],y=n[5],m=n[6],v=n[7];return Math.abs(r-f)<=e*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(o-d)<=e*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-p)<=e*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(i-h)<=e*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-g)<=e*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(u-y)<=e*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-m)<=e*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(l-v)<=e*Math.max(1,Math.abs(l),Math.abs(v))}});function Ee(){var t=new n(2);return n!=Float32Array&&(t[0]=0,t[1]=0),t}function Oe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function Pe(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function _e(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function Ce(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function Se(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function De(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function Ne(t){var e=t[0],n=t[1];return e*e+n*n}var ke=De,Le=Oe,Re=Pe,je=_e,Fe=Ce,Ve=Se,Ue=Ne,ze=function(){var t=Ee();return function(e,n,r,o,a,i){var s,u;for(n||(n=2),r||(r=0),u=o?Math.min(o*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],a(t,t,i),e[s]=t[0],e[s+1]=t[1];return e}}(),Be=Object.freeze({__proto__:null,create:Ee,clone:function(t){var e=new n(2);return e[0]=t[0],e[1]=t[1],e},fromValues:function(t,e){var r=new n(2);return r[0]=t,r[1]=e,r},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},set:function(t,e,n){return t[0]=e,t[1]=n,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},subtract:Oe,multiply:Pe,divide:_e,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},distance:Ce,squaredDistance:Se,length:De,squaredLength:Ne,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},normalize:function(t,e){var n=e[0],r=e[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},cross:function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},lerp:function(t,e,n,r){var o=e[0],a=e[1];return t[0]=o+r*(n[0]-o),t[1]=a+r*(n[1]-a),t},random:function(t,e){e=e||1;var n=2*r()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},transformMat2:function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t},transformMat2d:function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o+n[4],t[1]=n[1]*r+n[3]*o+n[5],t},transformMat3:function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t},transformMat4:function(t,e,n){var r=e[0],o=e[1];return t[0]=n[0]*r+n[4]*o+n[12],t[1]=n[1]*r+n[5]*o+n[13],t},rotate:function(t,e,n,r){var o=e[0]-n[0],a=e[1]-n[1],i=Math.sin(r),s=Math.cos(r);return t[0]=o*s-a*i+n[0],t[1]=o*i+a*s+n[1],t},angle:function(t,e){var n=t[0],r=t[1],o=e[0],a=e[1],i=Math.sqrt(n*n+r*r)*Math.sqrt(o*o+a*a),s=i&&(n*o+r*a)/i;return Math.acos(Math.min(Math.max(s,-1),1))},zero:function(t){return t[0]=0,t[1]=0,t},str:function(t){return"vec2("+t[0]+", "+t[1]+")"},exactEquals:function(t,e){return t[0]===e[0]&&t[1]===e[1]},equals:function(t,n){var r=t[0],o=t[1],a=n[0],i=n[1];return Math.abs(r-a)<=e*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-i)<=e*Math.max(1,Math.abs(o),Math.abs(i))},len:ke,sub:Le,mul:Re,div:je,dist:Fe,sqrDist:Ve,sqrLen:Ue,forEach:ze});t.glMatrix=a,t.mat2=l,t.mat2d=g,t.mat3=M,t.mat4=L,t.quat=pe,t.quat2=xe,t.vec2=Be,t.vec3=rt,t.vec4=St,Object.defineProperty(t,"__esModule",{value:!0})}(e)},7820:t=>{"use strict";"undefined"!=typeof self?t.exports=self:"undefined"!=typeof window?t.exports=window:t.exports=Function("return this")()},170:(t,e,n)=>{"use strict";var r=n(8452),o=n(7820),a=n(5323),i=n(6061),s=a(),u=function(){return s};r(u,{getPolyfill:a,implementation:o,shim:i}),t.exports=u},5323:(t,e,n)=>{"use strict";var r=n(7820);t.exports=function(){return"object"==typeof n.g&&n.g&&n.g.Math===Math&&n.g.Array===Array?n.g:r}},6061:(t,e,n)=>{"use strict";var r=n(8452),o=n(5323);t.exports=function(){var t=o();if(r.supportsDescriptors){var e=Object.getOwnPropertyDescriptor(t,"globalThis");e&&(!e.configurable||!e.enumerable&&e.writable&&globalThis===t)||Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else"object"==typeof globalThis&&globalThis===t||(t.globalThis=t);return t}},5795:(t,e,n)=>{"use strict";var r=n(453)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(t){r=null}t.exports=r},592:(t,e,n)=>{"use strict";var r=n(655),o=function(){return!!r};o.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(t){return!0}},t.exports=o},24:t=>{"use strict";var e={__proto__:null,foo:{}},n=Object;t.exports=function(){return{__proto__:e}.foo===e.foo&&!(e instanceof n)}},4039:(t,e,n)=>{"use strict";var r="undefined"!=typeof Symbol&&Symbol,o=n(1333);t.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&o())))}},1333:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},9957:(t,e,n)=>{"use strict";var r=Function.prototype.call,o=Object.prototype.hasOwnProperty,a=n(6743);t.exports=a.call(r,o)},8875:(t,e,n)=>{"use strict";var r;if(!Object.keys){var o=Object.prototype.hasOwnProperty,a=Object.prototype.toString,i=n(1093),s=Object.prototype.propertyIsEnumerable,u=!s.call({toString:null},"toString"),c=s.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(t){var e=t.constructor;return e&&e.prototype===t},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!d["$"+t]&&o.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{f(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===a.call(t),r=i(t),s=e&&"[object String]"===a.call(t),d=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var h=c&&n;if(s&&t.length>0&&!o.call(t,0))for(var g=0;g<t.length;++g)d.push(String(g));if(r&&t.length>0)for(var y=0;y<t.length;++y)d.push(String(y));else for(var m in t)h&&"prototype"===m||!o.call(t,m)||d.push(String(m));if(u)for(var v=function(t){if("undefined"==typeof window||!p)return f(t);try{return f(t)}catch(t){return!1}}(t),b=0;b<l.length;++b)v&&"constructor"===l[b]||!o.call(t,l[b])||d.push(l[b]);return d}}t.exports=r},1189:(t,e,n)=>{"use strict";var r=Array.prototype.slice,o=n(1093),a=Object.keys,i=a?function(t){return a(t)}:n(8875),s=Object.keys;i.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return o(t)?s(r.call(t)):s(t)})}else Object.keys=i;return Object.keys||i},t.exports=i},1093:t=>{"use strict";var e=Object.prototype.toString;t.exports=function(t){var n=e.call(t),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),r}},7391:(t,e,n)=>{var r=n(7180),o=n(3181),a=n(3031),i=n(9067),s=n(6833),u=n(3717),c=n(4801);c.alea=r,c.xor128=o,c.xorwow=a,c.xorshift7=i,c.xor4096=s,c.tychei=u,t.exports=c},7180:function(t,e,n){var r;!function(t,o,a){function i(t){var e=this,n=function(){var t=4022871197,e=function(e){e=String(e);for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)};return e}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(" "),e.s1=n(" "),e.s2=n(" "),e.s0-=n(t),e.s0<0&&(e.s0+=1),e.s1-=n(t),e.s1<0&&(e.s1+=1),e.s2-=n(t),e.s2<0&&(e.s2+=1),n=null}function s(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function u(t,e){var n=new i(t),r=e&&e.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,o))||(o.exports=r):this.alea=u}(0,t=n.nmd(t),n.amdD)},3717:function(t,e,n){var r;!function(t,o,a){function i(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,o=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^o,e.a=o-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function u(t,e){var n=new i(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,o))||(o.exports=r):this.tychei=u}(0,t=n.nmd(t),n.amdD)},3181:function(t,e,n){var r;!function(t,o,a){function i(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function u(t,e){var n=new i(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,o))||(o.exports=r):this.xor128=u}(0,t=n.nmd(t),n.amdD)},6833:function(t,e,n){var r;!function(t,o,a){function i(t){var e=this;e.next=function(){var t,n,r=e.w,o=e.X,a=e.i;return e.w=r=r+1640531527|0,n=o[a+34&127],t=o[a=a+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=o[a]=n^t,e.i=a,n+(r^r>>>16)|0},function(t,e){var n,r,o,a,i,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),o=0,a=-32;a<u;++a)e&&(r^=e.charCodeAt((a+32)%e.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,o=0==(n=s[127&a]^=r+i)?o+1:0);for(o>=128&&(s[127&(e&&e.length||0)]=-1),o=127,a=512;a>0;--a)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;t.w=i,t.X=s,t.i=o}(e,t)}function s(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function u(t,e){null==t&&(t=+new Date);var n=new i(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&(r.X&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,o))||(o.exports=r):this.xor4096=u}(0,t=n.nmd(t),n.amdD)},9067:function(t,e,n){var r;!function(t,o,a){function i(t){var e=this;e.next=function(){var t,n,r=e.x,o=e.i;return t=r[o],n=(t^=t>>>7)^t<<24,n^=(t=r[o+1&7])^t>>>10,n^=(t=r[o+3&7])^t>>>3,n^=(t=r[o+4&7])^t<<7,t=r[o+7&7],n^=(t^=t<<13)^t<<9,r[o]=n,e.i=o+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function s(t,e){return e.x=t.x.slice(),e.i=t.i,e}function u(t,e){null==t&&(t=+new Date);var n=new i(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&(r.x&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,o))||(o.exports=r):this.xorshift7=u}(0,t=n.nmd(t),n.amdD)},3031:function(t,e,n){var r;!function(t,o,a){function i(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function u(t,e){var n=new i(t),r=e&&e.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(e,n,e,o))||(o.exports=r):this.xorwow=u}(0,t=n.nmd(t),n.amdD)},4801:function(t,e,n){var r;!function(o,a,i){var s,u=256,c=i.pow(u,6),l=i.pow(2,52),f=2*l,d=u-1;function p(t,e,n){var r=[],d=m(y((e=1==e?{entropy:!0}:e||{}).entropy?[t,v(a)]:null==t?function(){try{var t;return s&&(t=s.randomBytes)?t=t(u):(t=new Uint8Array(u),(o.crypto||o.msCrypto).getRandomValues(t)),v(t)}catch(t){var e=o.navigator,n=e&&e.plugins;return[+new Date,o,n,o.screen,v(a)]}}():t,3),r),p=new h(r),b=function(){for(var t=p.g(6),e=c,n=0;t<l;)t=(t+n)*u,e*=u,n=p.g(1);for(;t>=f;)t/=2,e/=2,n>>>=1;return(t+n)/e};return b.int32=function(){return 0|p.g(4)},b.quick=function(){return p.g(4)/4294967296},b.double=b,m(v(p.S),a),(e.pass||n||function(t,e,n,r){return r&&(r.S&&g(r,p),t.state=function(){return g(p,{})}),n?(i.random=t,e):t})(b,d,"global"in e?e.global:this==i,e.state)}function h(t){var e,n=t.length,r=this,o=0,a=r.i=r.j=0,i=r.S=[];for(n||(t=[n++]);o<u;)i[o]=o++;for(o=0;o<u;o++)i[o]=i[a=d&a+t[o%n]+(e=i[o])],i[a]=e;(r.g=function(t){for(var e,n=0,o=r.i,a=r.j,i=r.S;t--;)e=i[o=d&o+1],n=n*u+i[d&(i[o]=i[a=d&a+e])+(i[a]=e)];return r.i=o,r.j=a,n})(u)}function g(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function y(t,e){var n,r=[],o=typeof t;if(e&&"object"==o)for(n in t)try{r.push(y(t[n],e-1))}catch(t){}return r.length?r:"string"==o?t:t+"\0"}function m(t,e){for(var n,r=t+"",o=0;o<r.length;)e[d&o]=d&(n^=19*e[d&o])+r.charCodeAt(o++);return v(e)}function v(t){return String.fromCharCode.apply(0,t)}if(m(i.random(),a),t.exports){t.exports=p;try{s=n(1234)}catch(t){}}else void 0===(r=function(){return p}.call(e,n,e,t))||(t.exports=r)}("undefined"!=typeof self?self:this,[],Math)},1234:()=>{}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n.p="/";var r={};return(()=>{"use strict";var t={};n.r(t),n.d(t,{EPSILON:()=>to});
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const e=Symbol("Comlink.proxy"),r=Symbol("Comlink.endpoint"),o=Symbol("Comlink.releaseProxy"),a=Symbol("Comlink.finalizer"),i=Symbol("Comlink.thrown"),s=t=>"object"==typeof t&&null!==t||"function"==typeof t,u={canHandle:t=>s(t)&&t[e],serialize(t){const{port1:e,port2:n}=new MessageChannel;return l(t,e),[n,[n]]},deserialize(t){return t.start(),y(t,[],e);var e}},c=new Map([["proxy",u],["throw",{canHandle:t=>s(t)&&i in t,serialize({value:t}){let e;return e=t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[e,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function l(t,n=globalThis,r=["*"]){n.addEventListener("message",(function o(s){if(!s||!s.data)return;if(!function(t,e){for(const n of t){if(e===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(e))return!0}return!1}(r,s.origin))return void console.warn(`Invalid origin '${s.origin}' for comlink proxy`);const{id:u,type:c,path:d}=Object.assign({path:[]},s.data),p=(s.data.argumentList||[]).map(A);let h;try{const n=d.slice(0,-1).reduce(((t,e)=>t[e]),t),r=d.reduce(((t,e)=>t[e]),t);switch(c){case"GET":h=r;break;case"SET":n[d.slice(-1)[0]]=A(s.data.value),h=!0;break;case"APPLY":h=r.apply(n,p);break;case"CONSTRUCT":h=function(t){return Object.assign(t,{[e]:!0})}(new r(...p));break;case"ENDPOINT":{const{port1:e,port2:n}=new MessageChannel;l(t,n),h=function(t,e){return v.set(t,e),t}(e,[e])}break;case"RELEASE":h=void 0;break;default:return}}catch(t){h={value:t,[i]:0}}Promise.resolve(h).catch((t=>({value:t,[i]:0}))).then((e=>{const[r,i]=b(e);n.postMessage(Object.assign(Object.assign({},r),{id:u}),i),"RELEASE"===c&&(n.removeEventListener("message",o),f(n),a in t&&"function"==typeof t[a]&&t[a]())})).catch((t=>{const[e,r]=b({value:new TypeError("Unserializable return value"),[i]:0});n.postMessage(Object.assign(Object.assign({},e),{id:u}),r)}))})),n.start&&n.start()}function f(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function d(t){if(t)throw new Error("Proxy has been released and is not useable")}function p(t){return M(t,{type:"RELEASE"}).then((()=>{f(t)}))}const h=new WeakMap,g="FinalizationRegistry"in globalThis&&new FinalizationRegistry((t=>{const e=(h.get(t)||0)-1;h.set(t,e),0===e&&p(t)}));function y(t,e=[],n=function(){}){let a=!1;const i=new Proxy(n,{get(n,r){if(d(a),r===o)return()=>{!function(t){g&&g.unregister(t)}(i),p(t),a=!0};if("then"===r){if(0===e.length)return{then:()=>i};const n=M(t,{type:"GET",path:e.map((t=>t.toString()))}).then(A);return n.then.bind(n)}return y(t,[...e,r])},set(n,r,o){d(a);const[i,s]=b(o);return M(t,{type:"SET",path:[...e,r].map((t=>t.toString())),value:i},s).then(A)},apply(n,o,i){d(a);const s=e[e.length-1];if(s===r)return M(t,{type:"ENDPOINT"}).then(A);if("bind"===s)return y(t,e.slice(0,-1));const[u,c]=m(i);return M(t,{type:"APPLY",path:e.map((t=>t.toString())),argumentList:u},c).then(A)},construct(n,r){d(a);const[o,i]=m(r);return M(t,{type:"CONSTRUCT",path:e.map((t=>t.toString())),argumentList:o},i).then(A)}});return function(t,e){const n=(h.get(e)||0)+1;h.set(e,n),g&&g.register(t,e,t)}(i,t),i}function m(t){const e=t.map(b);return[e.map((t=>t[0])),(n=e.map((t=>t[1])),Array.prototype.concat.apply([],n))];var n}const v=new WeakMap;function b(t){for(const[e,n]of c)if(n.canHandle(t)){const[r,o]=n.serialize(t);return[{type:"HANDLER",name:e,value:r},o]}return[{type:"RAW",value:t},v.get(t)||[]]}function A(t){switch(t.type){case"HANDLER":return c.get(t.name).deserialize(t.value);case"RAW":return t.value}}function M(t,e,n){return new Promise((r=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.addEventListener("message",(function e(n){n.data&&n.data.id&&n.data.id===o&&(t.removeEventListener("message",e),r(n.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:o},e),n)}))}var T=n(2017),w=n.n(T),I=n(170);const x=n.n(I)()(),E={vtkObject:()=>null};function O(t){if(null==t)return t;if(t.isA)return t;if(!t.vtkClass)return x.console&&x.console.error&&x.console.error("Invalid VTK object"),null;const e=E[t.vtkClass];if(!e)return x.console&&x.console.error&&x.console.error(`No vtk class found for Object of type ${t.vtkClass}`),null;const n={...t};Object.keys(n).forEach((t=>{n[t]&&"object"==typeof n[t]&&n[t].vtkClass&&(n[t]=O(n[t]))}));const r=e(n);return r&&r.modified&&r.modified(),r}O.register=function(t,e){E[t]=e};class P extends Array{push(){for(let t=0;t<arguments.length;t++)this.includes(arguments[t])||super.push(arguments[t]);return this.length}}let _=0;const C=Symbol("void");const S={};function D(){}["log","debug","info","warn","error","time","timeEnd","group","groupEnd"].forEach((t=>{S[t]=D})),x.console=console.hasOwnProperty("log")?console:S;const N={debug:D,error:x.console.error||D,info:x.console.info||D,log:x.console.log||D,warn:x.console.warn||D};function k(t,e){N[t]&&(N[t]=e||D)}function L(){N.log(...arguments)}function R(){N.info(...arguments)}function j(){N.debug(...arguments)}function F(){N.error(...arguments)}function V(){N.warn(...arguments)}const U={};function z(t){U[t]||(N.error(t),U[t]=!0)}const B=Object.create(null);B.Float32Array=Float32Array,B.Float64Array=Float64Array,B.Uint8Array=Uint8Array,B.Int8Array=Int8Array,B.Uint16Array=Uint16Array,B.Int16Array=Int16Array,B.Uint32Array=Uint32Array,B.Int32Array=Int32Array,B.Uint8ClampedArray=Uint8ClampedArray;try{B.BigInt64Array=BigInt64Array,B.BigUint64Array=BigUint64Array}catch{}function W(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new(B[t]||Float64Array)(...n)}function G(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return(B[t]||Float64Array).from(...n)}function H(t){return t.charAt(0).toUpperCase()+t.slice(1)}function K(t){return H("_"===t[0]?t.slice(1):t)}function $(t){return t.charAt(0).toLowerCase()+t.slice(1)}function Y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;const r=["TB","GB","MB","KB"];let o=Number(t),a="B";for(;o>n;)o/=n,a=r.pop();return`${o.toFixed(e)} ${a}`}function q(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";const n=[];let r=t;for(;r>1e3;)n.push(("000"+r%1e3).slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(e)}function X(t){Object.keys(t).forEach((e=>{Array.isArray(t[e])&&(t[e]=[].concat(t[e]))}))}function Q(t){return t&&t.isA?t.getState():t}function J(t){setTimeout(t,0)}function Z(t,e){const n=performance.now();t.finally((()=>{const t=performance.now()-n;e(t)}))}function tt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};X(e);const n=[];if(Number.isInteger(e.mtime)||(e.mtime=++_),"classHierarchy"in e){if(!(e.classHierarchy instanceof P)){const t=new P;for(let n=0;n<e.classHierarchy.length;n++)t.push(e.classHierarchy[n]);e.classHierarchy=t}}else e.classHierarchy=new P("vtkObject");function r(t){n[t]=null}return t.isDeleted=()=>!!e.deleted,t.modified=r=>{e.deleted?F("instance deleted - cannot call any method"):r&&r<t.getMTime()||(e.mtime=++_,n.forEach((e=>e&&e(t))))},t.onModified=t=>{if(e.deleted)return F("instance deleted - cannot call any method"),null;const o=n.length;return n.push(t),function(t){return Object.freeze({unsubscribe:function(){r(t)}})}(o)},t.getMTime=()=>e.mtime,t.isA=t=>{let n=e.classHierarchy.length;for(;n--;)if(e.classHierarchy[n]===t)return!0;return!1},t.getClassName=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e.classHierarchy[e.classHierarchy.length-1-t]},t.set=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!1;return Object.keys(n).forEach((i=>{const s=o?null:t[`set${H(i)}`];s&&Array.isArray(n[i])&&s.length>1?a=s(...n[i])||a:s?a=s(n[i])||a:(-1!==["mtime"].indexOf(i)||r||V(`Warning: Set value to model directly ${i}, ${n[i]}`),a=e[i]!==n[i]||a,e[i]=n[i])})),a},t.get=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return e;const o={};return n.forEach((t=>{o[t]=e[t]})),o},t.getReferenceByName=t=>e[t],t.delete=()=>{Object.keys(e).forEach((t=>delete e[t])),n.forEach(((t,e)=>r(e))),e.deleted=!0},t.getState=()=>{if(e.deleted)return null;const n={...e,vtkClass:t.getClassName()};Object.keys(n).forEach((t=>{var e;null===n[t]||void 0===n[t]||"_"===t[0]?delete n[t]:n[t].isA?n[t]=n[t].getState():Array.isArray(n[t])?n[t]=n[t].map(Q):(e=n[t],Object.values(B).some((t=>e instanceof t))&&(n[t]=Array.from(n[t])))}));const r={};return Object.keys(n).sort().forEach((t=>{r[t]=n[t]})),r.mtime&&delete r.mtime,r},t.shallowCopy=function(n){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.getClassName()!==t.getClassName())throw new Error(`Cannot ShallowCopy ${n.getClassName()} into ${t.getClassName()}`);const o=n.get(),a=Object.keys(e).sort();Object.keys(o).sort().forEach((t=>{const n=a.indexOf(t);-1===n?r&&j(`add ${t} in shallowCopy`):a.splice(n,1),e[t]=o[t]})),a.length&&r&&j(`Untouched keys: ${a.join(", ")}`),t.modified()},t.toJSON=function(){return t.getState()},t}const et={object:(t,e,n)=>function(){return{...e[n.name]}}};function nt(t,e,n){n.forEach((n=>{if("object"==typeof n){const r=et[n.type];t[`get${K(n.name)}`]=r?r(t,e,n):()=>e[n.name]}else t[`get${K(n)}`]=()=>e[n]}))}const rt={enum(t,e,n){const r=`_on${K(n.name)}Changed`;return o=>{if("string"==typeof o){if(void 0!==n.enum[o])return e[n.name]!==n.enum[o]&&(e[n.name]=n.enum[o],t.modified(),!0);throw F(`Set Enum with invalid argument ${n}, ${o}`),new RangeError("Set Enum with invalid string argument")}if("number"==typeof o){if(e[n.name]!==o){if(-1!==Object.keys(n.enum).map((t=>n.enum[t])).indexOf(o)){const a=e[n.name];return e[n.name]=o,e[r]?.(t,e,o,a),t.modified(),!0}throw F(`Set Enum outside numeric range ${n}, ${o}`),new RangeError("Set Enum outside numeric range")}return!1}throw F(`Set Enum with invalid argument (String/Number) ${n}, ${o}`),new TypeError("Set Enum with invalid argument (String/Number)")}},object(t,e,n){const r=`_on${K(n.name)}Changed`;return o=>{if(!w()(e[n.name],o)){const a=e[n.name];return e[n.name]=o,e[r]?.(t,e,o,a),t.modified(),!0}return!1}}};function ot(t){if("object"==typeof t){const e=rt[t.type];if(e)return(n,r)=>e(n,r,t);throw F(`No setter for field ${t}`),new TypeError("No setter for field")}return function(e,n){const r=`_on${K(t)}Changed`;return function(o){if(n.deleted)return F("instance deleted - cannot call any method"),!1;if(n[t]!==o){const a=n[t.name];return n[t]=o,n[r]?.(e,n,o,a),e.modified(),!0}return!1}}}function at(t,e,n){n.forEach((n=>{"object"==typeof n?t[`set${K(n.name)}`]=ot(n)(t,e):t[`set${K(n)}`]=ot(n)(t,e)}))}function it(t,e,n){nt(t,e,n),at(t,e,n)}function st(t,e,n){n.forEach((n=>{t[`get${K(n)}`]=()=>e[n]?Array.from(e[n]):e[n],t[`get${K(n)}ByReference`]=()=>e[n]}))}function ut(t,e,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;n.forEach((n=>{if(e[n]&&r&&e[n].length!==r)throw new RangeError(`Invalid initial number of values for array (${n})`);const a=`_on${K(n)}Changed`;t[`set${K(n)}`]=function(){if(e.deleted)return F("instance deleted - cannot call any method"),!1;for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];let c,l=s,f=!1;if(1===l.length&&(null==l[0]||l[0].length>=0)&&(l=l[0],f=!0),null==l)c=e[n]!==l;else{if(r&&l.length!==r){if(!(l.length<r&&void 0!==o))throw new RangeError(`Invalid number of values for array setter (${n})`);for(l=Array.from(l),f=!1;l.length<r;)l.push(o)}c=null==e[n]||e[n].length!==l.length;for(let t=0;!c&&t<l.length;++t)c=e[n][t]!==l[t];c&&f&&(l=Array.from(l))}if(c){const r=e[n.name];e[n]=l,e[a]?.(t,e,l,r),t.modified()}return c},t[`set${K(n)}From`]=t=>{const r=e[n];t.forEach(((t,e)=>{r[e]=t}))}}))}function ct(t,e,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;st(t,e,n),ut(t,e,n,r,o)}function lt(t,e,n){for(let t=0;t<n.length;t++){const r=n[t];void 0!==e[r]&&(e[`_${r}`]=e[r],delete e[r])}}function ft(t,e,n,r){function o(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.deleted?F("instance deleted - cannot call any method"):r>=e.numberOfInputs?F(`algorithm ${t.getClassName()} only has ${e.numberOfInputs} input ports. To add more input ports, use addInputData()`):(e.inputData[r]!==n||e.inputConnection[r])&&(e.inputData[r]=n,e.inputConnection[r]=null,t.modified&&t.modified())}function a(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.deleted)F("instance deleted - cannot call any method");else{if(r>=e.numberOfInputs){let n=`algorithm ${t.getClassName()} only has `;return n+=`${e.numberOfInputs}`,n+=" input ports. To add more input ports, use addInputConnection()",void F(n)}e.inputData[r]=null,e.inputConnection[r]=n}}function i(){let t=e.numberOfInputs;for(;t&&!e.inputData[t-1]&&!e.inputConnection[t-1];)t--;return t===e.numberOfInputs&&e.numberOfInputs++,t}function s(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e.deleted?(F("instance deleted - cannot call any method"),null):(t.shouldUpdate()&&t.update(),e.output[n])}if(e.inputData?e.inputData=e.inputData.map(O):e.inputData=[],e.inputConnection?e.inputConnection=e.inputConnection.map(O):e.inputConnection=[],e.output?e.output=e.output.map(O):e.output=[],e.inputArrayToProcess?e.inputArrayToProcess=e.inputArrayToProcess.map(O):e.inputArrayToProcess=[],e.numberOfInputs=n,t.shouldUpdate=()=>{const n=t.getMTime();let o=1/0,a=r;for(;a--;){if(!e.output[a]||e.output[a].isDeleted())return!0;const t=e.output[a].getMTime();if(t<n)return!0;t<o&&(o=t)}for(a=e.numberOfInputs;a--;)if(e.inputConnection[a]?.filter.shouldUpdate()||t.getInputData(a)?.getMTime()>o)return!0;return!1},e.numberOfInputs){let n=e.numberOfInputs;for(;n--;)e.inputData.push(null),e.inputConnection.push(null);t.setInputData=o,t.setInputConnection=a,t.addInputData=function(t){e.deleted?F("instance deleted - cannot call any method"):o(t,i())},t.addInputConnection=function(t){e.deleted?F("instance deleted - cannot call any method"):a(t,i())},t.getInputData=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e.inputConnection[t]&&(e.inputData[t]=e.inputConnection[t]()),e.inputData[t]},t.getInputConnection=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e.inputConnection[t]}}r&&(t.getOutputData=s,t.getOutputPort=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const n=()=>s(e);return n.filter=t,n}),t.update=()=>{const n=[];if(e.numberOfInputs){let r=0;for(;r<e.numberOfInputs;)n[r]=t.getInputData(r),r++}t.shouldUpdate()&&t.requestData&&t.requestData(n,e.output)},t.getNumberOfInputPorts=()=>e.numberOfInputs,t.getNumberOfOutputPorts=()=>r||e.output.length,t.getInputArrayToProcess=t=>{const n=e.inputArrayToProcess[t],r=e.inputData[t];return n&&r?r[`get${n.fieldAssociation}`]().getArray(n.arrayName):null},t.setInputArrayToProcess=function(t,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Scalars";for(;e.inputArrayToProcess.length<t;)e.inputArrayToProcess.push(null);e.inputArrayToProcess[t]={arrayName:n,fieldAssociation:r,attributeType:o}}}const dt=Symbol("Event abort");function pt(t,e,n){const r=[],o=t.delete;let a=1;function i(t){for(let e=0;e<r.length;++e){const[n]=r[e];if(n===t)return void r.splice(e,1)}}t[`invoke${K(n)}`]=function(){if(e.deleted)return void F("instance deleted - cannot call any method");const n=r.slice();for(let e=0;e<n.length;++e){const[,r,o]=n[e];if(r)if(o<0)setTimeout((()=>r.apply(t,arguments)),1-o);else{if(r.apply(t,arguments)===dt)break}}},t[`on${K(n)}`]=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t.apply)return console.error(`Invalid callback for event ${n}`),null;if(e.deleted)return F("instance deleted - cannot call any method"),null;const s=a++;return r.push([s,t,o]),r.sort(((t,e)=>e[2]-t[2])),function(t){return Object.freeze({unsubscribe:function(){i(t)}})}(s)},t.delete=()=>{o(),r.forEach((t=>{let[e]=t;return i(e)}))}}function ht(t,e){const n=function(){const e={};return t(e,{},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Object.freeze(e)};return e&&O.register(e,n),n}function gt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.filter((t=>!!t)).map((t=>t(...n)))}}function yt(t){return t&&t.isA&&t.isA("vtkObject")}function mt(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(yt(t)){if(r.indexOf(t)>=0)return n;r.push(t);const o=e(t);void 0!==o&&n.push(o);const a=t.get();Object.keys(a).forEach((t=>{const o=a[t];Array.isArray(o)?o.forEach((t=>{mt(t,e,n,r)})):mt(o,e,n,r)}))}return n}function vt(t,e,n){var r=this;let o;const a=function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];const u=r,c=n&&!o;clearTimeout(o),o=setTimeout((()=>{o=null,n||t.apply(u,i)}),e),c&&t.apply(u,i)};return a.cancel=()=>clearTimeout(o),a}function bt(t,e){let n=!1,r=null;function o(){n=!1,null!==r&&(a(...r),r=null)}function a(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];n?r=i:(n=!0,t(...i),setTimeout(o,e))}return a}function At(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.keystore=Object.assign(e.keystore||{},n),t.setKey=(t,n)=>{e.keystore[t]=n},t.getKey=t=>e.keystore[t],t.getAllKeys=()=>Object.keys(e.keystore),t.deleteKey=t=>delete e.keystore[t],t.clearKeystore=()=>t.getAllKeys().forEach((t=>delete e.keystore[t]))}let Mt=1;const Tt="__root__";function wt(t,e){At(t,e);const n=t.delete;e.proxyId=""+Mt++,e.ui=JSON.parse(JSON.stringify(e.ui||[])),nt(t,e,["proxyId","proxyGroup","proxyName"]),it(t,e,["proxyManager"]);const r={},o={};function a(t,e){o[e]||(o[e]=[]);const n=o[e];for(let e=0;e<t.length;e++)n.push(t[e].name),r[t[e].name]=t[e],t[e].children&&t[e].children.length&&a(t[e].children,t[e].name)}function i(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt;const r=[],a=e.proxyId,s=function(){return o[arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt]}(n)||[];for(let e=0;e<s.length;e++){const n=s[e],o=t[`get${K(n)}`],u={id:a,name:n,value:o?o():void 0},c=i(n);c.length&&(u.children=c),r.push(u)}return r}a(e.ui,Tt),t.updateUI=n=>{e.ui=JSON.parse(JSON.stringify(n||[])),Object.keys(r).forEach((t=>delete r[t])),Object.keys(o).forEach((t=>delete o[t])),a(e.ui,Tt),t.modified()},t.updateProxyProperty=(t,e)=>{const n=r[t];n?Object.assign(n,e):r[t]={...e}},t.activate=()=>{if(e.proxyManager){const n=`setActive${K(t.getProxyGroup().slice(0,-1))}`;e.proxyManager[n]&&e.proxyManager[n](t)}},e.propertyLinkSubscribers={},t.registerPropertyLinkForGC=(t,n)=>{n in e.propertyLinkSubscribers||(e.propertyLinkSubscribers[n]=[]),e.propertyLinkSubscribers[n].push(t)},t.gcPropertyLinks=n=>{const r=e.propertyLinkSubscribers[n]||[];for(;r.length;)r.pop().unbind(t)},e.propertyLinkMap={},t.getPropertyLink=function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.propertyLinkMap[t])return e.propertyLinkMap[t];let r=null;const o=[];let a=0,i=!1;function s(n){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i)return null;const u=[];let c=null;for(a=o.length;a--;){const t=o[a];t.instance===n?c=t:u.push(t)}if(!c)return null;const l=c.instance[`get${K(c.propertyName)}`]();if(!function(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}(l,r)||s){for(r=l,i=!0;u.length;){const t=u.pop();t.instance.set({[t.propertyName]:r})}i=!1}return e.propertyLinkMap[t].persistent&&(e.propertyLinkMap[t].value=l),l}function u(t,e){const n=[];for(a=o.length;a--;){const r=o[a];r.instance!==t||r.propertyName!==e&&void 0!==e||(r.subscription.unsubscribe(),n.push(a))}for(;n.length;)o.splice(n.pop(),1)}const c={bind:function(n,r){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=n.onModified(s),c=o[0];return o.push({instance:n,propertyName:r,subscription:i}),a&&(e.propertyLinkMap[t].persistent&&void 0!==e.propertyLinkMap[t].value?n.set({[r]:e.propertyLinkMap[t].value}):c&&s(c.instance,!0)),{unsubscribe:()=>u(n,r)}},unbind:u,unsubscribe:function(){for(;o.length;)o.pop().subscription.unsubscribe()},persistent:n};return e.propertyLinkMap[t]=c,c},t.listPropertyNames=()=>i().map((t=>t.name)),t.getPropertyByName=t=>i().find((e=>e.name===t)),t.getPropertyDomainByName=t=>(r[t]||{}).domain,t.getProxySection=()=>({id:e.proxyId,name:e.proxyGroup,ui:e.ui,properties:i()}),t.delete=()=>{const r=Object.keys(e.propertyLinkMap);let o=r.length;for(;o--;)e.propertyLinkMap[r[o]].unsubscribe();Object.keys(e.propertyLinkSubscribers).forEach(t.gcPropertyLinks),n()},t.getState=()=>null,J((function(){if(e.links)for(let n=0;n<e.links.length;n++){const{link:r,property:o,persistent:a,updateOnBind:i,type:s}=e.links[n];if("application"===s){const n=e.proxyManager.getPropertyLink(r,a);t.registerPropertyLinkForGC(n,"application"),n.bind(t,o,i)}}}))}function It(t,e,n){const r=t.delete,o=[],a=Object.keys(n);let i=a.length;for(;i--;){const r=a[i],{modelKey:s,property:u,modified:c=!0}=n[r],l=K(u),f=K(r);t[`get${f}`]=e[s][`get${l}`],t[`set${f}`]=e[s][`set${l}`],c&&o.push(e[s].onModified(t.modified))}t.delete=()=>{for(;o.length;)o.pop().unsubscribe();r()}}function xt(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};function o(t){const n=Object.keys(t);let r=n.length;for(;r--;){const o=n[r];e[o].set(t[o])}}e.this=t;const a=Object.keys(r);let i=a.length;for(;i--;){const s=a[i];e[s]=r[s];const u=n[s];t[`set${K(s)}`]=n=>{if(n!==e[s]){e[s]=n;o(u[n]),t.modified()}}}a.length&&nt(t,e,a)}function Et(t){let e=0,n=0,r=0,o=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=10*e,o=10*n,"deltaY"in t&&(o=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||o)&&t.deltaMode&&(1===t.deltaMode?(r*=40,o*=40):(r*=800,o*=800)),r&&!e&&(e=r<1?-1:1),o&&!n&&(n=o<1?-1:1),{spinX:e,spinY:n||e,pixelX:r,pixelY:o||r}}var Ot={algo:ft,capitalize:H,chain:gt,debounce:vt,enumToString:function(t,e){return Object.keys(t).find((n=>t[n]===e))},event:pt,EVENT_ABORT:dt,formatBytesToProperUnit:Y,formatNumbersWithThousandSeparator:q,get:nt,getArray:st,getCurrentGlobalMTime:function(){return _},getStateArrayMapFunc:Q,isVtkObject:yt,keystore:At,measurePromiseExecution:Z,moveToProtected:lt,newInstance:ht,newTypedArray:W,newTypedArrayFrom:G,normalizeWheel:Et,obj:tt,proxy:wt,proxyPropertyMapping:It,proxyPropertyState:xt,safeArrays:X,set:at,setArray:ut,setGet:it,setGetArray:ct,setImmediate:J,setLoggerFunction:k,throttle:bt,traverseInstanceTree:mt,TYPED_ARRAYS:B,uncapitalize:$,VOID:C,vtkDebugMacro:j,vtkErrorMacro:F,vtkInfoMacro:R,vtkLogMacro:L,vtkOnceErrorMacro:z,vtkWarningMacro:V},Pt=Object.freeze({__proto__:null,VOID:C,setLoggerFunction:k,vtkLogMacro:L,vtkInfoMacro:R,vtkDebugMacro:j,vtkErrorMacro:F,vtkWarningMacro:V,vtkOnceErrorMacro:z,TYPED_ARRAYS:B,newTypedArray:W,newTypedArrayFrom:G,capitalize:H,_capitalize:K,uncapitalize:$,formatBytesToProperUnit:Y,formatNumbersWithThousandSeparator:q,setImmediateVTK:J,measurePromiseExecution:Z,obj:tt,get:nt,set:at,setGet:it,getArray:st,setArray:ut,setGetArray:ct,moveToProtected:lt,algo:ft,EVENT_ABORT:dt,event:pt,newInstance:ht,chain:gt,isVtkObject:yt,traverseInstanceTree:mt,debounce:vt,throttle:bt,keystore:At,proxy:wt,proxyPropertyMapping:It,proxyPropertyState:xt,normalizeWheel:Et,default:Ot});n(7391);const _t=1e-12;const{vtkErrorMacro:Ct,vtkWarningMacro:St}=Ot;function Dt(t){return()=>Ct(`vtkMath::${t} - NOT IMPLEMENTED`)}function Nt(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;const e=Array(t);for(let n=0;n<t;++n)e[n]=0;return e}const{round:kt,floor:Lt,ceil:Rt,min:jt,max:Ft}=Math;Dt("ceilLog2"),Dt("factorial");Dt("gaussian");function Vt(t,e,n){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function Ut(t,e,n){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function zt(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r}function Bt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Wt(t,e,n){const r=t[1]*e[2]-t[2]*e[1],o=t[2]*e[0]-t[0]*e[2],a=t[0]*e[1]-t[1]*e[0];return n[0]=r,n[1]=o,n[2]=a,n}function Gt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;switch(e){case 1:return Math.abs(t);case 2:return Math.sqrt(t[0]*t[0]+t[1]*t[1]);case 3:return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);default:{let n=0;for(let r=0;r<e;r++)n+=t[r]*t[r];return Math.sqrt(n)}}}function Ht(t){const e=Gt(t);return 0!==e&&(t[0]/=e,t[1]/=e,t[2]/=e),e}function Kt(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2])}function $t(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 2===e.length?e[0][0]*e[1][1]-e[1][0]*e[0][1]:4===e.length?e[0]*e[3]-e[1]*e[2]:Number.NaN}function Yt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!`${t}`.includes("e"))return+`${Math.round(`${t}e+${e}`)}e-${e}`;const n=`${t}`.split("e");let r="";return+n[1]+e>0&&(r="+"),+`${Math.round(`${+n[0]}e${r}${+n[1]+e}`)}e-${e}`}function qt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e[0]=Yt(t[0],n),e[1]=Yt(t[1],n),e[2]=Yt(t[2],n),e}function Xt(t,e,n){let r,o,a,i,s,u,c,l=0;const f=Nt(n);for(r=0;r<n;r++){for(i=0,o=0;o<n;o++)(c=Math.abs(t[r*n+o]))>i&&(i=c);if(0===i)return St("Unable to factor linear system"),0;f[r]=1/i}for(o=0;o<n;o++){for(r=0;r<o;r++){for(s=t[r*n+o],a=0;a<r;a++)s-=t[r*n+a]*t[a*n+o];t[r*n+o]=s}for(i=0,r=o;r<n;r++){for(s=t[r*n+o],a=0;a<o;a++)s-=t[r*n+a]*t[a*n+o];t[r*n+o]=s,(u=f[r]*Math.abs(s))>=i&&(i=u,l=r)}if(o!==l){for(a=0;a<n;a++)u=t[l*n+a],t[l*n+a]=t[o*n+a],t[o*n+a]=u;f[l]=f[o]}if(e[o]=l,Math.abs(t[o*n+o])<=_t)return St("Unable to factor linear system"),0;if(o!==n-1)for(u=1/t[o*n+o],r=o+1;r<n;r++)t[r*n+o]*=u}return 1}function Qt(t,e,n,r){let o,a,i,s,u;for(i=-1,o=0;o<r;o++){if(s=e[o],u=n[s],n[s]=n[o],i>=0)for(a=i;a<=o-1;a++)u-=t[o*r+a]*n[a];else 0!==u&&(i=o);n[o]=u}for(o=r-1;o>=0;o--){for(u=n[o],a=o+1;a<r;a++)u-=t[o*r+a]*n[a];n[o]=u/t[o*r+o]}}function Jt(t,e,n){if(2===n){const n=Nt(2),r=$t(t[0],t[1],t[2],t[3]);return 0===r?0:(n[0]=(t[3]*e[0]-t[1]*e[1])/r,n[1]=(-t[2]*e[0]+t[0]*e[1])/r,e[0]=n[0],e[1]=n[1],1)}if(1===n)return 0===t[0]?0:(e[0]/=t[0],1);const r=Nt(n);return 0===Xt(t,r,n)?0:(Qt(t,r,e,n),1)}function Zt(t){return t[0]=1,t[1]=-1,t[2]=1,t[3]=-1,t[4]=1,t[5]=-1,t}function te(t,e,n){return t<e?e:t>n?n:t}function ee(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0];return r[0]=te(t[0],e[0],n[0]),r[1]=te(t[1],e[1],n[1]),r[2]=te(t[2],e[2],n[2]),r}Dt("GetScalarTypeFittingRange"),Dt("GetAdjustedScalarRange");const{isFinite:ne,isNaN:re}=Number;var oe=n(114);const ae=1e-6,ie="coincide",se="disjoint";function ue(t,e,n){const r=n[0]*(t[0]-e[0])+n[1]*(t[1]-e[1])+n[2]*(t[2]-e[2]);return Math.abs(r)}function ce(t,e,n,r){const o=[];Ut(t,e,o);const a=Bt(n,o);r[0]=t[0]-a*n[0],r[1]=t[1]-a*n[1],r[2]=t[2]-a*n[2]}function le(t,e,n){const r=Bt(t,e);let o=Bt(e,e);return 0===o&&(o=1),n[0]=t[0]-r*e[0]/o,n[1]=t[1]-r*e[1]/o,n[2]=t[2]-r*e[2]/o,n}function fe(t,e,n,r){const o=[];Ut(t,e,o);const a=Bt(n,o),i=Bt(n,n);0!==i?(r[0]=t[0]-a*n[0]/i,r[1]=t[1]-a*n[1]/i,r[2]=t[2]-a*n[2]/i):(r[0]=t[0],r[1]=t[1],r[2]=t[2])}function de(t,e,n,r){const o={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},a=[],i=[];Ut(e,t,a),Ut(n,t,i);const s=Bt(r,i),u=Bt(r,a);let c,l;return c=u<0?-u:u,l=s<0?-s*ae:s*ae,c<=l||(o.t=s/u,o.x[0]=t[0]+o.t*a[0],o.x[1]=t[1]+o.t*a[1],o.x[2]=t[2]+o.t*a[2],o.intersection=!0,o.betweenPoints=o.t>=0&&o.t<=1),o}function pe(t,e,n,r){const o={intersection:!1,l0:[],l1:[],error:null},a=[];Wt(e,r,a);const i=a.map((t=>Math.abs(t)));if(i[0]+i[1]+i[2]<ae){const r=[];return Ut(t,n,r),0===Bt(e,r)?o.error=ie:o.error=se,o}let s;s=i[0]>i[1]&&i[0]>i[2]?"x":i[1]>i[2]?"y":"z";const u=[],c=-Bt(e,t),l=-Bt(r,n);switch(s){case"x":u[0]=0,u[1]=(l*e[2]-c*r[2])/a[0],u[2]=(c*r[1]-l*e[1])/a[0];break;case"y":u[0]=(c*r[2]-l*e[2])/a[1],u[1]=0,u[2]=(l*e[0]-c*r[0])/a[1];break;case"z":u[0]=(l*e[1]-c*r[1])/a[2],u[1]=(c*r[0]-l*e[0])/a[2],u[2]=0}return o.l0=u,Vt(u,a,o.l1),o.intersection=!0,o}const he={evaluate:function(t,e,n){return t[0]*(n[0]-e[0])+t[1]*(n[1]-e[1])+t[2]*(n[2]-e[2])},distanceToPlane:ue,projectPoint:ce,projectVector:le,generalizedProjectPoint:fe,intersectWithLine:de,intersectWithPlane:pe,DISJOINT:se,COINCIDE:ie};const ge={normal:[0,0,1],origin:[0,0,0]};function ye(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,ge,n),Ot.obj(t,e),Ot.setGetArray(t,e,["normal","origin"],3),function(t,e){e.classHierarchy.push("vtkPlane"),t.distanceToPlane=t=>ue(t,e.origin,e.normal),t.projectPoint=(t,n)=>{ce(t,e.origin,e.normal,n)},t.projectVector=(t,n)=>le(t,e.normal,n),t.push=t=>{if(0!==t)for(let n=0;n<3;n++)e.origin[n]+=t*e.normal[n]},t.generalizedProjectPoint=(t,n)=>{fe(t,e.origin,e.normal,n)},t.evaluateFunction=(t,n,r)=>Array.isArray(t)?e.normal[0]*(t[0]-e.origin[0])+e.normal[1]*(t[1]-e.origin[1])+e.normal[2]*(t[2]-e.origin[2]):e.normal[0]*(t-e.origin[0])+e.normal[1]*(n-e.origin[1])+e.normal[2]*(r-e.origin[2]),t.evaluateGradient=t=>[e.normal[0],e.normal[1],e.normal[2]],t.intersectWithLine=(t,n)=>de(t,n,e.origin,e.normal),t.intersectWithPlane=(t,n)=>pe(t,n,e.origin,e.normal)}(t,e)}var me={newInstance:Ot.newInstance(ye,"vtkPlane"),extend:ye,...he};const ve=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function be(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function Ae(t){return t?.length>=6&&t[0]<=t[1]&&t[2]<=t[3]&&t[4]<=t[5]}function Me(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Te(t){return Me(t,ve)}function we(t,e,n,r){const[o,a,i,s,u,c]=t;return t[0]=o<e?o:e,t[1]=a>e?a:e,t[2]=i<n?i:n,t[3]=s>n?s:n,t[4]=u<r?u:r,t[5]=c>r?c:r,t}function Ie(t,e){if(0===e.length)return t;if(Array.isArray(e[0]))for(let n=0;n<e.length;++n)we(t,...e[n]);else for(let n=0;n<e.length;n+=3)we(t,...e.slice(n,n+3));return t}function xe(t,e,n,r,o,a,i){const[s,u,c,l,f,d]=t;return void 0===i?(t[0]=Math.min(e[0],s),t[1]=Math.max(e[1],u),t[2]=Math.min(e[2],c),t[3]=Math.max(e[3],l),t[4]=Math.min(e[4],f),t[5]=Math.max(e[5],d)):(t[0]=Math.min(e,s),t[1]=Math.max(n,u),t[2]=Math.min(r,c),t[3]=Math.max(o,l),t[4]=Math.min(a,f),t[5]=Math.max(i,d)),t}function Ee(t,e,n,r){const[o,a,i,s,u,c]=t;return t[0]=e,t[1]=e>a?e:a,t[2]=n,t[3]=n>s?n:s,t[4]=r,t[5]=r>c?r:c,o!==e||i!==n||u!==r}function Oe(t,e,n,r){const[o,a,i,s,u,c]=t;return t[0]=e<o?e:o,t[1]=e,t[2]=n<i?n:i,t[3]=n,t[4]=r<u?r:u,t[5]=r,a!==e||s!==n||c!==r}function Pe(t,e){return t[0]-=e,t[1]+=e,t[2]-=e,t[3]+=e,t[4]-=e,t[5]+=e,t}function _e(t,e,n,r){return!!Ae(t)&&(e>=0?(t[0]*=e,t[1]*=e):(t[0]=e*t[1],t[1]=e*t[0]),n>=0?(t[2]*=n,t[3]*=n):(t[2]=n*t[3],t[3]=n*t[2]),r>=0?(t[4]*=r,t[5]*=r):(t[4]=r*t[5],t[5]=r*t[4]),!0)}function Ce(t){return[.5*(t[0]+t[1]),.5*(t[2]+t[3]),.5*(t[4]+t[5])]}function Se(t,e){return t[2*e+1]-t[2*e]}function De(t){return[Se(t,0),Se(t,1),Se(t,2)]}function Ne(t){return t.slice(0,2)}function ke(t){return t.slice(2,4)}function Le(t){return t.slice(4,6)}function Re(t){const e=De(t);return e[0]>e[1]?e[0]>e[2]?e[0]:e[2]:e[1]>e[2]?e[1]:e[2]}function je(t){if(Ae(t)){const e=De(t);return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}return null}function Fe(t){return[t[0],t[2],t[4]]}function Ve(t){return[t[1],t[3],t[5]]}function Ue(t,e){return t<=0&&e>=0||t>=0&&e<=0}function ze(t,e){let n=0;for(let r=0;r<2;r++)for(let o=2;o<4;o++)for(let a=4;a<6;a++)e[n++]=[t[r],t[o],t[a]];return e}function Be(t,e,n){return e[0]=t[0],e[1]=t[2],e[2]=t[4],n[0]=t[1],n[1]=t[3],n[2]=t[5],e}function We(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const r=ze(t,[]);for(let t=0;t<r.length;++t)oe.vec3.transformMat4(r[t],r[t],e);return Te(n),Ie(n,r)}function Ge(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[0]=.5*(t[1]-t[0]),e[1]=.5*(t[3]-t[2]),e[2]=.5*(t[5]-t[4]),e}function He(t,e,n,r){const o=[].concat(ve),a=t.getData();for(let t=0;t<a.length;t+=3){const i=[a[t],a[t+1],a[t+2]],s=Bt(i,e);o[0]=Math.min(s,o[0]),o[1]=Math.max(s,o[1]);const u=Bt(i,n);o[2]=Math.min(u,o[2]),o[3]=Math.max(u,o[3]);const c=Bt(i,r);o[4]=Math.min(c,o[4]),o[5]=Math.max(c,o[5])}return o}function Ke(t,e,n,r,o){let a=!0;const i=[];let s=0;const u=[],c=[0,0,0];for(let n=0;n<3;n++)e[n]<t[2*n]?(i[n]=1,c[n]=t[2*n],a=!1):e[n]>t[2*n+1]?(i[n]=0,c[n]=t[2*n+1],a=!1):i[n]=2;if(a)return r[0]=e[0],r[1]=e[1],r[2]=e[2],o[0]=0,1;for(let t=0;t<3;t++)2!==i[t]&&0!==n[t]?u[t]=(c[t]-e[t])/n[t]:u[t]=-1;for(let t=0;t<3;t++)u[s]<u[t]&&(s=t);if(u[s]>1||u[s]<0)return 0;o[0]=u[s];for(let o=0;o<3;o++)if(s!==o){if(r[o]=e[o]+u[s]*n[o],r[o]<t[2*o]||r[o]>t[2*o+1])return 0}else r[o]=c[o];return 1}function $e(t,e,n){const r=[];let o=0,a=1,i=1;for(let s=4;s<=5;++s){r[2]=t[s];for(let s=2;s<=3;++s){r[1]=t[s];for(let s=0;s<=1;++s)if(r[0]=t[s],o=me.evaluate(n,e,r),i&&(a=o>=0?1:-1,i=0),0===o||a>0&&o<0||a<0&&o>0)return 1}}return 0}function Ye(t,e){if(!Ae(t)||!Ae(e))return!1;const n=[0,0,0,0,0,0];let r;for(let o=0;o<3;o++)if(r=!1,e[2*o]>=t[2*o]&&e[2*o]<=t[2*o+1]?(r=!0,n[2*o]=e[2*o]):t[2*o]>=e[2*o]&&t[2*o]<=e[2*o+1]&&(r=!0,n[2*o]=t[2*o]),e[2*o+1]>=t[2*o]&&e[2*o+1]<=t[2*o+1]?(r=!0,n[2*o+1]=e[2*o+1]):t[2*o+1]>=e[2*o]&&t[2*o+1]<=e[2*o+1]&&(r=!0,n[2*o+1]=t[2*o+1]),!r)return!1;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],!0}function qe(t,e){if(!Ae(t)||!Ae(e))return!1;for(let n=0;n<3;n++)if(!(e[2*n]>=t[2*n]&&e[2*n]<=t[2*n+1]||t[2*n]>=e[2*n]&&t[2*n]<=e[2*n+1]||e[2*n+1]>=t[2*n]&&e[2*n+1]<=t[2*n+1]||t[2*n+1]>=e[2*n]&&t[2*n+1]<=e[2*n+1]))return!1;return!0}function Xe(t,e,n,r){return!(e<t[0]||e>t[1])&&(!(n<t[2]||n>t[3])&&!(r<t[4]||r>t[5]))}function Qe(t,e,n){const r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],o=[0,0,0,0,0,0,0,0];let a=0;for(let r=0;r<2;r++)for(let i=2;i<4;i++)for(let s=4;s<6;s++){const u=[t[r],t[i],t[s]];o[a++]=me.evaluate(n,e,u)}let i=2;for(;i--&&!(Ue(o[r[i][0]],o[r[i][4]])&&Ue(o[r[i][1]],o[r[i][5]])&&Ue(o[r[i][2]],o[r[i][6]])&&Ue(o[r[i][3]],o[r[i][7]])););if(i<0)return!1;const s=Math.sign(n[i]),u=Math.abs((t[2*i+1]-t[2*i])*n[i]);let c=s>0?1:0;for(let t=0;t<4;t++){if(0===u)continue;const e=Math.abs(o[r[i][t]])/u;s>0&&e<c&&(c=e),s<0&&e>c&&(c=e)}const l=(1-c)*t[2*i]+c*t[2*i+1];return s>0?t[2*i]=l:t[2*i+1]=l,!0}class Je{constructor(t){this.bounds=t,this.bounds||(this.bounds=new Float64Array(ve))}getBounds(){return this.bounds}equals(t){return be(this.bounds,t)}isValid(){return Ae(this.bounds)}setBounds(t){return Me(this.bounds,t)}reset(){return Te(this.bounds)}addPoint(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return we(this.bounds,...e)}addPoints(t){return Ie(this.bounds,t)}addBounds(t,e,n,r,o,a){return xe(this.bounds,t,e,n,r,o,a)}setMinPoint(t,e,n){return Ee(this.bounds,t,e,n)}setMaxPoint(t,e,n){return Oe(this.bounds,t,e,n)}inflate(t){return Pe(this.bounds,t)}scale(t,e,n){return _e(this.bounds,t,e,n)}getCenter(){return Ce(this.bounds)}getLength(t){return Se(this.bounds,t)}getLengths(){return De(this.bounds)}getMaxLength(){return Re(this.bounds)}getDiagonalLength(){return je(this.bounds)}getMinPoint(){return Fe(this.bounds)}getMaxPoint(){return Ve(this.bounds)}getXRange(){return Ne(this.bounds)}getYRange(){return ke(this.bounds)}getZRange(){return Le(this.bounds)}getCorners(t){return ze(this.bounds,t)}computeCornerPoints(t,e){return Be(this.bounds,t,e)}computeLocalBounds(t,e,n){return He(this.bounds,t,e,n)}transformBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return We(this.bounds,t,e)}computeScale3(t){return Ge(this.bounds,t)}cutWithPlane(t,e){return Qe(this.bounds,t,e)}intersectBox(t,e,n,r){return Ke(this.bounds,t,e,n,r)}intersectPlane(t,e){return $e(this.bounds,t,e)}intersect(t){return Ye(this.bounds,t)}intersects(t){return qe(this.bounds,t)}containsPoint(t,e,n){return Xe(this.bounds,t,e,n)}contains(t){return qe(this.bounds,t)}}var Ze={newInstance:function(t){const e=t&&t.bounds;return new Je(e)},...{equals:be,isValid:Ae,setBounds:Me,reset:Te,addPoint:we,addPoints:Ie,addBounds:xe,setMinPoint:Ee,setMaxPoint:Oe,inflate:Pe,scale:_e,scaleAboutCenter:function(t,e,n,r){if(!Ae(t))return!1;const o=Ce(t);return t[0]-=o[0],t[1]-=o[0],t[2]-=o[1],t[3]-=o[1],t[4]-=o[2],t[5]-=o[2],_e(t,e,n,r),t[0]+=o[0],t[1]+=o[0],t[2]+=o[1],t[3]+=o[1],t[4]+=o[2],t[5]+=o[2],!0},getCenter:Ce,getLength:Se,getLengths:De,getMaxLength:Re,getDiagonalLength:je,getMinPoint:Fe,getMaxPoint:Ve,getXRange:Ne,getYRange:ke,getZRange:Le,getCorners:ze,computeCornerPoints:Be,computeLocalBounds:He,transformBounds:We,computeScale3:Ge,cutWithPlane:Qe,intersectBox:Ke,intersectPlane:$e,intersect:Ye,intersects:qe,containsPoint:Xe,contains:function(t,e){return!!qe(t,e)&&(!!Xe(t,...Fe(e))&&!!Xe(t,...Ve(e)))},INIT_BOUNDS:ve}};const tn={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",UNSIGNED_CHAR_CLAMPED:"Uint8ClampedArray",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"};var en={DefaultDataType:tn.FLOAT,DataTypeByteSize:{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},VtkDataTypes:tn};const{vtkErrorMacro:nn}=Pt,{DefaultDataType:rn}=en,on=1e-6;function an(t,e,n){const r=t.length;let o,a,i=Number.MAX_VALUE,s=-Number.MAX_VALUE;for(a=e;a<r;a+=n)if(!Number.isNaN(t[a])){i=t[a],s=i;break}for(;a<r;a+=n)o=t[a],o<i?i=o:o>s&&(s=o);return{min:i,max:s}}function sn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e<0&&n>1){const e=t.length/n,r=new Float64Array(e);for(let o=0,a=0;o<e;++o){for(let e=a+n;a<e;++a)r[o]+=t[a]*t[a];r[o]**=.5}return an(r,0,1)}return an(t,e<0?0:e,n)}function un(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=t||[];for(;n.length<=e;)n.push(null);return n}function cn(t){return Object.prototype.toString.call(t).slice(8,-1)}const ln={computeRange:sn,createRangeHelper:function(){let t=Number.MAX_VALUE,e=-Number.MAX_VALUE,n=0,r=0;return{add(o){t>o&&(t=o),e<o&&(e=o),n++,r+=o},get:()=>({min:t,max:e,count:n,sum:r,mean:r/n}),getRange:()=>({min:t,max:e})}},fastComputeRange:an,getDataType:cn,getMaxNorm:function(t){const e=t.getNumberOfComponents();let n=0;const r=new Array(e);for(let o=0;o<t.getNumberOfTuples();++o){t.getTuple(o,r);const a=Gt(r,e);a>n&&(n=a)}return n}};const fn={name:"",numberOfComponents:1,dataType:rn,rangeTuple:[0,0]};function dn(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(e,fn,n),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");if(e.values?Array.isArray(e.values)&&(e.values=G(e.dataType,e.values)):e.values=W(e.dataType,e.size),e.values&&(e.size=e.size??e.values.length,e.dataType=cn(e.values)),tt(t,e),at(t,e,["name","numberOfComponents"]),e.size%e.numberOfComponents!=0)throw new RangeError("model.size is not a multiple of model.numberOfComponents");!function(t,e){function n(n){if(n<0)return!1;const r=t.getNumberOfComponents(),o=e.values.length/(r>0?r:1);if(n===o)return!0;if(n>o){const t=e.values;return e.values=W(e.dataType,(n+o)*r),e.values.set(t),!0}return e.size>n*r&&(e.size=n*r,t.dataChange()),!0}e.classHierarchy.push("vtkDataArray"),t.dataChange=()=>{e.ranges=null,t.modified()},t.resize=r=>{n(r);const o=r*t.getNumberOfComponents();return e.size!==o&&(e.size=o,t.dataChange(),!0)},t.initialize=()=>{t.resize(0)},t.getElementComponentSize=()=>e.values.BYTES_PER_ELEMENT,t.getComponent=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.values[t*e.numberOfComponents+n]},t.setComponent=(n,r,o)=>{o!==e.values[n*e.numberOfComponents+r]&&(e.values[n*e.numberOfComponents+r]=o,t.dataChange())},t.getValue=n=>{const r=n/e.numberOfComponents,o=n%e.numberOfComponents;return t.getComponent(r,o)},t.setValue=(n,r)=>{const o=n/e.numberOfComponents,a=n%e.numberOfComponents;t.setComponent(o,a,r)},t.getData=()=>e.size===e.values.length?e.values:e.values.subarray(0,e.size),t.getRange=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=n;r<0&&(r=1===e.numberOfComponents?0:e.numberOfComponents);let o=null;return e.ranges||(e.ranges=un(e.ranges,e.numberOfComponents)),o=e.ranges[r],o?(e.rangeTuple[0]=o.min,e.rangeTuple[1]=o.max,e.rangeTuple):(o=sn(t.getData(),n,e.numberOfComponents),e.ranges[r]=o,e.rangeTuple[0]=o.min,e.rangeTuple[1]=o.max,e.rangeTuple)},t.setRange=(t,n)=>{e.ranges||(e.ranges=un(e.ranges,e.numberOfComponents));const r={min:t.min,max:t.max};return e.ranges[n]=r,e.rangeTuple[0]=r.min,e.rangeTuple[1]=r.max,e.rangeTuple},t.setTuple=(t,n)=>{const r=t*e.numberOfComponents;for(let t=0;t<e.numberOfComponents;t++)e.values[r+t]=n[t]},t.setTuples=(t,n)=>{let r=t*e.numberOfComponents;const o=Math.min(n.length,e.size-r);for(let t=0;t<o;)e.values[r++]=n[t++]},t.insertTuple=(r,o)=>(e.size<=r*e.numberOfComponents&&(e.size=(r+1)*e.numberOfComponents,n(r+1)),t.setTuple(r,o),r),t.insertTuples=(r,o)=>{const a=r+o.length/e.numberOfComponents;return e.size<a*e.numberOfComponents&&(e.size=a*e.numberOfComponents,n(a)),t.setTuples(r,o),a},t.insertNextTuple=n=>{const r=e.size/e.numberOfComponents;return t.insertTuple(r,n)},t.insertNextTuples=n=>{const r=e.size/e.numberOfComponents;return t.insertTuples(r,n)},t.findTuple=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:on;for(let r=0;r<e.size;r+=e.numberOfComponents)if(Math.abs(t[0]-e.values[r])<=n){let o=!0;for(let a=1;a<e.numberOfComponents;++a)if(Math.abs(t[a]-e.values[r+a])>n){o=!1;break}if(o)return r/e.numberOfComponents}return-1},t.getTuple=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=e.numberOfComponents||1,o=t*r;switch(r){case 4:n[3]=e.values[o+3];case 3:n[2]=e.values[o+2];case 2:n[1]=e.values[o+1];case 1:n[0]=e.values[o];break;default:for(let t=r-1;t>=0;--t)n[t]=e.values[o+t]}return n},t.getTuples=(n,r)=>{const o=(n??0)*e.numberOfComponents,a=(r??t.getNumberOfTuples())*e.numberOfComponents,i=t.getData().subarray(o,a);return i.length>0?i:null},t.getTupleLocation=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)*e.numberOfComponents},t.getNumberOfComponents=()=>e.numberOfComponents,t.getNumberOfValues=()=>e.size,t.getNumberOfTuples=()=>e.size/e.numberOfComponents,t.getDataType=()=>e.dataType,t.newClone=()=>pn({empty:!0,name:e.name,dataType:e.dataType,numberOfComponents:e.numberOfComponents}),t.getName=()=>(e.name||(t.modified(),e.name=`vtkDataArray${t.getMTime()}`),e.name),t.setData=(n,r)=>{e.values=n,e.size=n.length,e.dataType=cn(n),r&&(e.numberOfComponents=r),e.size%e.numberOfComponents!=0&&(e.numberOfComponents=1),t.dataChange()},t.getState=()=>{if(e.deleted)return null;const n={...e,vtkClass:t.getClassName()};n.values=Array.from(n.values),delete n.buffer,Object.keys(n).forEach((t=>{n[t]||delete n[t]}));const r={};return Object.keys(n).sort().forEach((t=>{r[t]=n[t]})),r.mtime&&delete r.mtime,r},t.deepCopy=n=>{const r=t.getDataType(),o=e.values;t.shallowCopy(n),o?.length>=n.getNumberOfValues()&&r===n.getDataType()?(o.set(n.getData()),e.values=o,t.dataChange()):t.setData(n.getData().slice())},t.interpolateTuple=(n,r,o,a,i,s)=>{const u=e.numberOfComponents||1;u===r.getNumberOfComponents()&&u===a.getNumberOfComponents()||nn("numberOfComponents must match");const c=r.getTuple(o),l=a.getTuple(i),f=[];switch(f.length=u,u){case 4:f[3]=c[3]+(l[3]-c[3])*s;case 3:f[2]=c[2]+(l[2]-c[2])*s;case 2:f[1]=c[1]+(l[1]-c[1])*s;case 1:f[0]=c[0]+(l[0]-c[0])*s;break;default:for(let t=0;t<u;t++)f[t]=c[t]+(l[t]-c[t])*s}return t.insertTuple(n,f)}}(t,e)}const pn=ht(dn,"vtkDataArray");var hn={newInstance:pn,extend:dn,...ln,...en};const{vtkErrorMacro:gn,vtkWarningMacro:yn}=Ot;const mn={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function vn(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,mn,n),Ot.obj(t,e),function(t,e){e.classHierarchy.push("vtkFieldData");const n=t.getState;e.arrays&&(e.arrays=e.arrays.map((t=>({data:O(t.data)})))),t.initialize=()=>{t.initializeFields(),t.copyAllOn(),t.clearFieldFlags()},t.initializeFields=()=>{e.arrays=[],e.copyFieldFlags={},t.modified()},t.copyStructure=n=>{t.initializeFields(),e.copyFieldFlags=n.getCopyFieldFlags().map((t=>t)),e.arrays=n.arrays().map((t=>({array:t})))},t.getNumberOfArrays=()=>e.arrays.length,t.getNumberOfActiveArrays=()=>e.arrays.length,t.addArray=n=>{const r=n.getName(),{array:o,index:a}=t.getArrayWithIndex(r);return null!=o?(e.arrays[a]={data:n},a):(e.arrays=[].concat(e.arrays,{data:n}),e.arrays.length-1)},t.removeAllArrays=()=>{e.arrays=[]},t.removeArray=n=>{const r=e.arrays.findIndex((t=>t.data.getName()===n));return t.removeArrayByIndex(r)},t.removeArrayByIndex=t=>-1!==t&&t<e.arrays.length&&(e.arrays.splice(t,1),!0),t.getArrays=()=>e.arrays.map((t=>t.data)),t.getArray=e=>"number"==typeof e?t.getArrayByIndex(e):t.getArrayByName(e),t.getArrayByName=t=>e.arrays.reduce(((e,n,r)=>n.data.getName()===t?n.data:e),null),t.getArrayWithIndex=t=>{const n=e.arrays.findIndex((e=>e.data.getName()===t));return{array:-1!==n?e.arrays[n].data:null,index:n}},t.getArrayByIndex=t=>t>=0&&t<e.arrays.length?e.arrays[t].data:null,t.hasArray=e=>t.getArrayWithIndex(e).index>=0,t.getArrayName=t=>{const n=e.arrays[t];return n?n.data.getName():""},t.getCopyFieldFlags=()=>e.copyFieldFlags,t.getFlag=t=>e.copyFieldFlags[t],t.passData=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;n.getArrays().forEach((a=>{const i=t.getFlag(a.getName());if(!1!==i&&(!e.doCopyAllOff||!0===i)&&a){let e=t.getArrayByName(a.getName());if(e)if(a.getNumberOfComponents()===e.getNumberOfComponents())if(r>-1&&r<a.getNumberOfTuples()){const t=o>-1?o:r;e.insertTuple(t,a.getTuple(r))}else e.insertTuples(0,a.getTuples());else gn("Unhandled case in passData");else if(r<0||r>a.getNumberOfTuples())t.addArray(a),n.getAttributes(a).forEach((e=>{t.setAttribute(a,e)}));else{const i=a.getNumberOfComponents();let s=a.getNumberOfValues();const u=o>-1?o:r;s<=u*i&&(s=(u+1)*i),e=hn.newInstance({name:a.getName(),dataType:a.getDataType(),numberOfComponents:i,values:Ot.newTypedArray(a.getDataType(),s),size:0}),e.insertTuple(u,a.getTuple(r)),t.addArray(e),n.getAttributes(a).forEach((n=>{t.setAttribute(e,n)}))}}}))},t.interpolateData=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;n.getArrays().forEach((s=>{const u=t.getFlag(s.getName());if(!1!==u&&(!e.doCopyAllOff||!0===u)&&s){let e=t.getArrayByName(s.getName());if(e)if(s.getNumberOfComponents()===e.getNumberOfComponents())if(r>-1&&r<s.getNumberOfTuples()){const t=a>-1?a:r;e.interpolateTuple(t,s,r,s,o,i),yn("Unexpected case in interpolateData")}else e.insertTuples(s.getTuples());else gn("Unhandled case in interpolateData");else if(r<0||o<0||r>s.getNumberOfTuples())t.addArray(s),n.getAttributes(s).forEach((e=>{t.setAttribute(s,e)}));else{const u=s.getNumberOfComponents();let c=s.getNumberOfValues();const l=a>-1?a:r;c<=l*u&&(c=(l+1)*u),e=hn.newInstance({name:s.getName(),dataType:s.getDataType(),numberOfComponents:u,values:Ot.newTypedArray(s.getDataType(),c),size:0}),e.interpolateTuple(l,s,r,s,o,i),t.addArray(e),n.getAttributes(s).forEach((n=>{t.setAttribute(e,n)}))}}}))},t.copyFieldOn=t=>{e.copyFieldFlags[t]=!0},t.copyFieldOff=t=>{e.copyFieldFlags[t]=!1},t.copyAllOn=()=>{e.doCopyAllOn&&!e.doCopyAllOff||(e.doCopyAllOn=!0,e.doCopyAllOff=!1,t.modified())},t.copyAllOff=()=>{!e.doCopyAllOn&&e.doCopyAllOff||(e.doCopyAllOn=!1,e.doCopyAllOff=!0,t.modified())},t.clearFieldFlags=()=>{e.copyFieldFlags={}},t.deepCopy=t=>{e.arrays=t.getArrays().map((t=>{const e=t.newClone();return e.deepCopy(t),{data:e}}))},t.copyFlags=t=>t.getCopyFieldFlags().map((t=>t)),t.reset=()=>e.arrays.forEach((t=>t.data.reset())),t.getMTime=()=>e.arrays.reduce(((t,e)=>e.data.getMTime()>t?e.data.getMTime():t),e.mtime),t.getNumberOfComponents=()=>e.arrays.reduce(((t,e)=>t+e.data.getNumberOfComponents()),0),t.getNumberOfTuples=()=>e.arrays.length>0?e.arrays[0].getNumberOfTuples():0,t.getState=()=>{const t=n();return t&&(t.arrays=e.arrays.map((t=>({data:t.data.getState()})))),t}}(t,e)}var bn={newInstance:Ot.newInstance(vn,"vtkFieldData"),extend:vn};var An={AttributeCopyOperations:{COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},AttributeLimitTypes:{MAX:0,EXACT:1,NOLIMIT:2},AttributeTypes:{SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},CellGhostTypes:{DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},DesiredOutputPrecision:{DEFAULT:0,SINGLE:1,DOUBLE:2},PointGhostTypes:{DUPLICATEPOINT:1,HIDDENPOINT:2},ghostArrayName:"vtkGhostType"};const{AttributeTypes:Mn,AttributeCopyOperations:Tn}=An,{vtkWarningMacro:wn}=Ot;const In={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function xn(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,In,n),bn.extend(t,e,n),Ot.setGet(t,e,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),e.arrays||(e.arrays={}),function(t,e){const n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function r(t){let e=n.find((e=>Mn[e.toUpperCase()]===t||"number"!=typeof t&&e.toLowerCase()===t.toLowerCase()));return void 0===e&&(e=null),e}e.classHierarchy.push("vtkDataSetAttributes");const o={...t};t.checkNumberOfComponents=t=>!0,t.setAttribute=(n,o)=>{const a=r(o);if(n&&"PEDIGREEIDS"===a.toUpperCase()&&!n.isA("vtkDataArray"))return wn(`Cannot set attribute ${a}. The attribute must be a vtkDataArray.`),-1;if(n&&!t.checkNumberOfComponents(n,a))return wn(`Cannot set attribute ${a}. Incorrect number of components.`),-1;let i=e[`active${a}`];if(i>=0&&i<e.arrays.length){if(e.arrays[i]===n)return i;t.removeArrayByIndex(i)}return n?(i=t.addArray(n),e[`active${a}`]=i):e[`active${a}`]=-1,t.modified(),e[`active${a}`]},t.getAttributes=e=>n.filter((n=>t[`get${n}`]()===e)),t.setActiveAttributeByName=(e,n)=>t.setActiveAttributeByIndex(t.getArrayWithIndex(e).index,n),t.setActiveAttributeByIndex=(n,o)=>{const a=r(o);if(n>=0&&n<e.arrays.length){if("PEDIGREEIDS"!==a.toUpperCase()){const e=t.getArrayByIndex(n);if(!e.isA("vtkDataArray"))return wn(`Cannot set attribute ${a}. Only vtkDataArray subclasses can be set as active attributes.`),-1;if(!t.checkNumberOfComponents(e,a))return wn(`Cannot set attribute ${a}. Incorrect number of components.`),-1}return e[`active${a}`]=n,t.modified(),n}return-1===n&&(e[`active${a}`]=n,t.modified()),-1},t.getActiveAttribute=e=>{const n=r(e);return t[`get${n}`]()},t.removeAllArrays=()=>{n.forEach((t=>{e[`active${t}`]=-1})),o.removeAllArrays()},t.removeArrayByIndex=t=>(-1!==t&&n.forEach((n=>{t===e[`active${n}`]?e[`active${n}`]=-1:t<e[`active${n}`]&&(e[`active${n}`]-=1)})),o.removeArrayByIndex(t)),n.forEach((n=>{const r=`active${n}`;t[`get${n}`]=()=>t.getArrayByIndex(e[r]),t[`set${n}`]=e=>t.setAttribute(e,n),t[`setActive${n}`]=e=>t.setActiveAttributeByIndex(t.getArrayWithIndex(e).index,n),t[`copy${n}Off`]=()=>{const t=n.toUpperCase();e.copyAttributeFlags[Tn.PASSDATA][Mn[t]]=!1},t[`copy${n}On`]=()=>{const t=n.toUpperCase();e.copyAttributeFlags[Tn.PASSDATA][Mn[t]]=!0}})),t.initializeAttributeCopyFlags=()=>{e.copyAttributeFlags=[],Object.keys(Tn).filter((t=>"ALLCOPY"!==t)).forEach((t=>{e.copyAttributeFlags[Tn[t]]=Object.keys(Mn).filter((t=>"NUM_ATTRIBUTES"!==t)).reduce(((t,e)=>(t[Mn[e]]=!0,t)),[])})),e.copyAttributeFlags[Tn.COPYTUPLE][Mn.GLOBALIDS]=!1,e.copyAttributeFlags[Tn.INTERPOLATE][Mn.GLOBALIDS]=!1,e.copyAttributeFlags[Tn.COPYTUPLE][Mn.PEDIGREEIDS]=!1},t.initialize=Ot.chain(t.initialize,t.initializeAttributeCopyFlags),e.dataArrays&&Object.keys(e.dataArrays).length&&Object.keys(e.dataArrays).forEach((n=>{e.dataArrays[n].ref||"vtkDataArray"!==e.dataArrays[n].type||t.addArray(hn.newInstance(e.dataArrays[n]))}));const a=t.shallowCopy;t.shallowCopy=(t,n)=>{a(t,n),e.arrays=t.getArrays().map((t=>{const e=t.newClone();return e.shallowCopy(t,n),{data:e}}))},t.initializeAttributeCopyFlags()}(t,e)}var En={newInstance:Ot.newInstance(xn,"vtkDataSetAttributes"),extend:xn,...An};var On={FieldDataTypes:{UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},FieldAssociations:{FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7}};const Pn=["pointData","cellData","fieldData"];const _n={};function Cn(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,_n,n),Ot.obj(t,e),Ot.setGet(t,e,Pn),function(t,e){e.classHierarchy.push("vtkDataSet"),Pn.forEach((t=>{e[t]?e[t]=O(e[t]):e[t]=En.newInstance()}));const n=t.shallowCopy;t.shallowCopy=function(t){n(t,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),Pn.forEach((n=>{e[n]=En.newInstance(),e[n].shallowCopy(t.getReferenceByName(n))}))}}(t,e)}var Sn={newInstance:Ot.newInstance(Cn,"vtkDataSet"),extend:Cn,...On};const Dn={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9};var Nn={StructuredType:Dn};const{StructuredType:kn}=Nn;var Ln={getDataDescriptionFromExtent:function(t){let e=0;for(let n=0;n<3;++n)t[2*n]<t[2*n+1]&&e++;return t[0]>t[1]||t[2]>t[3]||t[4]>t[5]?kn.EMPTY:3===e?kn.XYZ_GRID:2===e?t[0]===t[1]?kn.YZ_PLANE:t[2]===t[3]?kn.XZ_PLANE:kn.XY_PLANE:1===e?t[0]<t[1]?kn.X_LINE:t[2]<t[3]?kn.Y_LINE:kn.Z_LINE:kn.SINGLE_POINT},...Nn};const{vtkErrorMacro:Rn}=Ot;const jn={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:Dn.EMPTY};function Fn(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,jn,n),Sn.extend(t,e,n),e.direction?Array.isArray(e.direction)&&(e.direction=new Float64Array(e.direction.slice(0,9))):e.direction=oe.mat3.identity(new Float64Array(9)),e.indexToWorld=new Float64Array(16),e.worldToIndex=new Float64Array(16),Ot.get(t,e,["indexToWorld","worldToIndex"]),Ot.setGetArray(t,e,["origin","spacing"],3),Ot.setGetArray(t,e,["direction"],9),Ot.getArray(t,e,["extent"],6),function(t,e){e.classHierarchy.push("vtkImageData"),t.setExtent=function(){if(e.deleted)return Rn("instance deleted - cannot call any method"),!1;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const a=1===r.length?r[0]:r;if(6!==a.length)return!1;const i=e.extent.some(((t,e)=>t!==a[e]));return i&&(e.extent=a.slice(),e.dataDescription=Ln.getDataDescriptionFromExtent(e.extent),t.modified()),i},t.setDimensions=function(){let n,r,o;if(e.deleted)Rn("instance deleted - cannot call any method");else{if(1===arguments.length){const t=arguments.length<=0?void 0:arguments[0];n=t[0],r=t[1],o=t[2]}else{if(3!==arguments.length)return void Rn("Bad dimension specification");n=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],o=arguments.length<=2?void 0:arguments[2]}t.setExtent(0,n-1,0,r-1,0,o-1)}},t.getDimensions=()=>[e.extent[1]-e.extent[0]+1,e.extent[3]-e.extent[2]+1,e.extent[5]-e.extent[4]+1],t.getNumberOfCells=()=>{const e=t.getDimensions();let n=1;for(let t=0;t<3;t++){if(0===e[t])return 0;e[t]>1&&(n*=e[t]-1)}return n},t.getNumberOfPoints=()=>{const e=t.getDimensions();return e[0]*e[1]*e[2]},t.getPoint=n=>{const r=t.getDimensions();if(0===r[0]||0===r[1]||0===r[2])return Rn("Requesting a point from an empty image."),null;const o=new Float64Array(3);switch(e.dataDescription){case Dn.EMPTY:return null;case Dn.SINGLE_POINT:break;case Dn.X_LINE:o[0]=n;break;case Dn.Y_LINE:o[1]=n;break;case Dn.Z_LINE:o[2]=n;break;case Dn.XY_PLANE:o[0]=n%r[0],o[1]=n/r[0];break;case Dn.YZ_PLANE:o[1]=n%r[1],o[2]=n/r[1];break;case Dn.XZ_PLANE:o[0]=n%r[0],o[2]=n/r[0];break;case Dn.XYZ_GRID:o[0]=n%r[0],o[1]=n/r[0]%r[1],o[2]=n/(r[0]*r[1]);break;default:Rn("Invalid dataDescription")}const a=[0,0,0];return t.indexToWorld(o,a),a},t.getBounds=()=>t.extentToBounds(t.getSpatialExtent()),t.extentToBounds=t=>Ze.transformBounds(t,e.indexToWorld),t.getSpatialExtent=()=>Ze.inflate([...e.extent],.5),t.computeTransforms=()=>{oe.mat4.fromTranslation(e.indexToWorld,e.origin),e.indexToWorld[0]=e.direction[0],e.indexToWorld[1]=e.direction[1],e.indexToWorld[2]=e.direction[2],e.indexToWorld[4]=e.direction[3],e.indexToWorld[5]=e.direction[4],e.indexToWorld[6]=e.direction[5],e.indexToWorld[8]=e.direction[6],e.indexToWorld[9]=e.direction[7],e.indexToWorld[10]=e.direction[8],oe.mat4.scale(e.indexToWorld,e.indexToWorld,e.spacing),oe.mat4.invert(e.worldToIndex,e.indexToWorld)},t.indexToWorld=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return oe.vec3.transformMat4(n,t,e.indexToWorld),n},t.indexToWorldVec3=t.indexToWorld,t.worldToIndex=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return oe.vec3.transformMat4(n,t,e.worldToIndex),n},t.worldToIndexVec3=t.worldToIndex,t.indexToWorldBounds=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Ze.transformBounds(t,e.indexToWorld,n)},t.worldToIndexBounds=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Ze.transformBounds(t,e.worldToIndex,n)},t.onModified(t.computeTransforms),t.computeTransforms(),t.getCenter=()=>Ze.getCenter(t.getBounds()),t.computeHistogram=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=[0,0,0,0,0,0];t.worldToIndexBounds(e,r);const o=[0,0,0],a=[0,0,0];Ze.computeCornerPoints(r,o,a),qt(o,o),qt(a,a);const i=t.getDimensions();ee(o,[0,0,0],[i[0]-1,i[1]-1,i[2]-1],o),ee(a,[0,0,0],[i[0]-1,i[1]-1,i[2]-1],a);const s=i[0],u=i[0]*i[1],c=t.getPointData().getScalars().getData();let l=-1/0,f=1/0,d=0,p=0,h=0;for(let t=o[2];t<=a[2];t++)for(let e=o[1];e<=a[1];e++){let i=o[0]+e*s+t*u;for(let s=o[0];s<=a[0];s++){if(!n||n([s,e,t],r)){const t=c[i];t>l&&(l=t),t<f&&(f=t),d+=t*t,p+=t,h+=1}++i}}const g=h>0?p/h:0,y=h?Math.abs(d/h-g*g):0;return{minimum:f,maximum:l,average:g,variance:y,sigma:Math.sqrt(y),count:h}},t.computeIncrements=function(t){const e=[];let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(let r=0;r<3;++r)e[r]=n,n*=t[2*r+1]-t[2*r]+1;return e},t.computeOffsetIndex=e=>{let[n,r,o]=e;const a=t.getExtent(),i=t.getPointData().getScalars().getNumberOfComponents(),s=t.computeIncrements(a,i);return Math.floor((Math.round(n)-a[0])*s[0]+(Math.round(r)-a[2])*s[1]+(Math.round(o)-a[4])*s[2])},t.getOffsetIndexFromWorld=e=>{const n=t.getExtent(),r=t.worldToIndex(e);for(let t=0;t<3;++t)if(r[t]<n[2*t]||r[t]>n[2*t+1])return Rn(`GetScalarPointer: Pixel ${r} is not in memory. Current extent = ${n}`),NaN;return t.computeOffsetIndex(r)},t.getScalarValueFromWorld=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=t.getPointData().getScalars().getNumberOfComponents();if(n<0||n>=r)return Rn(`GetScalarPointer: Scalar Component ${n} is not within bounds. Current Scalar numberOfComponents: ${r}`),NaN;const o=t.getOffsetIndexFromWorld(e);return Number.isNaN(o)?o:t.getPointData().getScalars().getComponent(o,n)}}(t,e)}var Vn,Un={newInstance:Ot.newInstance(Fn,"vtkImageData"),extend:Fn},zn=(Vn="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(t){var e,n,r=void 0!==(t=t||{})?t:{};r.ready=new Promise((function(t,r){e=t,n=r}));var o,a=Object.assign({},r),i=[],s="./this.program",u=(t,e)=>{throw e},c=!0,l=!1,f="";(c||l)&&(l?f=self.location.href:"undefined"!=typeof document&&document.currentScript&&(f=document.currentScript.src),Vn&&(f=Vn),f=0!==f.indexOf("blob:")?f.substr(0,f.replace(/[?#].*/,"").lastIndexOf("/")+1):"",l&&(o=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}));var d=r.print||console.log.bind(console),p=r.printErr||console.warn.bind(console);Object.assign(r,a),a=null,r.arguments&&(i=r.arguments),r.thisProgram&&(s=r.thisProgram),r.quit&&(u=r.quit);var h,g=4;r.wasmBinary&&(h=r.wasmBinary);var y,m=r.noExitRuntime||!0;"object"!=typeof WebAssembly&&W("no native wasm support detected");var v,b,A,M,T,w,I,x,E,O,P=!1,_="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function C(t,e,n){for(var r=e+n,o=e;t[o]&&!(o>=r);)++o;if(o-e>16&&t.buffer&&_)return _.decode(t.subarray(e,o));for(var a="";e<o;){var i=t[e++];if(128&i){var s=63&t[e++];if(192!=(224&i)){var u=63&t[e++];if((i=224==(240&i)?(15&i)<<12|s<<6|u:(7&i)<<18|s<<12|u<<6|63&t[e++])<65536)a+=String.fromCharCode(i);else{var c=i-65536;a+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else a+=String.fromCharCode((31&i)<<6|s)}else a+=String.fromCharCode(i)}return a}function S(t,e){return t?C(M,t,e):""}function D(t,e,n,r){if(!(r>0))return 0;for(var o=n,a=n+r-1,i=0;i<t.length;++i){var s=t.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++i)),s<=127){if(n>=a)break;e[n++]=s}else if(s<=2047){if(n+1>=a)break;e[n++]=192|s>>6,e[n++]=128|63&s}else if(s<=65535){if(n+2>=a)break;e[n++]=224|s>>12,e[n++]=128|s>>6&63,e[n++]=128|63&s}else{if(n+3>=a)break;e[n++]=240|s>>18,e[n++]=128|s>>12&63,e[n++]=128|s>>6&63,e[n++]=128|63&s}}return e[n]=0,n-o}function N(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);r<=127?e++:r<=2047?e+=2:r>=55296&&r<=57343?(e+=4,++n):e+=3}return e}function k(t){b=t,r.HEAP8=A=new Int8Array(t),r.HEAP16=T=new Int16Array(t),r.HEAP32=I=new Int32Array(t),r.HEAPU8=M=new Uint8Array(t),r.HEAPU16=w=new Uint16Array(t),r.HEAPU32=x=new Uint32Array(t),r.HEAPF32=E=new Float32Array(t),r.HEAPF64=O=new Float64Array(t)}r.INITIAL_MEMORY;var L,R=[],j=[],F=[],V=[],U=0,z=null,B=null;function W(t){r.onAbort&&r.onAbort(t),p(t="Aborted("+t+")"),P=!0,v=1,t+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(t);throw n(e),e}var G,H,K="data:application/octet-stream;base64,";function $(t){return t.startsWith(K)}function Y(t){try{if(t==G&&h)return new Uint8Array(h);if(o)return o(t);throw"both async and sync fetching of the wasm failed"}catch(t){W(t)}}$(G="ICRPolySeg.wasm")||(H=G,G=r.locateFile?r.locateFile(H,f):f+H);var q={638383:t=>{r.updateProgress&&r.updateProgress(t)}};function X(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Q(t){for(;t.length>0;)t.shift()(r)}function J(t){this.excPtr=t,this.ptr=t-24,this.set_type=function(t){x[this.ptr+4>>2]=t},this.get_type=function(){return x[this.ptr+4>>2]},this.set_destructor=function(t){x[this.ptr+8>>2]=t},this.get_destructor=function(){return x[this.ptr+8>>2]},this.set_refcount=function(t){I[this.ptr>>2]=t},this.set_caught=function(t){t=t?1:0,A[this.ptr+12|0]=t},this.get_caught=function(){return 0!=A[this.ptr+12|0]},this.set_rethrown=function(t){t=t?1:0,A[this.ptr+13|0]=t},this.get_rethrown=function(){return 0!=A[this.ptr+13|0]},this.init=function(t,e){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(e),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var t=I[this.ptr>>2];I[this.ptr>>2]=t+1},this.release_ref=function(){var t=I[this.ptr>>2];return I[this.ptr>>2]=t-1,1===t},this.set_adjusted_ptr=function(t){x[this.ptr+16>>2]=t},this.get_adjusted_ptr=function(){return x[this.ptr+16>>2]},this.get_exception_ptr=function(){if(pe(this.get_type()))return x[this.excPtr>>2];var t=this.get_adjusted_ptr();return 0!==t?t:this.excPtr}}var Z={varargs:void 0,get:function(){return Z.varargs+=4,I[Z.varargs-4>>2]},getStr:function(t){return S(t)}},tt={};function et(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function nt(t){return this.fromWireType(I[t>>2])}var rt={},ot={},at={},it=48,st=57;function ut(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=it&&e<=st?"_"+t:t}function ct(t,e){return t=ut(t),new Function("body","return function "+t+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(e)}function lt(t,e){var n=ct(e,(function(t){this.name=e,this.message=t;var n=new Error(t).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var ft=void 0;function dt(t){throw new ft(t)}function pt(t,e,n){function r(e){var r=n(e);r.length!==t.length&&dt("Mismatched type converter count");for(var o=0;o<t.length;++o)bt(t[o],r[o])}t.forEach((function(t){at[t]=e}));var o=new Array(e.length),a=[],i=0;e.forEach(((t,e)=>{ot.hasOwnProperty(t)?o[e]=ot[t]:(a.push(t),rt.hasOwnProperty(t)||(rt[t]=[]),rt[t].push((()=>{o[e]=ot[t],++i===a.length&&r(o)})))})),0===a.length&&r(o)}function ht(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}var gt=void 0;function yt(t){for(var e="",n=t;M[n];)e+=gt[M[n++]];return e}var mt=void 0;function vt(t){throw new mt(t)}function bt(t,e,n={}){if(!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=e.name;if(t||vt('type "'+r+'" must have a positive integer typeid pointer'),ot.hasOwnProperty(t)){if(n.ignoreDuplicateRegistrations)return;vt("Cannot register type '"+r+"' twice")}if(ot[t]=e,delete at[t],rt.hasOwnProperty(t)){var o=rt[t];delete rt[t],o.forEach((t=>t()))}}var At=[],Mt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Tt(t){t>4&&0==--Mt[t].refcount&&(Mt[t]=void 0,At.push(t))}function wt(){for(var t=0,e=5;e<Mt.length;++e)void 0!==Mt[e]&&++t;return t}function It(){for(var t=5;t<Mt.length;++t)if(void 0!==Mt[t])return Mt[t];return null}var xt={toValue:t=>(t||vt("Cannot use deleted val. handle = "+t),Mt[t].value),toHandle:t=>{switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=At.length?At.pop():Mt.length;return Mt[e]={refcount:1,value:t},e}}};function Et(t,e){switch(e){case 2:return function(t){return this.fromWireType(E[t>>2])};case 3:return function(t){return this.fromWireType(O[t>>3])};default:throw new TypeError("Unknown float type: "+t)}}function Ot(t,e){if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var n=ct(t.name||"unknownFunctionName",(function(){}));n.prototype=t.prototype;var r=new n,o=t.apply(r,e);return o instanceof Object?o:r}function Pt(t,e,n){r.hasOwnProperty(t)?((void 0===n||void 0!==r[t].overloadTable&&void 0!==r[t].overloadTable[n])&&vt("Cannot register public name '"+t+"' twice"),function(t,e,n){if(void 0===t[e].overloadTable){var r=t[e];t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||vt("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[e].overloadTable+")!"),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[r.argCount]=r}}(r,t,t),r.hasOwnProperty(n)&&vt("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),r[t].overloadTable[n]=e):(r[t]=e,void 0!==n&&(r[t].numArguments=n))}var _t=[];function Ct(t){var e=_t[t];return e||(t>=_t.length&&(_t.length=t+1),_t[t]=e=L.get(t)),e}function St(t,e,n){return t.includes("j")?function(t,e,n){var o=r["dynCall_"+t];return n&&n.length?o.apply(null,[e].concat(n)):o.call(null,e)}(t,e,n):Ct(e).apply(null,n)}function Dt(t,e){var n,r,o,a=(t=yt(t)).includes("j")?(n=t,r=e,o=[],function(){return o.length=0,Object.assign(o,arguments),St(n,r,o)}):Ct(e);return"function"!=typeof a&&vt("unknown function pointer with signature "+t+": "+e),a}var Nt=void 0;function kt(t){var e=de(t),n=yt(e);return fe(e),n}function Lt(t,e,n){switch(e){case 0:return n?function(t){return A[t]}:function(t){return M[t]};case 1:return n?function(t){return T[t>>1]}:function(t){return w[t>>1]};case 2:return n?function(t){return I[t>>2]}:function(t){return x[t>>2]};default:throw new TypeError("Unknown integer type: "+t)}}var Rt="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function jt(t,e){for(var n=t,r=n>>1,o=r+e/2;!(r>=o)&&w[r];)++r;if((n=r<<1)-t>32&&Rt)return Rt.decode(M.subarray(t,n));for(var a="",i=0;!(i>=e/2);++i){var s=T[t+2*i>>1];if(0==s)break;a+=String.fromCharCode(s)}return a}function Ft(t,e,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var r=e,o=(n-=2)<2*t.length?n/2:t.length,a=0;a<o;++a){var i=t.charCodeAt(a);T[e>>1]=i,e+=2}return T[e>>1]=0,e-r}function Vt(t){return 2*t.length}function Ut(t,e){for(var n=0,r="";!(n>=e/4);){var o=I[t+4*n>>2];if(0==o)break;if(++n,o>=65536){var a=o-65536;r+=String.fromCharCode(55296|a>>10,56320|1023&a)}else r+=String.fromCharCode(o)}return r}function zt(t,e,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var r=e,o=r+n-4,a=0;a<t.length;++a){var i=t.charCodeAt(a);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++a)),I[e>>2]=i,(e+=4)+4>o)break}return I[e>>2]=0,e-r}function Bt(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);r>=55296&&r<=57343&&++n,e+=4}return e}function Wt(t,e){var n=ot[t];return void 0===n&&vt(e+" has unknown type "+kt(t)),n}var Gt={};function Ht(t){var e=Gt[t];return void 0===e?yt(t):e}var Kt=[];function $t(){return"object"==typeof globalThis?globalThis:Function("return this")()}var Yt=[],qt={},Xt=[];function Qt(t,e,n){var r=function(t,e){var n;for(Xt.length=0,e>>=2;n=M[t++];)e+=105!=n&e,Xt.push(105==n?I[e]:O[e++>>1]),++e;return Xt}(e,n);return q[t].apply(null,r)}function Jt(t){try{return y.grow(t-b.byteLength+65535>>>16),k(y.buffer),1}catch(t){}}var Zt={};function te(){if(!te.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"};for(var e in Zt)void 0===Zt[e]?delete t[e]:t[e]=Zt[e];var n=[];for(var e in t)n.push(e+"="+t[e]);te.strings=n}return te.strings}var ee=[null,[],[]];function ne(t,e){var n=ee[t];0===e||10===e?((1===t?d:p)(C(n,0)),n.length=0):n.push(e)}function re(t){return t%4==0&&(t%100!=0||t%400==0)}var oe=[31,29,31,30,31,30,31,31,30,31,30,31],ae=[31,28,31,30,31,30,31,31,30,31,30,31];function ie(t,e,n,r){var o=I[r+40>>2],a={tm_sec:I[r>>2],tm_min:I[r+4>>2],tm_hour:I[r+8>>2],tm_mday:I[r+12>>2],tm_mon:I[r+16>>2],tm_year:I[r+20>>2],tm_wday:I[r+24>>2],tm_yday:I[r+28>>2],tm_isdst:I[r+32>>2],tm_gmtoff:I[r+36>>2],tm_zone:o?S(o):""},i=S(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var u in s)i=i.replace(new RegExp(u,"g"),s[u]);var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function f(t,e,n){for(var r="number"==typeof t?t.toString():t||"";r.length<e;)r=n[0]+r;return r}function d(t,e){return f(t,e,"0")}function p(t,e){function n(t){return t<0?-1:t>0?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function h(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function g(t){var e=function(t,e){for(var n=new Date(t.getTime());e>0;){var r=re(n.getFullYear()),o=n.getMonth(),a=(r?oe:ae)[o];if(!(e>a-n.getDate()))return n.setDate(n.getDate()+e),n;e-=a-n.getDate()+1,n.setDate(1),o<11?n.setMonth(o+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}(new Date(t.tm_year+1900,0,1),t.tm_yday),n=new Date(e.getFullYear(),0,4),r=new Date(e.getFullYear()+1,0,4),o=h(n),a=h(r);return p(o,e)<=0?p(a,e)<=0?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var y={"%a":function(t){return c[t.tm_wday].substring(0,3)},"%A":function(t){return c[t.tm_wday]},"%b":function(t){return l[t.tm_mon].substring(0,3)},"%B":function(t){return l[t.tm_mon]},"%C":function(t){return d((t.tm_year+1900)/100|0,2)},"%d":function(t){return d(t.tm_mday,2)},"%e":function(t){return f(t.tm_mday,2," ")},"%g":function(t){return g(t).toString().substring(2)},"%G":function(t){return g(t)},"%H":function(t){return d(t.tm_hour,2)},"%I":function(t){var e=t.tm_hour;return 0==e?e=12:e>12&&(e-=12),d(e,2)},"%j":function(t){return d(t.tm_mday+function(t,e){for(var n=0,r=0;r<=e;n+=t[r++]);return n}(re(t.tm_year+1900)?oe:ae,t.tm_mon-1),3)},"%m":function(t){return d(t.tm_mon+1,2)},"%M":function(t){return d(t.tm_min,2)},"%n":function(){return"\n"},"%p":function(t){return t.tm_hour>=0&&t.tm_hour<12?"AM":"PM"},"%S":function(t){return d(t.tm_sec,2)},"%t":function(){return"\t"},"%u":function(t){return t.tm_wday||7},"%U":function(t){var e=t.tm_yday+7-t.tm_wday;return d(Math.floor(e/7),2)},"%V":function(t){var e=Math.floor((t.tm_yday+7-(t.tm_wday+6)%7)/7);if((t.tm_wday+371-t.tm_yday-2)%7<=2&&e++,e){if(53==e){var n=(t.tm_wday+371-t.tm_yday)%7;4==n||3==n&&re(t.tm_year)||(e=1)}}else{e=52;var r=(t.tm_wday+7-t.tm_yday-1)%7;(4==r||5==r&&re(t.tm_year%400-1))&&e++}return d(e,2)},"%w":function(t){return t.tm_wday},"%W":function(t){var e=t.tm_yday+7-(t.tm_wday+6)%7;return d(Math.floor(e/7),2)},"%y":function(t){return(t.tm_year+1900).toString().substring(2)},"%Y":function(t){return t.tm_year+1900},"%z":function(t){var e=t.tm_gmtoff,n=e>=0;return e=(e=Math.abs(e)/60)/60*100+e%60,(n?"+":"-")+String("0000"+e).slice(-4)},"%Z":function(t){return t.tm_zone},"%%":function(){return"%"}};for(var u in i=i.replace(/%%/g,"\0\0"),y)i.includes(u)&&(i=i.replace(new RegExp(u,"g"),y[u](a)));i=i.replace(/\0\0/g,"%");var m,v,b,M,T,w,x=(m=i,v=!1,M=b>0?b:N(m)+1,T=new Array(M),w=D(m,T,0,T.length),v&&(T.length=w),T);return x.length>e?0:(function(t,e){A.set(t,e)}(x,t),x.length-1)}function se(t){v=t,m||(r.onExit&&r.onExit(t),P=!0),u(t,new X(t))}ft=r.InternalError=lt(Error,"InternalError"),function(){for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);gt=t}(),mt=r.BindingError=lt(Error,"BindingError"),r.count_emval_handles=wt,r.get_first_emval=It,Nt=r.UnboundTypeError=lt(Error,"UnboundTypeError");var ue,ce={b:function(t,e,n){throw new J(t).init(e,n),t},J:function(t,e){},F:function(t,e,n){},L:function(t,e,n,r){Z.varargs=r},E:function(t,e,n,r){},G:function(t,e){},x:function(t){var e=tt[t];delete tt[t];var n=e.rawConstructor,r=e.rawDestructor,o=e.fields;pt([t],o.map((t=>t.getterReturnType)).concat(o.map((t=>t.setterArgumentType))),(t=>{var a={};return o.forEach(((e,n)=>{var r=e.fieldName,i=t[n],s=e.getter,u=e.getterContext,c=t[n+o.length],l=e.setter,f=e.setterContext;a[r]={read:t=>i.fromWireType(s(u,t)),write:(t,e)=>{var n=[];l(f,t,c.toWireType(n,e)),et(n)}}})),[{name:e.name,fromWireType:function(t){var e={};for(var n in a)e[n]=a[n].read(t);return r(t),e},toWireType:function(t,e){for(var o in a)if(!(o in e))throw new TypeError('Missing field:  "'+o+'"');var i=n();for(o in a)a[o].write(i,e[o]);return null!==t&&t.push(r,i),i},argPackAdvance:8,readValueFromPointer:nt,destructorFunction:r}]}))},A:function(t,e,n,r,o){},O:function(t,e,n,r,o){var a=ht(n);bt(t,{name:e=yt(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?r:o},argPackAdvance:8,readValueFromPointer:function(t){var r;if(1===n)r=A;else if(2===n)r=T;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+e);r=I}return this.fromWireType(r[t>>a])},destructorFunction:null})},N:function(t,e){bt(t,{name:e=yt(e),fromWireType:function(t){var e=xt.toValue(t);return Tt(t),e},toWireType:function(t,e){return xt.toHandle(e)},argPackAdvance:8,readValueFromPointer:nt,destructorFunction:null})},v:function(t,e,n){var r=ht(n);bt(t,{name:e=yt(e),fromWireType:function(t){return t},toWireType:function(t,e){return e},argPackAdvance:8,readValueFromPointer:Et(e,r),destructorFunction:null})},g:function(t,e,n,o,a,i){var s=function(t,e){for(var n=[],r=0;r<t;r++)n.push(x[e+4*r>>2]);return n}(e,n);t=yt(t),a=Dt(o,a),Pt(t,(function(){!function(t,e){var n=[],r={};throw e.forEach((function t(e){r[e]||ot[e]||(at[e]?at[e].forEach(t):(n.push(e),r[e]=!0))})),new Nt(t+": "+n.map(kt).join([", "]))}("Cannot call "+t+" due to unbound types",s)}),e-1),pt([],s,(function(n){var o=[n[0],null].concat(n.slice(1));return function(t,e,n){r.hasOwnProperty(t)||dt("Replacing nonexistant public symbol"),void 0!==r[t].overloadTable&&void 0!==n?r[t].overloadTable[n]=e:(r[t]=e,r[t].argCount=n)}(t,function(t,e,n,r,o){var a=e.length;a<2&&vt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var i=null!==e[1]&&null!==n,s=!1,u=1;u<e.length;++u)if(null!==e[u]&&void 0===e[u].destructorFunction){s=!0;break}var c="void"!==e[0].name,l="",f="";for(u=0;u<a-2;++u)l+=(0!==u?", ":"")+"arg"+u,f+=(0!==u?", ":"")+"arg"+u+"Wired";var d="return function "+ut(t)+"("+l+") {\nif (arguments.length !== "+(a-2)+") {\nthrowBindingError('function "+t+" called with ' + arguments.length + ' arguments, expected "+(a-2)+" args!');\n}\n";s&&(d+="var destructors = [];\n");var p=s?"destructors":"null",h=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],g=[vt,r,o,et,e[0],e[1]];for(i&&(d+="var thisWired = classParam.toWireType("+p+", this);\n"),u=0;u<a-2;++u)d+="var arg"+u+"Wired = argType"+u+".toWireType("+p+", arg"+u+"); // "+e[u+2].name+"\n",h.push("argType"+u),g.push(e[u+2]);if(i&&(f="thisWired"+(f.length>0?", ":"")+f),d+=(c?"var rv = ":"")+"invoker(fn"+(f.length>0?", ":"")+f+");\n",s)d+="runDestructors(destructors);\n";else for(u=i?1:2;u<e.length;++u){var y=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==e[u].destructorFunction&&(d+=y+"_dtor("+y+"); // "+e[u].name+"\n",h.push(y+"_dtor"),g.push(e[u].destructorFunction))}return c&&(d+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),d+="}\n",h.push(d),Ot(Function,h).apply(null,g)}(t,o,null,a,i),e-1),[]}))},d:function(t,e,n,r,o){e=yt(e),-1===o&&(o=4294967295);var a=ht(n),i=t=>t;if(0===r){var s=32-8*n;i=t=>t<<s>>>s}var u=e.includes("unsigned");bt(t,{name:e,fromWireType:i,toWireType:u?function(t,e){return this.name,e>>>0}:function(t,e){return this.name,e},argPackAdvance:8,readValueFromPointer:Lt(e,a,0!==r),destructorFunction:null})},c:function(t,e,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function o(t){var e=x,n=e[t>>=2],o=e[t+1];return new r(b,o,n)}bt(t,{name:n=yt(n),fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})},u:function(t,e){var n="std::string"===(e=yt(e));bt(t,{name:e,fromWireType:function(t){var e,r=x[t>>2],o=t+4;if(n)for(var a=o,i=0;i<=r;++i){var s=o+i;if(i==r||0==M[s]){var u=S(a,s-a);void 0===e?e=u:(e+=String.fromCharCode(0),e+=u),a=s+1}}else{var c=new Array(r);for(i=0;i<r;++i)c[i]=String.fromCharCode(M[o+i]);e=c.join("")}return fe(t),e},toWireType:function(t,e){var r;e instanceof ArrayBuffer&&(e=new Uint8Array(e));var o="string"==typeof e;o||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||vt("Cannot pass non-string to std::string"),r=n&&o?N(e):e.length;var a=le(4+r+1),i=a+4;if(x[a>>2]=r,n&&o)D(e,M,i,r+1);else if(o)for(var s=0;s<r;++s){var u=e.charCodeAt(s);u>255&&(fe(i),vt("String has UTF-16 code units that do not fit in 8 bits")),M[i+s]=u}else for(s=0;s<r;++s)M[i+s]=e[s];return null!==t&&t.push(fe,a),a},argPackAdvance:8,readValueFromPointer:nt,destructorFunction:function(t){fe(t)}})},m:function(t,e,n){var r,o,a,i,s;n=yt(n),2===e?(r=jt,o=Ft,i=Vt,a=()=>w,s=1):4===e&&(r=Ut,o=zt,i=Bt,a=()=>x,s=2),bt(t,{name:n,fromWireType:function(t){for(var n,o=x[t>>2],i=a(),u=t+4,c=0;c<=o;++c){var l=t+4+c*e;if(c==o||0==i[l>>s]){var f=r(u,l-u);void 0===n?n=f:(n+=String.fromCharCode(0),n+=f),u=l+e}}return fe(t),n},toWireType:function(t,r){"string"!=typeof r&&vt("Cannot pass non-string to C++ string type "+n);var a=i(r),u=le(4+a+e);return x[u>>2]=a>>s,o(r,u+4,a+e),null!==t&&t.push(fe,u),u},argPackAdvance:8,readValueFromPointer:nt,destructorFunction:function(t){fe(t)}})},y:function(t,e,n,r,o,a){tt[t]={name:yt(e),rawConstructor:Dt(n,r),rawDestructor:Dt(o,a),fields:[]}},e:function(t,e,n,r,o,a,i,s,u,c){tt[t].fields.push({fieldName:yt(e),getterReturnType:n,getter:Dt(r,o),getterContext:a,setterArgumentType:i,setter:Dt(s,u),setterContext:c})},P:function(t,e){bt(t,{isVoid:!0,name:e=yt(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(t,e){}})},r:function(t,e,n){t=xt.toValue(t),e=Wt(e,"emval::as");var r=[],o=xt.toHandle(r);return x[n>>2]=o,e.toWireType(r,t)},i:function(t,e,n,r){(t=Kt[t])(e=xt.toValue(e),n=Ht(n),null,r)},a:Tt,p:function(t){return 0===t?xt.toHandle($t()):(t=Ht(t),xt.toHandle($t()[t]))},j:function(t,e){var n=function(t,e){for(var n=new Array(t),r=0;r<t;++r)n[r]=Wt(x[e+r*g>>2],"parameter "+r);return n}(t,e),r=n[0],o=r.name+"_$"+n.slice(1).map((function(t){return t.name})).join("_")+"$",a=Yt[o];if(void 0!==a)return a;for(var i=["retType"],s=[r],u="",c=0;c<t-1;++c)u+=(0!==c?", ":"")+"arg"+c,i.push("argType"+c),s.push(n[1+c]);var l="return function "+ut("methodCaller_"+o)+"(handle, name, destructors, args) {\n",f=0;for(c=0;c<t-1;++c)l+="    var arg"+c+" = argType"+c+".readValueFromPointer(args"+(f?"+"+f:"")+");\n",f+=n[c+1].argPackAdvance;for(l+="    var rv = handle[name]("+u+");\n",c=0;c<t-1;++c)n[c+1].deleteObject&&(l+="    argType"+c+".deleteObject(arg"+c+");\n");r.isVoid||(l+="    return retType.toWireType(destructors, rv);\n"),l+="};\n",i.push(l);var d,p,h=Ot(Function,i).apply(null,s);return d=h,p=Kt.length,Kt.push(d),a=p,Yt[o]=a,a},s:function(t,e){return t=xt.toValue(t),e=xt.toValue(e),xt.toHandle(t[e])},f:function(t){t>4&&(Mt[t].refcount+=1)},o:function(t,e,n,o){t=xt.toValue(t);var a=qt[e];return a||(a=function(t){for(var e="",n=0;n<t;++n)e+=(0!==n?", ":"")+"arg"+n;var o="return function emval_allocator_"+t+"(constructor, argTypes, args) {\n  var HEAPU32 = getMemory();\n";for(n=0;n<t;++n)o+="var argType"+n+" = requireRegisteredType(HEAPU32[((argTypes)>>2)], 'parameter "+n+"');\nvar arg"+n+" = argType"+n+".readValueFromPointer(args);\nargs += argType"+n+"['argPackAdvance'];\nargTypes += 4;\n";return o+="var obj = new constructor("+e+");\nreturn valueToHandle(obj);\n}\n",new Function("requireRegisteredType","Module","valueToHandle","getMemory",o)(Wt,r,xt.toHandle,(()=>x))}(e),qt[e]=a),a(t,n,o)},w:function(t){return xt.toHandle(Ht(t))},q:function(t){et(xt.toValue(t)),Tt(t)},k:function(t,e){var n=(t=Wt(t,"_emval_take_value")).readValueFromPointer(e);return xt.toHandle(n)},n:function(){W("")},h:function(t,e,n){return Qt(t,e,n)},D:function(){return 2147483648},M:function(t,e,n){M.copyWithin(t,e,e+n)},C:function(t){var e,n,r=M.length,o=2147483648;if((t>>>=0)>o)return!1;for(var a=1;a<=4;a*=2){var i=r*(1+.2/a);if(i=Math.min(i,t+100663296),Jt(Math.min(o,(e=Math.max(t,i))+((n=65536)-e%n)%n)))return!0}return!1},H:function(t,e){var n=0;return te().forEach((function(r,o){var a=e+n;x[t+4*o>>2]=a,function(t,e,n){for(var r=0;r<t.length;++r)A[0|e++]=t.charCodeAt(r);n||(A[0|e]=0)}(r,a),n+=r.length+1})),0},I:function(t,e){var n=te();x[t>>2]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),x[e>>2]=r,0},l:function(t){return 52},K:function(t,e,n,r){return 52},z:function(t,e,n,r,o){return 70},t:function(t,e,n,r){for(var o=0,a=0;a<n;a++){var i=x[e>>2],s=x[e+4>>2];e+=8;for(var u=0;u<s;u++)ne(t,M[i+u]);o+=s}return x[r>>2]=o,0},B:function(t,e,n,r,o){return ie(t,e,n,r)}},le=(function(){var t={a:ce};function e(t,e){var n,o=t.exports;r.asm=o,k((y=r.asm.Q).buffer),L=r.asm.T,n=r.asm.R,j.unshift(n),function(t){if(U--,r.monitorRunDependencies&&r.monitorRunDependencies(U),0==U&&(null!==z&&(clearInterval(z),z=null),B)){var e=B;B=null,e()}}()}function o(t){e(t.instance)}function a(e){return(h||!c&&!l||"function"!=typeof fetch?Promise.resolve().then((function(){return Y(G)})):fetch(G,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+G+"'";return t.arrayBuffer()})).catch((function(){return Y(G)}))).then((function(e){return WebAssembly.instantiate(e,t)})).then((function(t){return t})).then(e,(function(t){p("failed to asynchronously prepare wasm: "+t),W(t)}))}if(U++,r.monitorRunDependencies&&r.monitorRunDependencies(U),r.instantiateWasm)try{return r.instantiateWasm(t,e)}catch(t){p("Module.instantiateWasm callback failed with error: "+t),n(t)}(h||"function"!=typeof WebAssembly.instantiateStreaming||$(G)||"function"!=typeof fetch?a(o):fetch(G,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(o,(function(t){return p("wasm streaming compile failed: "+t),p("falling back to ArrayBuffer instantiation"),a(o)}))}))).catch(n)}(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.R).apply(null,arguments)},r._main=function(){return(r._main=r.asm.S).apply(null,arguments)},r._malloc=function(){return(le=r._malloc=r.asm.U).apply(null,arguments)}),fe=r._free=function(){return(fe=r._free=r.asm.V).apply(null,arguments)},de=r.___getTypeName=function(){return(de=r.___getTypeName=r.asm.W).apply(null,arguments)},pe=(r.__embind_initialize_bindings=function(){return(r.__embind_initialize_bindings=r.asm.X).apply(null,arguments)},r.___cxa_is_pointer_type=function(){return(pe=r.___cxa_is_pointer_type=r.asm.Y).apply(null,arguments)});function he(t){var e,n=r._main;try{var o=n(0,0);return v=e=o,se(e),o}catch(t){return function(t){if(t instanceof X||"unwind"==t)return v;u(1,t)}(t)}}function ge(t){function n(){ue||(ue=!0,r.calledRun=!0,P||(Q(j),Q(F),e(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),ye&&he(),function(){if(r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)t=r.postRun.shift(),V.unshift(t);var t;Q(V)}()))}t=t||i,U>0||(function(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)t=r.preRun.shift(),R.unshift(t);var t;Q(R)}(),U>0||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),n()}),1)):n()))}if(r.dynCall_viij=function(){return(r.dynCall_viij=r.asm.Z).apply(null,arguments)},r.dynCall_vij=function(){return(r.dynCall_vij=r.asm._).apply(null,arguments)},r.dynCall_iij=function(){return(r.dynCall_iij=r.asm.$).apply(null,arguments)},r.dynCall_viji=function(){return(r.dynCall_viji=r.asm.aa).apply(null,arguments)},r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.ba).apply(null,arguments)},r.dynCall_viijii=function(){return(r.dynCall_viijii=r.asm.ca).apply(null,arguments)},r.dynCall_iiiiij=function(){return(r.dynCall_iiiiij=r.asm.da).apply(null,arguments)},r.dynCall_iiiiijj=function(){return(r.dynCall_iiiiijj=r.asm.ea).apply(null,arguments)},r.dynCall_iiiiiijj=function(){return(r.dynCall_iiiiiijj=r.asm.fa).apply(null,arguments)},r.___start_em_js=638316,r.___stop_em_js=638383,B=function t(){ue||ge(),ue||(B=t)},r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();var ye=!0;return r.noInitialRun&&(ye=!1),ge(),t.ready});const Bn=zn,Wn=n.p+"17dd54813d5acc10bf8f.wasm";class Gn{constructor(){this._instance}get instance(){if(this._instance)return this._instance;throw new Error("ICRPolySeg is not initialized.")}async initialize(t={}){this._instance=await Bn({locateFile:t=>t.endsWith(".wasm")?Wn:t,...t})}}function Hn(t,e){return t.worldToIndex(e).map(Math.round)}class Kn{constructor(t,e,n=1){this.rows=new Map,this.height=1,this.width=1,this.depth=1,this.jMultiple=1,this.kMultiple=1,this.numComps=1,this.defaultValue=0,this.pixelDataConstructor=Uint8Array,this.get=t=>{const e=t%this.jMultiple,n=(t-e)/this.jMultiple,r=this.getRLE(e,n);return r?.value||this.defaultValue},this.getRun=(t,e)=>{const n=t+e*this.height;return this.rows.get(n)},this.set=(t,e)=>{if(void 0===e)throw new Error("Can't set undefined at "+t%this.width);const n=t%this.width,r=(t-n)/this.width,o=this.rows.get(r);if(!o)return void this.rows.set(r,[{start:n,end:n+1,value:e}]);const a=this.findIndex(o,n),i=o[a],s=o[a-1];if(!i)return s&&s.value===e&&s.end===n?void s.end++:void(o[a]={start:n,end:n+1,value:e});const{start:u,end:c,value:l}=i;if(e===l&&n>=u)return;const f={start:n,end:n+1,value:e},d=n>u,p=d?a+1:a,h=d?i:s;let g=d?o[a+1]:i;if(h?.value===e&&h?.end===n)return h.end++,void(g?.value===e&&g.start===n+1?(h.end=g.end,o.splice(a,1)):g?.start===n&&(g.start++,g.start===g.end&&(o.splice(a,1),g=o[a],g?.start===n+1&&g.value===e&&(h.end=g.end,o.splice(a,1)))));if(g?.value===e&&g.start===n+1)return g.start--,void(h?.end>n&&(h.end=n,h.end===h.start&&o.splice(a,1)));if(g?.start!==n||g.end!==n+1)n===g?.start&&g.start++,d&&c>n+1?o.splice(p,0,f,{start:n+1,end:h.end,value:h.value}):o.splice(p,0,f),h?.end>n&&(h.end=n);else{g.value=e;const t=o[a+1];t?.start==n+1&&t.value===e&&(o.splice(a+1,1),g.end=t.end)}},this.width=t,this.height=e,this.depth=n,this.jMultiple=t,this.kMultiple=this.jMultiple*e}getRLE(t,e,n=0){const r=this.rows.get(e+n*this.height);if(!r)return;const o=r[this.findIndex(r,t)];return t>=o?.start?o:void 0}findIndex(t,e){for(let n=0;n<t.length;n++){const{end:r}=t[n];if(e<r)return n}return t.length}clear(){this.rows.clear()}keys(){return[...this.rows.keys()]}getPixelData(t=0,e){e?e.fill(0):e=new this.pixelDataConstructor(this.width*this.height*this.numComps);const{width:n,height:r,numComps:o}=this;for(let a=0;a<r;a++){const r=this.getRun(a,t);if(r)if(1===o)for(const t of r){const r=a*n,{start:o,end:i,value:s}=t;for(let t=o;t<i;t++)e[r+t]=s}else for(const t of r){const r=a*n*o,{start:i,end:s,value:u}=t;for(let t=i;t<s;t+=o)for(let n=0;n<o;n++)e[r+t+n]=u[n]}}return e}}function $n(t,e,n){return Math.abs(t-e)<=n}function Yn(t){return"number"==typeof t}function qn(t){return"length"in t&&"number"==typeof t[0]}function Xn(t,e,n=1e-5){return typeof t==typeof e&&null!==t&&null!==e&&(Yn(t)&&Yn(e)?$n(t,e,n):!(!qn(t)||!qn(e))&&function(t,e,n=1e-5){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!$n(t[r],e[r],n))return!1;return!0}(t,e,n))}class Qn{constructor(t,e,n){this.modifiedSlices=new Set,this.boundsIJK=[[1/0,-1/0],[1/0,-1/0],[1/0,-1/0]],this.numComps=1,this.getAtIJK=(t,e,n)=>{const r=t+e*this.width+n*this.frameSize;return this._get(r)},this.setAtIJK=(t,e,n,r)=>{const o=t+e*this.width+n*this.frameSize;!1!==this._set(o,r)&&(this.modifiedSlices.add(n),Qn.addBounds(this.boundsIJK,[t,e,n]))},this.getAtIJKPoint=([t,e,n])=>this.getAtIJK(t,e,n),this.setAtIJKPoint=([t,e,n],r)=>this.setAtIJK(t,e,n,r),this.getAtIndex=t=>this._get(t),this.setAtIndex=(t,e)=>{if(!1!==this._set(t,e)){const e=this.toIJK(t);this.modifiedSlices.add(e[2]),Qn.addBounds(this.boundsIJK,e)}},this.forEach=(t,e)=>{const n=e?.boundsIJK||this.getBoundsIJK(),{isWithinObject:r}=e||{};if(this.map)for(const e of this.map.keys()){const n=this.toIJK(e),o={value:this._get(e),index:e,pointIJK:n};!1!==r?.(o)&&t(o)}else for(let e=n[2][0];e<=n[2][1];e++){const o=e*this.frameSize;for(let a=n[1][0];a<=n[1][1];a++){const i=o+a*this.width;for(let o=n[0][0],s=i+o;o<=n[0][1];o++,s++){const n={value:this.getAtIndex(s),index:s,pointIJK:[o,a,e]};!1!==r?.(n)&&t(n)}}}},this.dimensions=t,this.width=t[0],this.frameSize=this.width*t[1],this._get=e,this._set=n}addPoint(t){const e=Array.isArray(t)?t[0]+this.width*t[1]+this.frameSize*t[2]:t;this.points||(this.points=new Set),this.points.add(e)}getPoints(){return this.points?[...this.points].map((t=>this.toIJK(t))):[]}getPointIndices(){return this.points?[...this.points]:[]}toIJK(t){return[t%this.width,Math.floor(t%this.frameSize/this.width),Math.floor(t/this.frameSize)]}toIndex(t){return t[0]+t[1]*this.width+t[2]*this.frameSize}getBoundsIJK(){return this.boundsIJK[0][0]<this.dimensions[0]?this.boundsIJK:this.dimensions.map((t=>[0,t-1]))}clear(){this.map&&this.map.clear(),this.boundsIJK.map((t=>{t[0]=1/0,t[1]=-1/0})),this.modifiedSlices.clear(),this.points?.clear()}getArrayOfSlices(){return Array.from(this.modifiedSlices)}static addBounds(t,e){t||(t=[[1/0,-1/0],[1/0,-1/0],[1/0,-1/0]]),t[0][0]=Math.min(e[0],t[0][0]),t[0][1]=Math.max(e[0],t[0][1]),t[1][0]=Math.min(e[1],t[1][0]),t[1][1]=Math.max(e[1],t[1][1]),t[2][0]=Math.min(e[2],t[2][0]),t[2][1]=Math.max(e[2],t[2][1])}static createRGBVolumeVoxelManager(t,e,n){const r=new Qn(t,(t=>(t*=n,[e[t++],e[t++],e[t++]])),((t,n)=>{const r=!Xn(e[t*=3],n);return e[t++]=n[0],e[t++]=n[1],e[t++]=n[2],r}));return r.numComps=n,r.scalarData=e,r}static createVolumeVoxelManager(t,e,n=0){if(3!==t.length)throw new Error("Dimensions must be provided as [number, number, number] for [width, height, depth]");if(!n&&((n=e.length/t[0]/t[1]/t[2])>4||n<1||2===n))throw new Error(`Number of components ${n} must be 1, 3 or 4`);return n>1?Qn.createRGBVolumeVoxelManager(t,e,n):Qn.createNumberVolumeVoxelManager(t,e)}static createNumberVolumeVoxelManager(t,e){const n=new Qn(t,(t=>e[t]),((t,n)=>{const r=e[t]!==n;return e[t]=n,r}));return n.scalarData=e,n}static createMapVoxelManager(t){const e=new Map,n=new Qn(t,e.get.bind(e),((t,n)=>e.set(t,n)&&!0));return n.map=e,n}static createHistoryVoxelManager(t){const e=new Map,{dimensions:n}=t,r=new Qn(n,(t=>e.get(t)),(function(t,n){if(e.has(t))n===e.get(t)&&e.delete(t);else{const r=this.sourceVoxelManager.getAtIndex(t);if(r===n)return!1;e.set(t,r)}this.sourceVoxelManager.setAtIndex(t,n)}));return r.map=e,r.scalarData=t.scalarData,r.sourceVoxelManager=t,r}static createLazyVoxelManager(t,e){const n=new Map,[r,o,a]=t,i=r*o,s=new Qn(t,(t=>n.get(Math.floor(t/i))?.[t%i]),((t,a)=>{const s=Math.floor(t/i);let u=n.get(s);u||(u=e(r,o),n.set(s,u)),u[t%i]=a}));return s.map=n,s}static createRLEVoxelManager(t){const[e,n,r]=t,o=new Kn(e,n,r),a=new Qn(t,(t=>o.get(t)),((t,e)=>o.set(t,e)));return a.map=o,a.getPixelData=o.getPixelData.bind(o),a}static addInstanceToImage(t){const{width:e,height:n}=t,r=t.getPixelData();r?.length>=e*n?t.voxelManager=Qn.createVolumeVoxelManager([e,n,1],r):(t.voxelManager=Qn.createRLEVoxelManager([e,n,1]),t.getPixelData=t.voxelManager.getPixelData,t.sizeInBytes=5120)}}function Jn(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}}function Zn(t){let e=0;return t.filter(((t,n)=>n===e&&(e+=t+1,!0)))}function tr(t){let e=0;for(let n=0;n<t.length;)n+=t[n]+1,e++;return e}const er={extractCellSizes:Zn,getNumberOfCells:tr};function nr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};hn.extend(t,e,function(t){return{empty:!0,numberOfComponents:1,dataType:tn.UNSIGNED_INT,...t}}(n)),function(t,e){e.classHierarchy.push("vtkCellArray");const n={...t};t.getNumberOfCells=n=>void 0===e.numberOfCells||n?(e.cellSizes?e.numberOfCells=e.cellSizes.length:e.numberOfCells=tr(t.getData()),e.numberOfCells):e.numberOfCells,t.getCellSizes=n=>void 0===e.cellSizes||n?(e.cellSizes=Zn(t.getData()),e.cellSizes):e.cellSizes,t.resize=r=>{const o=t.getNumberOfTuples();n.resize(r);const a=t.getNumberOfTuples();a<o&&(0===a?(e.numberOfCells=0,e.cellSizes=[]):(e.numberOfCells=void 0,e.cellSizes=void 0))},t.setData=t=>{n.setData(t,1),e.numberOfCells=void 0,e.cellSizes=void 0},t.getCell=t=>{let n=t;const r=e.values[n++];return e.values.subarray(n,n+r)},t.insertNextCell=n=>{const r=t.getNumberOfCells();return t.insertNextTuples([n.length,...n]),++e.numberOfCells,null!=e.cellSizes&&e.cellSizes.push(n.length),r}}(t,e)}var rr={newInstance:Ot.newInstance(nr,"vtkCellArray"),extend:nr,...er};const{vtkErrorMacro:or}=Ot,ar=[1,-1,1,-1,1,-1];const ir={empty:!0,numberOfComponents:3,dataType:tn.FLOAT,bounds:[1,-1,1,-1,1,-1]};function sr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,ir,n),hn.extend(t,e,n),function(t,e){e.classHierarchy.push("vtkPoints"),t.getNumberOfPoints=t.getNumberOfTuples,t.setNumberOfPoints=function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;t.getNumberOfPoints()!==n&&(e.size=n*r,e.values=Ot.newTypedArray(e.dataType,e.size),t.setNumberOfComponents(r),t.modified())},t.setPoint=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t.setTuple(e,r)},t.getPoint=t.getTuple,t.findPoint=t.findTuple,t.insertNextPoint=(e,n,r)=>t.insertNextTuple([e,n,r]),t.getBounds=()=>{if(3===t.getNumberOfComponents()){const n=t.getRange(0);e.bounds[0]=n[0],e.bounds[1]=n[1];const r=t.getRange(1);e.bounds[2]=r[0],e.bounds[3]=r[1];const o=t.getRange(2);return e.bounds[4]=o[0],e.bounds[5]=o[1],e.bounds}if(2!==t.getNumberOfComponents())return or(`getBounds called on an array with components of\n        ${t.getNumberOfComponents()}`),ar;const n=t.getRange(0);e.bounds[0]=n[0],e.bounds[1]=n[1];const r=t.getRange(1);return e.bounds[2]=r[0],e.bounds[3]=r[1],e.bounds[4]=0,e.bounds[5]=0,e.bounds},t.computeBounds=t.getBounds,t.setNumberOfComponents(e.numberOfComponents<2?3:e.numberOfComponents)}(t,e)}var ur={newInstance:Ot.newInstance(sr,"vtkPoints"),extend:sr};const cr={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function lr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,cr,n),Ot.obj(t,e),e.points||(e.points=ur.newInstance()),Ot.get(t,e,["points","pointsIds"]),function(t,e){e.classHierarchy.push("vtkCell"),t.initialize=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n){e.pointsIds=n;let r=e.points.getData();r.length!==3*e.pointsIds.length&&(r=Ot.newTypedArray(t.getDataType(),3*e.pointsIds.length));const o=t.getData();e.pointsIds.forEach(((t,e)=>{let n=3*t,a=3*e;r[a]=o[n],r[++a]=o[++n],r[++a]=o[++n]})),e.points.setData(r)}else{e.points=t,e.pointsIds=new Array(t.getNumberOfPoints());for(let n=t.getNumberOfPoints()-1;n>=0;--n)e.pointsIds[n]=n}},t.getBounds=()=>{const t=e.points.getNumberOfPoints(),n=[];if(t){e.points.getPoint(0,n),e.bounds[0]=n[0],e.bounds[1]=n[0],e.bounds[2]=n[1],e.bounds[3]=n[1],e.bounds[4]=n[2],e.bounds[5]=n[2];for(let r=1;r<t;r++)e.points.getPoint(r,n),e.bounds[0]=n[0]<e.bounds[0]?n[0]:e.bounds[0],e.bounds[1]=n[0]>e.bounds[1]?n[0]:e.bounds[1],e.bounds[2]=n[1]<e.bounds[2]?n[1]:e.bounds[2],e.bounds[3]=n[1]>e.bounds[3]?n[1]:e.bounds[3],e.bounds[4]=n[2]<e.bounds[4]?n[2]:e.bounds[4],e.bounds[5]=n[2]>e.bounds[5]?n[2]:e.bounds[5]}else Zt(e.bounds);return e.bounds},t.getLength2=()=>{t.getBounds();let n=0,r=0;for(let t=0;t<3;t++)r=e.bounds[2*t+1]-e.bounds[2*t],n+=r*r;return n},t.getParametricDistance=t=>{let e,n=0;for(let r=0;r<3;r++)e=t[r]<0?-t[r]:t[r]>1?t[r]-1:0,e>n&&(n=e);return n},t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.deepCopy=t=>{t.initialize(e.points,e.pointsIds)},t.getCellDimension=()=>{},t.intersectWithLine=(t,e,n,r,o,a,i)=>{},t.evaluatePosition=(t,e,n,r,o,a)=>{Ot.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}(t,e)}var fr={newInstance:Ot.newInstance(lr,"vtkCell"),extend:lr};const dr={array:null,maxId:0,extend:0};function pr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,dr,n),Ot.obj(t,e),function(t,e){e.classHierarchy.push("vtkCellLinks"),t.buildLinks=n=>{const r=n.getPoints().getNumberOfPoints(),o=n.getNumberOfCells(),a=new Uint32Array(r);if(n.isA("vtkPolyData")){for(let e=0;e<o;++e){const{cellPointIds:r}=n.getCellPoints(e);r.forEach((e=>{t.incrementLinkCount(e)}))}t.allocateLinks(r),e.maxId=r-1;for(let e=0;e<o;++e){const{cellPointIds:r}=n.getCellPoints(e);r.forEach((n=>{t.insertCellReference(n,a[n]++,e)}))}}else{for(let e=0;e<o;e++)fr.newInstance().getPointsIds().forEach((e=>{t.incrementLinkCount(e)}));t.allocateLinks(r),e.maxId=r-1;for(let e=0;e<o;++e)fr.newInstance().getPointsIds().forEach((n=>{t.insertCellReference(n,a[n]++,e)}))}},t.allocate=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;e.array=Array(t).fill().map((()=>({ncells:0,cells:null}))),e.extend=n,e.maxId=-1},t.initialize=()=>{e.array=null},t.getLink=t=>e.array[t],t.getNcells=t=>e.array[t].ncells,t.getCells=t=>e.array[t].cells,t.insertNextPoint=t=>{e.array.push({ncells:t,cells:Array(t)}),++e.maxId},t.insertNextCellReference=(t,n)=>{e.array[t].cells[e.array[t].ncells++]=n},t.deletePoint=t=>{e.array[t].ncells=0,e.array[t].cells=null},t.removeCellReference=(t,n)=>{e.array[n].cells=e.array[n].cells.filter((e=>e!==t)),e.array[n].ncells=e.array[n].cells.length},t.addCellReference=(t,n)=>{e.array[n].cells[e.array[n].ncells++]=t},t.resizeCellList=(t,n)=>{e.array[t].cells.length=n},t.squeeze=()=>{!function(t,e){let n=e;for(e>=t.array.length&&(n+=t.array.length);n>t.array.length;)t.array.push({ncells:0,cells:null});t.array.length=n}(e,e.maxId+1)},t.reset=()=>{e.maxId=-1},t.deepCopy=t=>{e.array=[...t.array],e.extend=t.extend,e.maxId=t.maxId},t.incrementLinkCount=t=>{++e.array[t].ncells},t.allocateLinks=t=>{for(let n=0;n<t;++n)e.array[n].cells=new Array(e.array[n].ncells)},t.insertCellReference=(t,n,r)=>{e.array[t].cells[n]=r}}(t,e)}var hr={newInstance:Ot.newInstance(pr,"vtkCellLinks"),extend:pr};const gr={VTK_EMPTY_CELL:0,VTK_VERTEX:1,VTK_POLY_VERTEX:2,VTK_LINE:3,VTK_POLY_LINE:4,VTK_TRIANGLE:5,VTK_TRIANGLE_STRIP:6,VTK_POLYGON:7,VTK_PIXEL:8,VTK_QUAD:9,VTK_TETRA:10,VTK_VOXEL:11,VTK_HEXAHEDRON:12,VTK_WEDGE:13,VTK_PYRAMID:14,VTK_PENTAGONAL_PRISM:15,VTK_HEXAGONAL_PRISM:16,VTK_QUADRATIC_EDGE:21,VTK_QUADRATIC_TRIANGLE:22,VTK_QUADRATIC_QUAD:23,VTK_QUADRATIC_POLYGON:36,VTK_QUADRATIC_TETRA:24,VTK_QUADRATIC_HEXAHEDRON:25,VTK_QUADRATIC_WEDGE:26,VTK_QUADRATIC_PYRAMID:27,VTK_BIQUADRATIC_QUAD:28,VTK_TRIQUADRATIC_HEXAHEDRON:29,VTK_QUADRATIC_LINEAR_QUAD:30,VTK_QUADRATIC_LINEAR_WEDGE:31,VTK_BIQUADRATIC_QUADRATIC_WEDGE:32,VTK_BIQUADRATIC_QUADRATIC_HEXAHEDRON:33,VTK_BIQUADRATIC_TRIANGLE:34,VTK_CUBIC_LINE:35,VTK_CONVEX_POINT_SET:41,VTK_POLYHEDRON:42,VTK_PARAMETRIC_CURVE:51,VTK_PARAMETRIC_SURFACE:52,VTK_PARAMETRIC_TRI_SURFACE:53,VTK_PARAMETRIC_QUAD_SURFACE:54,VTK_PARAMETRIC_TETRA_REGION:55,VTK_PARAMETRIC_HEX_REGION:56,VTK_HIGHER_ORDER_EDGE:60,VTK_HIGHER_ORDER_TRIANGLE:61,VTK_HIGHER_ORDER_QUAD:62,VTK_HIGHER_ORDER_POLYGON:63,VTK_HIGHER_ORDER_TETRAHEDRON:64,VTK_HIGHER_ORDER_WEDGE:65,VTK_HIGHER_ORDER_PYRAMID:66,VTK_HIGHER_ORDER_HEXAHEDRON:67,VTK_LAGRANGE_CURVE:68,VTK_LAGRANGE_TRIANGLE:69,VTK_LAGRANGE_QUADRILATERAL:70,VTK_LAGRANGE_TETRAHEDRON:71,VTK_LAGRANGE_HEXAHEDRON:72,VTK_LAGRANGE_WEDGE:73,VTK_LAGRANGE_PYRAMID:74,VTK_NUMBER_OF_CELL_TYPES:75},yr=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];const mr={getClassNameFromTypeId:function(t){return t<yr.length?yr[t]:"UnknownClass"},getTypeIdFromClassName:function(t){return yr.findIndex(t)},isLinear:function(t){return t<gr.VTK_QUADRATIC_EDGE||t===gr.VTK_CONVEX_POINT_SET||t===gr.VTK_POLYHEDRON},hasSubCells:function(t){return t===gr.VTK_TRIANGLE_STRIP||t===gr.VTK_POLY_LINE||t===gr.VTK_POLY_VERTEX}};const vr={size:0,maxId:-1,extend:1e3};function br(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,vr,n),Ot.obj(t,e),Ot.get(t,e,["size","maxId","extend"]),Ot.getArray(t,e,["typeArray","locationArray"]),function(t,e){e.classHierarchy.push("vtkCellTypes"),t.allocate=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;e.size=t>0?t:1,e.extend=n>0?n:1,e.maxId=-1,e.typeArray=new Uint8Array(t),e.locationArray=new Uint32Array(t)},t.insertCell=(t,n,r)=>{e.typeArray[t]=n,e.locationArray[t]=r,t>e.maxId&&(e.maxId=t)},t.insertNextCell=(n,r)=>(t.insertCell(++e.maxId,n,r),e.maxId),t.setCellTypes=(t,n,r)=>{e.size=t,e.typeArray=n,e.locationArray=r,e.maxId=t-1},t.getCellLocation=t=>e.locationArray[t],t.deleteCell=t=>{e.typeArray[t]=gr.VTK_EMPTY_CELL},t.getNumberOfTypes=()=>e.maxId+1,t.isType=e=>{const n=t.getNumberOfTypes();for(let r=0;r<n;++r)if(e===t.getCellType(r))return!0;return!1},t.insertNextType=e=>t.insertNextCell(e,-1),t.getCellType=t=>e.typeArray[t],t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{t.allocate(n.getSize(),n.getExtend()),e.typeArray.set(n.getTypeArray()),e.locationArray.set(n.getLocationArray()),e.maxId=n.getMaxId()}}(t,e)}var Ar={newInstance:Ot.newInstance(br,"vtkCellTypes"),extend:br,...mr};var Mr={IntersectionState:{NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2}};const{IntersectionState:Tr}=Mr;function wr(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o={t:Number.MIN_VALUE,distance:0},a=[];let i;a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2];const s=a[0]*(t[0]-e[0])+a[1]*(t[1]-e[1])+a[2]*(t[2]-e[2]),u=Bt(a,a);let c=1e-5*s;return 0!==u&&(o.t=s/u),c<0&&(c=-c),-c<u&&u<c||u<=0||o.t<0?i=e:o.t>1?i=n:(i=a,a[0]=e[0]+o.t*a[0],a[1]=e[1]+o.t*a[1],a[2]=e[2]+o.t*a[2]),r&&(r[0]=i[0],r[1]=i[1],r[2]=i[2]),o.distance=Kt(i,t),o}function Ir(t,e,n,r,o,a){const i=[],s=[],u=[];o[0]=0,a[0]=0,Ut(e,t,i),Ut(r,n,s),Ut(n,t,u);const c=[Bt(i,i),-Bt(i,s),-Bt(i,s),Bt(s,s)],l=[];if(l[0]=Bt(i,u),l[1]=-Bt(s,u),0===Jt(c,l,2)){let i=Number.MAX_VALUE;const s=[t,e,n,r],u=[n,n,t,t],c=[r,r,e,e];let l;a[0],a[0],o[0],o[0],o[0],o[0],a[0],a[0];for(let t=0;t<4;t++)l=wr(s[t],u[t],c[t]),l.distance<i&&(i=l.distance);return Tr.ON_LINE}return o[0]=l[0],a[0]=l[1],o[0]>=0&&o[0]<=1&&a[0]>=0&&a[0]<=1?Tr.YES_INTERSECTION:Tr.NO_INTERSECTION}const xr={distanceToLine:wr,intersection:Ir};const Er={orientations:null};function Or(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,Er,n),fr.extend(t,e,n),Ot.setGet(t,e,["orientations"]),function(t,e){e.classHierarchy.push("vtkLine"),t.getCellDimension=()=>1,t.intersectWithLine=(t,n,r,o,a)=>{const i={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};a[1]=0,a[2]=0;const s=[],u=[],c=[];e.points.getPoint(0,u),e.points.getPoint(1,c);const l=[],f=[],d=Ir(t,n,u,c,l,f);var p;if(i.t=l[0],i.betweenPoints=(p=i.t)>=0&&p<=1,a[0]=f[0],d===Tr.YES_INTERSECTION){for(let e=0;e<3;e++)o[e]=u[e]+a[0]*(c[e]-u[e]),s[e]=t[e]+i.t*(n[e]-t[e]);if(Kt(o,s)<=r*r)return i.intersect=1,i}else{let e;if(i.t<0)return e=wr(t,u,c,o),e.distance<=r*r?(i.t=0,i.intersect=1,i.betweenPoints=!0,i):i;if(i.t>1)return e=wr(n,u,c,o),e.distance<=r*r?(i.t=1,i.intersect=1,i.betweenPoints=!0,i):i;if(a[0]<0)return a[0]=0,e=wr(u,t,n,o),i.t=e.t,e.distance<=r*r?(i.intersect=1,i):i;if(a[0]>1)return a[0]=1,e=wr(c,t,n,o),i.t=e.t,e.distance<=r*r?(i.intersect=1,i):i}return i},t.evaluateLocation=(t,n,r)=>{const o=[],a=[];e.points.getPoint(0,o),e.points.getPoint(1,a);for(let e=0;e<3;e++)n[e]=o[e]+t[0]*(a[e]-o[e]);r[0]=1-t[0],r[1]=t[0]},t.evaluateOrientation=(t,n,r)=>!!e.orientations&&(oe.quat.slerp(n,e.orientations[0],e.orientations[1],t[0]),r[0]=1-t[0],r[1]=t[0],!0)}(t,e)}var Pr={newInstance:Ot.newInstance(Or,"vtkLine"),extend:Or,...xr,...Mr};const _r={};function Cr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,_r,n),Sn.extend(t,e,n),Ot.setGet(t,e,["points"]),function(t,e){e.classHierarchy.push("vtkPointSet"),e.points?e.points=O(e.points):e.points=ur.newInstance(),t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.getBounds=()=>e.points.getBounds(),t.computeBounds=()=>{t.getBounds()};const n=t.shallowCopy;t.shallowCopy=function(t){n(t,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),e.points=ur.newInstance(),e.points.shallowCopy(t.getPoints())}}(t,e)}var Sr={newInstance:Ot.newInstance(Cr,"vtkPointSet"),extend:Cr};function Dr(t,e,n,r){const o=n[0]-e[0],a=n[1]-e[1],i=n[2]-e[2],s=t[0]-e[0],u=t[1]-e[1],c=t[2]-e[2];r[0]=a*c-i*u,r[1]=i*s-o*c,r[2]=o*u-a*s}function Nr(t,e,n,r){Dr(t,e,n,r);const o=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);0!==o&&(r[0]/=o,r[1]/=o,r[2]/=o)}const kr={computeNormalDirection:Dr,computeNormal:Nr,intersectWithTriangle:function(t,e,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1e-6,s=!1;const u=[],c=[],l=[],f=[],d=[];Nr(t,e,n,f),Nr(r,o,a,d);const p=-Bt(f,t),h=-Bt(d,r),g=[Bt(d,t)+h,Bt(d,e)+h,Bt(d,n)+h];if(g[0]*g[1]>i&&g[0]*g[2]>i)return{intersect:!1,coplanar:s,pt1:u,pt2:c,surfaceId:l};const y=[Bt(f,r)+p,Bt(f,o)+p,Bt(f,a)+p];if(y[0]*y[1]>i&&y[0]*y[2]>i)return{intersect:!1,coplanar:s,pt1:u,pt2:c,surfaceId:l};if(Math.abs(f[0]-d[0])<1e-9&&Math.abs(f[1]-d[1])<1e-9&&Math.abs(f[2]-d[2])<1e-9&&Math.abs(p-h)<1e-9)return s=!0,{intersect:!1,coplanar:s,pt1:u,pt2:c,surfaceId:l};const m=[t,e,n],v=[r,o,a],b=Bt(f,d),A=(p-h*b)/(b*b-1),M=(h-p*b)/(b*b-1),T=[A*f[0]+M*d[0],A*f[1]+M*d[1],A*f[2]+M*d[2]],w=Wt(f,d,[]);Ht(w);let I=0,x=0;const E=[],O=[];let P,_,C=50,S=50;for(let e=0;e<3;e++){const n=e,o=(e+1)%3,a=me.intersectWithLine(m[n],m[o],r,d);a.intersection&&a.t>0-i&&a.t<1+i&&(a.t<1+i&&a.t>1-i&&(C=I),E[I++]=Bt(a.x,w)-Bt(T,w));const s=me.intersectWithLine(v[n],v[o],t,f);s.intersection&&s.t>0-i&&s.t<1+i&&(s.t<1+i&&s.t>1-i&&(S=x),O[x++]=Bt(s.x,w)-Bt(T,w))}if(I>2){I--;const t=E[2];E[2]=E[C],E[C]=t}if(x>2){x--;const t=O[2];O[2]=O[S],O[S]=t}if(2!==I||2!==x)return{intersect:!1,coplanar:s,pt1:u,pt2:c,surfaceId:l};if(Number.isNaN(E[0])||Number.isNaN(E[1])||Number.isNaN(O[0])||Number.isNaN(O[1]))return{intersect:!1,coplanar:s,pt1:u,pt2:c,surfaceId:l};if(E[0]>E[1]){const t=E[1];E[1]=E[0],E[0]=t}if(O[0]>O[1]){const t=O[1];O[1]=O[0],O[0]=t}return E[1]<O[0]||O[1]<E[0]?{intersect:!1,coplanar:s,pt1:u,pt2:c,surfaceId:l}:(E[0]<O[0]?E[1]<O[1]?(l[0]=2,l[1]=1,P=O[0],_=E[1]):(l[0]=2,l[1]=2,P=O[0],_=O[1]):E[1]<O[1]?(l[0]=1,l[1]=1,P=E[0],_=E[1]):(l[0]=1,l[1]=2,P=E[0],_=O[1]),zt(T,w,P,u),zt(T,w,_,c),{intersect:!0,coplanar:s,pt1:u,pt2:c,surfaceId:l})}};const Lr={};function Rr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,Lr,n),fr.extend(t,e,n),function(t,e){e.classHierarchy.push("vtkTriangle"),t.getCellDimension=()=>2,t.intersectWithLine=(n,r,o,a,i)=>{const s={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};i[2]=0;const u=[],c=o*o,l=[],f=[],d=[];e.points.getPoint(0,l),e.points.getPoint(1,f),e.points.getPoint(2,d);const p=[],h=[];if(Nr(l,f,d,p),0!==p[0]||0!==p[1]||0!==p[2]){const e=me.intersectWithLine(n,r,l,p);if(s.betweenPoints=e.betweenPoints,s.t=e.t,a[0]=e.x[0],a[1]=e.x[1],a[2]=e.x[2],!e.intersection)return i[0]=0,i[1]=0,s.intersect=0,s;const o=t.evaluatePosition(a,u,i,h);if(o.evaluation>=0)return o.dist2<=c?(s.intersect=1,s):(s.intersect=o.evaluation,s)}const g=Kt(l,f),y=Kt(f,d),m=Kt(d,l);e.line||(e.line=Pr.newInstance()),g>y&&g>m?(e.line.getPoints().setPoint(0,l),e.line.getPoints().setPoint(1,f)):y>m&&y>g?(e.line.getPoints().setPoint(0,f),e.line.getPoints().setPoint(1,d)):(e.line.getPoints().setPoint(0,d),e.line.getPoints().setPoint(1,l));const v=e.line.intersectWithLine(n,r,o,a,i);if(s.betweenPoints=v.betweenPoints,s.t=v.t,v.intersect){const t=[],e=[],n=[];for(let r=0;r<3;r++)t[r]=l[r]-d[r],e[r]=f[r]-d[r],n[r]=a[r]-d[r];return i[0]=Bt(n,t)/m,i[1]=Bt(n,e)/y,s.intersect=1,s}return i[0]=0,i[1]=0,s.intersect=0,s},t.evaluatePosition=(t,n,r,o)=>{const a={subId:0,dist2:0,evaluation:-1};let i,s;const u=[],c=[],l=[],f=[];let d;const p=[],h=[],g=[];let y=0,m=0;const v=[];let b,A,M,T=[];const w=[],I=[],x=[];a.subId=0,r[2]=0,e.points.getPoint(1,u),e.points.getPoint(2,c),e.points.getPoint(0,l),Dr(u,c,l,f),me.generalizedProjectPoint(t,u,f,x);let E=0;for(i=0;i<3;i++)d=f[i]<0?-f[i]:f[i],d>E&&(E=d,m=i);for(s=0,i=0;i<3;i++)i!==m&&(v[s++]=i);for(i=0;i<2;i++)p[i]=x[v[i]]-l[v[i]],h[i]=u[v[i]]-l[v[i]],g[i]=c[v[i]]-l[v[i]];if(y=$t(h,g),0===y)return r[0]=0,r[1]=0,a.evaluation=-1,a;if(r[0]=$t(p,g)/y,r[1]=$t(h,p)/y,o[0]=1-(r[0]+r[1]),o[1]=r[0],o[2]=r[1],o[0]>=0&&o[0]<=1&&o[1]>=0&&o[1]<=1&&o[2]>=0&&o[2]<=1)n&&(a.dist2=Kt(x,t),n[0]=x[0],n[1]=x[1],n[2]=x[2]),a.evaluation=1;else{let e;if(n)if(o[1]<0&&o[2]<0)for(b=Kt(t,l),A=Pr.distanceToLine(t,u,l,e,w),M=Pr.distanceToLine(t,l,c,e,I),b<A?(a.dist2=b,T=l):(a.dist2=A,T=w),M<a.dist2&&(a.dist2=M,T=I),i=0;i<3;i++)n[i]=T[i];else if(o[2]<0&&o[0]<0)for(b=Kt(t,u),A=Pr.distanceToLine(t,u,l,e,w),M=Pr.distanceToLine(t,u,c,e,I),b<A?(a.dist2=b,T=u):(a.dist2=A,T=w),M<a.dist2&&(a.dist2=M,T=I),i=0;i<3;i++)n[i]=T[i];else if(o[1]<0&&o[0]<0)for(b=Kt(t,c),A=Pr.distanceToLine(t,c,l,e,w),M=Pr.distanceToLine(t,u,c,e,I),b<A?(a.dist2=b,T=c):(a.dist2=A,T=w),M<a.dist2&&(a.dist2=M,T=I),i=0;i<3;i++)n[i]=T[i];else if(o[0]<0){const e=Pr.distanceToLine(t,u,c,n);a.dist2=e.distance}else if(o[1]<0){const e=Pr.distanceToLine(t,c,l,n);a.dist2=e.distance}else if(o[2]<0){const e=Pr.distanceToLine(t,u,l,n);a.dist2=e.distance}a.evaluation=0}return a},t.evaluateLocation=(t,n,r)=>{const o=[],a=[],i=[];e.points.getPoint(0,o),e.points.getPoint(1,a),e.points.getPoint(2,i);const s=1-t[0]-t[1];for(let e=0;e<3;e++)n[e]=o[e]*s+a[e]*t[0]+i[e]*t[1];r[0]=s,r[1]=t[0],r[2]=t[1]},t.getParametricDistance=t=>{let e,n=0;const r=[];r[0]=t[0],r[1]=t[1],r[2]=1-t[0]-t[1];for(let t=0;t<3;t++)e=r[t]<0?-r[t]:r[t]>1?r[t]-1:0,e>n&&(n=e);return n}}(t,e)}var jr={newInstance:Ot.newInstance(Rr,"vtkTriangle"),extend:Rr,...kr};const Fr=["verts","lines","polys","strips"];const{vtkWarningMacro:Vr}=Ot,Ur={[gr.VTK_LINE]:Pr,[gr.VTK_POLY_LINE]:Pr,[gr.VTK_TRIANGLE]:jr};const zr={};function Br(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,zr,n),Sr.extend(t,e,n),Ot.get(t,e,["cells","links"]),Ot.setGet(t,e,["verts","lines","polys","strips"]),function(t,e){e.classHierarchy.push("vtkPolyData"),Fr.forEach((n=>{var r;t[`getNumberOf${r=n,r.replace(/(?:^\w|[A-Z]|\b\w)/g,(t=>t.toUpperCase())).replace(/\s+/g,"")}`]=()=>e[n].getNumberOfCells(),e[n]?e[n]=O(e[n]):e[n]=rr.newInstance()})),t.getNumberOfCells=()=>Fr.reduce(((t,n)=>t+e[n].getNumberOfCells()),0);const n=t.shallowCopy;t.shallowCopy=function(t){n(t,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),Fr.forEach((n=>{e[n]=rr.newInstance(),e[n].shallowCopy(t.getReferenceByName(n))}))},t.buildCells=()=>{const n=t.getNumberOfVerts(),r=t.getNumberOfLines(),o=t.getNumberOfPolys(),a=t.getNumberOfStrips(),i=n+r+o+a,s=new Uint8Array(i);let u=s;const c=new Uint32Array(i);let l=c;if(n){let t=0;e.verts.getCellSizes().forEach(((e,n)=>{l[n]=t,u[n]=e>1?gr.VTK_POLY_VERTEX:gr.VTK_VERTEX,t+=e+1})),l=l.subarray(n),u=u.subarray(n)}if(r){let t=0;e.lines.getCellSizes().forEach(((e,n)=>{l[n]=t,u[n]=e>2?gr.VTK_POLY_LINE:gr.VTK_LINE,1===e&&Vr("Building VTK_LINE ",n," with only one point, but VTK_LINE needs at least two points. Check the input."),t+=e+1})),l=l.subarray(r),u=u.subarray(r)}if(o){let t=0;e.polys.getCellSizes().forEach(((e,n)=>{switch(l[n]=t,e){case 3:u[n]=gr.VTK_TRIANGLE;break;case 4:u[n]=gr.VTK_QUAD;break;default:u[n]=gr.VTK_POLYGON}e<3&&Vr("Building VTK_TRIANGLE ",n," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),t+=e+1})),l+=l.subarray(o),u+=u.subarray(o)}if(a){let t=0;u.fill(gr.VTK_TRIANGLE_STRIP,0,a),e.strips.getCellSizes().forEach(((e,n)=>{l[n]=t,t+=e+1}))}e.cells=Ar.newInstance(),e.cells.setCellTypes(i,s,c)},t.buildLinks=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;void 0===e.cells&&t.buildCells(),e.links=hr.newInstance(),n>0?e.links.allocate(n):e.links.allocate(t.getPoints().getNumberOfPoints()),e.links.buildLinks(t)},t.getCellType=t=>e.cells.getCellType(t),t.getCellPoints=n=>{const r=t.getCellType(n);let o=null;switch(r){case gr.VTK_VERTEX:case gr.VTK_POLY_VERTEX:o=e.verts;break;case gr.VTK_LINE:case gr.VTK_POLY_LINE:o=e.lines;break;case gr.VTK_TRIANGLE:case gr.VTK_QUAD:case gr.VTK_POLYGON:o=e.polys;break;case gr.VTK_TRIANGLE_STRIP:o=e.strips;break;default:return o=null,{type:0,cellPointIds:null}}const a=e.cells.getCellLocation(n);return{cellType:r,cellPointIds:o.getCell(a)}},t.getPointCells=t=>e.links.getCells(t),t.getCellEdgeNeighbors=(t,n,r)=>{const o=e.links.getLink(n),a=e.links.getLink(r);return o.cells.filter((e=>e!==t&&-1!==a.cells.indexOf(e)))},t.getCell=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=t.getCellPoints(e),o=n||Ur[r.cellType].newInstance();return o.initialize(t.getPoints(),r.cellPointIds),o}}(t,e)}var Wr={newInstance:Ot.newInstance(Br,"vtkPolyData"),extend:Br};const Gr={Forward:1,Backward:-1},Hr=new Set;const Kr={};function $r(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,Kr,n),Ot.obj(t,e),Ot.algo(t,e,1,1),function(t,e){t.requestData=(e,n)=>{const[r]=e;n[0]||(n[0]=Wr.newInstance());const[o]=n;t.extractContours(r,o),o.modified()},t.traverseLoop=(t,e,n,r,o)=>{let a=n,i=r,s=!1,u=0;for(;!s;){const{cellPointIds:n}=t.getCellPoints(a);if(!n)continue;i=n[0]!==i?n[0]:n[1],u++;const c=e*u;o.push({t:c,ptId:i});const l=t.getPointCells(i);if(2!==l.length||i===r)return i;2===l.length?(a=l[0]!==a?l[0]:l[1],Hr.add(a)):s=!0}return i},t.extractContours=(e,n)=>{const r=[];Hr.clear();const o=e.getLines();n.getPoints().setData(Float32Array.from(e.getPoints().getData()));for(let n=0;n<o.getNumberOfCells();n++){if(Hr.has(n))continue;const{cellPointIds:o}=e.getCellPoints(n);if(!o)continue;Hr.add(n);const a=o[0],i=[];i.push({t:0,ptId:a}),a!==t.traverseLoop(e,Gr.Forward,n,a,i)&&(t.traverseLoop(e,Gr.Backward,n,a,i),i.sort(((t,e)=>t.t<e.t?-1:1)),i.length&&i[0].ptId!==i[i.length-1]?.ptId&&i.push({...i[i.length-1]})),i.length&&r.push(i)}const a=n.getLines();a.resize(0),r.forEach((t=>{a.insertNextCell(t.map((t=>t.ptId)))}))}}(t)}var Yr={newInstance:Ot.newInstance($r,"vtkContourLoopExtraction"),extend:$r};const{vtkErrorMacro:qr}=Pt;function Xr(t,e){e.classHierarchy.push("vtkCutter");const n={...t};function r(t,n){const r=t.getPoints(),o=r.getData(),a=r.getNumberOfPoints(),i=[],s=[],u=[];(!e.cutScalars||e.cutScalars.length<a)&&(e.cutScalars=new Float32Array(a));let c=0,l=0;for(;c<o.length;)e.cutScalars[l++]=e.cutFunction.evaluateFunction(o[c++],o[c++],o[c++]);const f=[],d=new Array(3),p=new Array(3),h=[];for(const n=function(t){const e=t.getPolys().getData(),n=t.getStrips().getData(),r={cellSize:0,cell:[],done:!1,polyIdx:0,stripIdx:0,remainingStripLength:0,next(){if(r.polyIdx<e.length){r.cellSize=e[r.polyIdx];const t=r.polyIdx+1,n=t+r.cellSize;r.polyIdx=n;let o=0;for(let a=t;a<n;++a)r.cell[o++]=e[a]}else if(r.stripIdx<n.length){r.cellSize=3,0===r.remainingStripLength&&(r.remainingStripLength=n[r.stripIdx]-2,r.stripIdx+=3);const t=r.stripIdx-2,e=r.stripIdx+1;r.stripIdx++,r.remainingStripLength--;let o=0;for(let a=t;a<e;++a)r.cell[o++]=n[a]}else{if(r.done)throw new Error("Iterator is done");r.done=!0}}};return r.next(),r}(t);!n.done;n.next()){if(n.cellSize<=2)continue;for(let t=0;t<n.cellSize;)h[t]=e.cutScalars[n.cell[t++]];const t=h[0]>0;let r=!0;for(let e=1;e<n.cell.length;e++){if(h[e]>0!==t){r=!1;break}}if(r)continue;const a=[];for(let t=0;t<n.cellSize;t++){const r=t+1===n.cellSize?0:t+1,i=h[t]>0;if(h[r]>0===i)continue;let s=t,u=r,c=h[u]-h[s];c<=0&&(s=r,u=t,c*=-1);let l=0;0!==c&&(l=(e.cutValue-h[s])/c);const f=n.cell[s],g=n.cell[u];d[0]=o[3*f],d[1]=o[3*f+1],d[2]=o[3*f+2],p[0]=o[3*g],p[1]=o[3*g+1],p[2]=o[3*g+2];const y=[d[0]+l*(p[0]-d[0]),d[1]+l*(p[1]-d[1]),d[2]+l*(p[2]-d[2])];a.push({pointEdge1:f,pointEdge2:g,intersectedPoint:y,newPointID:-1})}for(let t=0;t<a.length;t++){const e=a[t];let n=!1;for(let r=0;r<f.length;r++){const o=f[r],i=e.pointEdge1===o.pointEdge1&&e.pointEdge2===o.pointEdge2,s=e.intersectedPoint[0]===o.intersectedPoint[0]&&e.intersectedPoint[1]===o.intersectedPoint[1]&&e.intersectedPoint[2]===o.intersectedPoint[2];if(i||s){n=!0,a[t].newPointID=f[r].newPointID;break}}n||(i.push(e.intersectedPoint[0]),i.push(e.intersectedPoint[1]),i.push(e.intersectedPoint[2]),a[t].newPointID=i.length/3-1,f.push(a[t]))}const c=a.length;2===c?s.push(c,a[0].newPointID,a[1].newPointID):c>2&&(u.push(c),a.forEach((t=>{u.push(t.newPointID)})))}n.getPoints().setData(G(r.getDataType(),i),3),0!==s.length&&n.getLines().setData(Uint16Array.from(s)),0!==u.length&&n.getPolys().setData(Uint16Array.from(u))}t.getMTime=()=>{let t=n.getMTime();return e.cutFunction?(t=Math.max(t,e.cutFunction.getMTime()),t):t},t.requestData=(t,n)=>{const o=t[0];if(!o)return void qr("Invalid or missing input");if(!e.cutFunction)return void qr("Missing cut function");const a=Wr.newInstance();r(o,a),n[0]=a}}const Qr={cutFunction:null,cutScalars:null,cutValue:0};function Jr(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(e,Qr,n),tt(t,e),ft(t,e,1,1),it(t,e,["cutFunction","cutValue"]),Xr(t,e)}var Zr={newInstance:ht(Jr,"vtkCutter"),extend:Jr};const to=.001,{EPSILON:eo}=t;function no(t,e,n=!1){let r=1/0,o=n?-1/0:0,a=1/0,i=n?-1/0:0,s=1/0,u=n?-1/0:0;const c=3===t[0]?.length;for(let e=0;e<t.length;e++){const n=t[e];r=Math.min(n[0],r),o=Math.max(n[0],o),a=Math.min(n[1],a),i=Math.max(n[1],i),c&&(s=Math.min(n[2]??s,s),u=Math.max(n[2]??u,u))}return e?(r=Math.max(n?e[0]+eo:0,r),o=Math.min(n?e[0]-eo:e[0]-1,o),a=Math.max(n?e[1]+eo:0,a),i=Math.min(n?e[1]-eo:e[1]-1,i),c&&3===e.length&&(s=Math.max(n?e[2]+eo:0,s),u=Math.min(n?e[2]-eo:e[2]-1,u))):n||(r=Math.max(0,r),o=Math.min(1/0,o),a=Math.max(0,a),i=Math.min(1/0,i),c&&(s=Math.max(0,s),u=Math.min(1/0,u))),c?[[r,o],[a,i],[s,u]]:[[r,o],[a,i],null]}function ro(t,e){return no(t,e,!0)}function oo(t,e,n,r){let o,a,i,s,u,c,l;const{numComps:f}=t;if(l=t.getScalarData?t.getScalarData():t.getPointData().getScalars().getData(),!l)return void console.warn("No scalar data found for imageData",t);const d=t.getDimensions();r?[[o,a],[i,s],[u,c]]=r:(o=0,a=d[0],i=0,s=d[1],u=0,c=d[2]);const p=oe.vec3.fromValues(o,i,u),h=t.getDirection(),g=h.slice(0,3),y=h.slice(3,6),m=h.slice(6,9),v=t.getSpacing(),[b,A,M]=v,T=t.indexToWorld(p),w=oe.vec3.fromValues(g[0]*b,g[1]*b,g[2]*b),I=oe.vec3.fromValues(y[0]*A,y[1]*A,y[2]*A),x=oe.vec3.fromValues(m[0]*M,m[1]*M,m[2]*M),E=f||l.length/d[2]/d[1]/d[0],O=d[0]*E,P=d[1]*O,_=[],C=oe.vec3.clone(T);for(let t=u;t<=c;t++){const r=oe.vec3.clone(C);for(let r=i;r<=s;r++){const i=oe.vec3.clone(C);for(let i=o;i<=a;i++){const o=[i,r,t];if(e(C,o)){const e=t*P+r*O+i*E;let a;a=E>2?[l[e],l[e+1],l[e+2]]:l[e],_.push({value:a,index:e,pointIJK:o,pointLPS:C.slice()}),n&&n({value:a,index:e,pointIJK:o,pointLPS:C})}oe.vec3.add(C,C,w)}oe.vec3.copy(C,i),oe.vec3.add(C,C,I)}oe.vec3.copy(C,r),oe.vec3.add(C,C,x)}return _}function ao(t){let e;const n=function(t,e){const n=[...t];return e>=n.length?(Jn(n),n):(Jn(n),n.slice(0,e))}(t,50);for(let t=0;t<3;t++)if(n.every(((e,n,r)=>Math.abs(e[t]-r[0][t])<1e-6))){e=t;break}if(void 0===e)throw new Error("Cannot find a shared dimension index for polyline, probably oblique plane");const r=[],o=(e+1)%3,a=(e+2)%3;for(let e=0;e<t.length;e++)r.push([t[e][o],t[e][a]]);return{sharedDimensionIndex:e,projectedPolyline:r}}function io(t){if(t.length<3)return!1;const e=t.length,n=function(t,e){if(t.length!==e.length)throw Error("Both points should have the same dimensionality");const[n,r,o=0]=t,[a,i,s=0]=e,u=a-n,c=i-r,l=s-o;return u*u+c*c+l*l}(t[0],t[e-1]);return oe.glMatrix.equals(0,n)}function so(t,e,n={closed:void 0}){if(t.length<3)return!1;const r=t.length;let o=0;const{closed:a,holes:i}=n;if(i?.length)for(const t of i)if(so(t,e))return!1;const s=!(void 0===a?io(t):a),u=t.length-(s?1:2);for(let n=0;n<=u;n++){const a=t[n],i=t[n===r-1?0:n+1],s=a[0]>=i[0]?a[0]:i[0],u=a[1]>=i[1]?a[1]:i[1],c=a[1]<=i[1]?a[1]:i[1];if(e[0]<=s&&e[1]>=c&&e[1]<u){let t=a[0]===i[0];if(!t){const n=(e[1]-a[1])*(i[0]-a[0])/(i[1]-a[1])+a[0];t=e[0]<=n}o+=t?1:0}}return!!(o%2)}function uo(t,e){let n=t;const r=e?.numDimensions||2,o=3===r;if(!Array.isArray(t[0])){const e=t,a=e.length/r;n=new Array(e.length/r);for(let t=0,i=a;t<i;t++)n[t]=[e[t*r],e[t*r+1]],o&&n[t].push(e[t*r+2])}let a=1/0,i=1/0,s=-1/0,u=-1/0,c=1/0,l=-1/0;for(let t=0,e=n.length;t<e;t++){const[e,r,f]=n[t];a=a<e?a:e,i=i<r?i:r,s=s>e?s:e,u=u>r?u:r,o&&(c=c<f?c:f,l=l>f?l:f)}return o?{minX:a,maxX:s,minY:i,maxY:u,minZ:c,maxZ:l}:{minX:a,maxX:s,minY:i,maxY:u}}const co=(t,e,n,r,o,a,i,s)=>{const u=[oe.vec3.fromValues(n,r,o),oe.vec3.fromValues(a,r,o),oe.vec3.fromValues(n,i,o),oe.vec3.fromValues(a,i,o),oe.vec3.fromValues(n,r,s),oe.vec3.fromValues(a,r,s),oe.vec3.fromValues(n,i,s),oe.vec3.fromValues(a,i,s)],c=oe.vec3.fromValues(e[0],e[1],e[2]),l=oe.vec3.fromValues(t[0],t[1],t[2]),f=-oe.vec3.dot(c,l);let d=null;for(const t of u){const e=oe.vec3.dot(c,t)+f;if(null===d)d=Math.sign(e);else if(Math.sign(e)!==d)return!0}return!1};l({polySeg:null,polySegInitializing:!1,polySegInitializingPromise:null,async initializePolySeg(t){this.polySegInitializing?await this.polySegInitializingPromise:this.polySeg?.instance||(this.polySegInitializing=!0,this.polySegInitializingPromise=new Promise((e=>{this.polySeg=new Gn,this.polySeg.initialize({updateProgress:t}).then((()=>{this.polySegInitializing=!1,e()}))})),await this.polySegInitializingPromise)},async convertContourToSurface(t,...e){const{polylines:n,numPointsArray:r}=t,[o]=e;await this.initializePolySeg(o);return await this.polySeg.instance.convertContourRoiToSurface(n,r)},async convertLabelmapToSurface(t,...e){const[n]=e;await this.initializePolySeg(n);return this.polySeg.instance.convertLabelmapToSurface(t.scalarData,t.dimensions,t.spacing,t.direction,t.origin,[t.segmentIndex])},async convertContourToVolumeLabelmap(t,...e){const[n]=e,r=await new Gn;await r.initialize({updateProgress:n});const{segmentIndices:o,scalarData:a,annotationUIDsInSegmentMap:i,dimensions:s,origin:u,direction:c,spacing:l}=t,f=Qn.createVolumeVoxelManager(s,a),d=Un.newInstance();d.setDimensions(s),d.setOrigin(u),d.setDirection(c),d.setSpacing(l);const p=hn.newInstance({name:"Pixels",numberOfComponents:1,values:a});d.getPointData().setScalars(p),d.modified();for(const t of o){const e=i.get(t);for(const n of e){if(!n.polyline)continue;const{polyline:e,holesPolyline:r}=n,o=ro(e),[a,i,s]=Hn(d,[o[0][0],o[1][0],o[2][0]]),[u,c,l]=Hn(d,[o[0][1],o[1][1],o[2][1]]),{projectedPolyline:p,sharedDimensionIndex:h}=ao(e),g=r?.map((t=>{const{projectedPolyline:e}=ao(t);return e})),y=(h+1)%3,m=(h+2)%3;oo(d,(t=>{const e=[t[y],t[m]];return so(p,e,{holes:g})}),(({pointIJK:e})=>{f.setAtIJKPoint(e,t)}),[[a,u],[i,c],[s,l]])}}return f.scalarData},async convertContourToStackLabelmap(t,...e){const[n]=e,r=await new Gn;await r.initialize({updateProgress:n});const{segmentationsInfo:o,annotationUIDsInSegmentMap:a,segmentIndices:i}=t,s=new Map;o.forEach(((t,e)=>{const{dimensions:n,scalarData:r,direction:o,spacing:a,origin:i}=t,u=Qn.createVolumeVoxelManager(n,r),c=Un.newInstance();c.setDimensions(n),c.setOrigin(i),c.setDirection(o),c.setSpacing(a);const l=hn.newInstance({name:"Pixels",numberOfComponents:1,values:r});c.getPointData().setScalars(l),c.modified(),s.set(e,{manager:u,imageData:c})}));for(const t of i){const e=a.get(t);for(const n of e){if(!n.polyline)continue;const{polyline:e,holesPolyline:r,referencedImageId:o}=n,a=ro(e),{manager:i,imageData:u}=s.get(o),[c,l,f]=Hn(u,[a[0][0],a[1][0],a[2][0]]),[d,p,h]=Hn(u,[a[0][1],a[1][1],a[2][1]]),{projectedPolyline:g,sharedDimensionIndex:y}=ao(e),m=r?.map((t=>{const{projectedPolyline:e}=ao(t);return e})),v=(y+1)%3,b=(y+2)%3;oo(u,(t=>{const e=[t[v],t[b]];return so(g,e,{holes:m})}),(({pointIJK:e})=>{i.setAtIJKPoint(e,t)}),[[c,d],[l,p],[f,h]])}}return o.forEach(((t,e)=>{const{manager:n}=s.get(e);t.scalarData=n.scalarData})),o},async convertSurfaceToVolumeLabelmap(t,...e){const[n]=e;await this.initializePolySeg(n);return this.polySeg.instance.convertSurfaceToLabelmap(t.points,t.polys,t.dimensions,t.spacing,t.direction,t.origin)},async convertSurfacesToVolumeLabelmap(t,...e){const[n]=e;await this.initializePolySeg(n);const{segmentsInfo:r}=t,o=Array.from(r.keys()).map((e=>{const{points:n,polys:o}=r.get(e);return{...this.polySeg.instance.convertSurfaceToLabelmap(n,o,t.dimensions,t.spacing,t.direction,t.origin),segmentIndex:e}})),a=await Promise.all(o),i=Un.newInstance();i.setDimensions(t.dimensions),i.setOrigin(t.origin),i.setSpacing(t.spacing),i.setDirection(t.direction);const s=t.dimensions[0]*t.dimensions[1]*t.dimensions[2],u=hn.newInstance({name:"Pixels",numberOfComponents:1,values:new Uint8Array(s)});i.getPointData().setScalars(u),i.modified();const c=Qn.createVolumeVoxelManager(t.dimensions,i.getPointData().getScalars().getData()),l=a.map((t=>{const{data:e,dimensions:n,direction:r,origin:o,spacing:a}=t,i=Un.newInstance();i.setDimensions(n),i.setOrigin(o),i.setSpacing(a),i.setDirection(r);const s=hn.newInstance({name:"Pixels",numberOfComponents:1,values:e});i.getPointData().setScalars(s),i.modified();const u=Qn.createVolumeVoxelManager(n,e),c=i.getExtent();return{volume:i,voxelManager:u,extent:c,scalarData:e,segmentIndex:t.segmentIndex}}));return oo(i,(()=>!0),(({pointIJK:t,pointLPS:e})=>{try{for(const n of l){const{volume:r,extent:o,voxelManager:a,segmentIndex:i}=n,s=r.worldToIndex(e);if(s[0]<o[0]||s[0]>o[1]||s[1]<o[2]||s[1]>o[3]||s[2]<o[4]||s[2]>o[5])continue;const u=s.map(Math.round);if(a.getAtIJK(...u)>0){c.setAtIJKPoint(t,i);break}}}catch(t){}})),c.scalarData},getSurfacesAABBs({surfacesInfo:t}){const e=new Map;for(const{points:n,id:r}of t){const t=uo(n,{numDimensions:3});e.set(r,t)}return e},cutSurfacesIntoPlanes({planesInfo:t,surfacesInfo:e,surfacesAABB:n=new Map},r,o){const a=t.length,i=Zr.newInstance(),s=me.newInstance();i.setCutFunction(s);const u=Wr.newInstance();try{for(const[c,l]of t.entries()){const{sliceIndex:t,planes:f}=l,d=new Map;for(const t of e){const{points:e,polys:r,id:o}=t,a=n.get(o)||uo(e,{numDimensions:3});n.has(o)||n.set(o,a);const{minX:c,minY:l,minZ:p,maxX:h,maxY:g,maxZ:y}=a,{origin:m,normal:v}=f[0];if(!co(m,v,c,l,p,h,g,y))continue;u.getPoints().setData(e,3),u.getPolys().setData(r,3),u.modified(),i.setInputData(u),s.setOrigin(m),s.setNormal(v);try{i.update()}catch(t){console.warn("Error during clipping",t);continue}const b=i.getOutputData(),A=b;A.buildLinks();const M=Yr.newInstance();M.setInputData(A);const T=M.getOutputData();b&&d.set(o,{points:T.getPoints().getData(),lines:T.getLines().getData(),numberOfCells:T.getLines().getNumberOfCells()})}r({progress:(c+1)/a}),o({sliceIndex:t,polyDataResults:d})}}catch(t){console.warn("Error during processing",t)}finally{e=null,s.delete()}}})})(),r=r.default})()));